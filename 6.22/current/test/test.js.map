{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js-dos-ts/js-dos-build.ts","js-dos-ts/js-dos-cache-db.ts","js-dos-ts/js-dos-cache-noop.ts","js-dos-ts/js-dos-cache.ts","js-dos-ts/js-dos-ci.ts","js-dos-ts/js-dos-conf.ts","js-dos-ts/js-dos-fs.ts","js-dos-ts/js-dos-host.ts","js-dos-ts/js-dos-module.ts","js-dos-ts/js-dos-options.ts","js-dos-ts/js-dos-ui.ts","js-dos-ts/js-dos-xhr.ts","js-dos-ts/js-dos.ts","node_modules/assert/assert.js","node_modules/assert/node_modules/inherits/inherits_browser.js","node_modules/assert/node_modules/util/support/isBufferBrowser.js","node_modules/assert/node_modules/util/util.js","node_modules/process/browser.js","test/compare.ts","test/do.ts","test/test.ts"],"names":[],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1kBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACxLA,IAAA,SAAA,QAAA,QAAA,CAAA;AAEA,IAAA,OAAA,QAAA,MAAA,CAAA;AAEA;AACA;AACA;AAEA,SAAgB,cAAhB,CAA+B,QAA/B,EAAiD,EAAjD,EAA0E,IAA1E,EAA0F;AACtF,YAAQ,QAAR,EAAkB,EAAlB,EAAsB,UAAC,KAAD,EAAU;AAC5B,eAAO,KAAP,CAAa,CAAb,EAAgB,KAAhB;AACA,WAAG,IAAH;AACA;AACH,KAJD;AAKH;AAND,QAAA,cAAA,GAAA,cAAA;AAQA,IAAM,UAAU,SAAV,OAAU,CAAC,QAAD,EAAmB,EAAnB,EAA4C,QAA5C,EAAiF;AAC7F,SAAA,MAAA,CAAO,GAAG,UAAH,EAAP,EAAwB,UAAC,SAAD,EAAsB;AAC1C,YAAM,MAAM,IAAI,KAAJ,EAAZ;AACA,YAAI,MAAJ,GAAa,YAAK;AACd,mBAAO,IAAI,KAAJ,KAAc,GAAG,KAAH,EAArB,EAAiC,oBAAoB,GAAG,KAAH,EAApB,GAAiC,cAAjC,GAAkD,IAAI,KAAvF;AACA,mBAAO,IAAI,MAAJ,KAAe,GAAG,MAAH,EAAtB,EAAmC,qBAAqB,GAAG,MAAH,EAArB,GAAmC,cAAnC,GAAoD,IAAI,MAA3F;AAEA,gBAAM,SAAS,SAAS,aAAT,CAAuB,QAAvB,CAAf;AACA,mBAAO,KAAP,GAAe,IAAI,KAAnB;AACA,mBAAO,MAAP,GAAgB,IAAI,MAApB;AACA,gBAAM,MAAM,OAAO,UAAP,CAAkB,IAAlB,CAAZ;AACA,gBAAI,SAAJ,CAAc,GAAd,EAAmB,CAAnB,EAAsB,CAAtB;AACA,gBAAM,WAAW,IAAI,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,IAAI,KAA3B,EAAkC,IAAI,MAAtC,EAA8C,IAA/D;AAEA,gBAAM,cAAc,IAAI,KAAJ,EAApB;AACA,wBAAY,MAAZ,GAAqB,YAAK;AACtB;;;;;;;AAQA,oBAAM,eAAe,SAAS,aAAT,CAAuB,QAAvB,CAArB;AACA,6BAAa,KAAb,GAAqB,YAAY,KAAjC;AACA,6BAAa,MAAb,GAAsB,YAAY,MAAlC;AACA,oBAAM,YAAY,aAAa,UAAb,CAAwB,IAAxB,CAAlB;AACA,0BAAU,SAAV,CAAoB,WAApB,EAAiC,CAAjC,EAAoC,CAApC;AACA,oBAAM,SAAS,UAAU,YAAV,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,YAAY,KAAzC,EAAgD,YAAY,MAA5D,EAAoE,IAAnF;AAEA,oBAAI,QAAQ,CAAZ;AACA,oBAAM,QAAQ,IAAI,KAAlB;AACA,oBAAM,SAAS,IAAI,MAAnB;AACA,qBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAApB,EAA2B,GAA3B,EAAgC;AAC5B,yBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAApB,EAA4B,GAA5B,EAAiC;AAC7B,iCAAS,KAAK,GAAL,CAAS,SAAS,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAAjC,IAAsC,OAAO,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAA/B,CAA/C,CAAT;AACA,iCAAS,KAAK,GAAL,CAAS,SAAS,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAAjC,IAAsC,OAAO,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAA/B,CAA/C,CAAT;AACA,iCAAS,KAAK,GAAL,CAAS,SAAS,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAAjC,IAAsC,OAAO,IAAI,KAAJ,GAAY,CAAZ,GAAgB,IAAI,CAApB,GAAwB,CAA/B,CAA/C,CAAT;AACH;AACJ;AAED;AACA,oBAAM,QAAQ,KAAK,KAAL,CAAW,SAAS,IAAI,KAAJ,GAAY,IAAI,MAAhB,GAAyB,CAAlC,CAAX,CAAd;AACA,yBAAS,KAAT;AACH,aA9BD;AA+BA,wBAAY,GAAZ,GAAkB,SAAlB;AACH,SA5CD;AA6CA,YAAI,GAAJ,GAAU,QAAV;AACH,KAhDD;AAiDH,CAlDD;;;;;;AChBA,IAAA,SAAA,QAAA,QAAA,CAAA;AAIA;AACA;AACA;AACA;AACA;AAEA,SAAgB,MAAhB,CAA0B,OAA1B,EAA+C,EAA/C,EAAiE;AAC7D,YAAQ,IAAR,CAAa,UAAC,CAAD,EAAS;AAClB,YAAM,QAAQ,SAAR,KAAQ,GAAK;AACf,eAAG,CAAH;AACH,SAFD;AAIA,mBAAW,KAAX,EAAkB,CAAlB;AACH,KAND;AAOH;AARD,QAAA,MAAA,GAAA,MAAA;AAUA,SAAgB,OAAhB,CAA2B,OAA3B,EAAgD,EAAhD,EAAuE;AACnE,YAAQ,KAAR,CAAc,UAAC,CAAD,EAAc;AACxB,YAAM,QAAQ,SAAR,KAAQ,GAAK;AACf,eAAG,CAAH;AACH,SAFD;AAIA,mBAAW,KAAX,EAAkB,CAAlB;AACH,KAND;AAOH;AARD,QAAA,OAAA,GAAA,OAAA;AAUA,SAAgB,MAAhB,CAA0B,OAA1B,EAA+C,EAA/C,EAAiE;AAC7D,WAAO,OAAP,EAAgB,EAAhB;AACA,YAAQ,OAAR,EAAiB,UAAC,GAAD;AAAA,eAAiB,OAAO,IAAP,CAAY,GAAZ,CAAjB;AAAA,KAAjB;AACH;AAHD,QAAA,MAAA,GAAA,MAAA;AAKA,SAAgB,OAAhB,CAAwB,OAAxB,EAAkD,EAAlD,EAA0F;AACtF,WAAO,OAAP,EAAgB,UAAC,OAAD,EAAY;AACxB,WAAG,QAAQ,EAAX,EAAe,QAAQ,IAAvB;AACH,KAFD;AAGA,YAAQ,OAAR,EAAiB,UAAC,GAAD;AAAA,eAAiB,OAAO,IAAP,CAAY,GAAZ,CAAjB;AAAA,KAAjB;AACH;AALD,QAAA,OAAA,GAAA,OAAA;;;;ACnCA;AACA;;;;;;;AAEA,IAAA,SAAA,QAAA,QAAA,CAAA;AACA,IAAA,WAAA,QAAA,qBAAA,CAAA;AAGA,IAAA,sBAAA,QAAA,gCAAA,CAAA;AAEA,IAAA,gBAAA,QAAA,0BAAA,CAAA;AAGA,IAAA,YAAA,QAAA,WAAA,CAAA;AACA,IAAA,OAAA,QAAA,MAAA,CAAA;AAEA,MAAM,aAAN;AAEA,KAAK,2DAAL,EAAkE,UAAC,IAAD,EAAS;AACvE,QAAM,WAAW,cAAA,IAAA,CAAK,aAAtB;AACA,kBAAA,IAAA,CAAK,aAAL,GAAqB,KAArB;AACA,kBAAA,IAAA,CAAK,aAAL,CAAmB,aAAnB,EAAkC,IAAI,oBAAA,OAAJ,EAAlC,EAAmD;AAC/C,iBAAS,iBAAC,OAAD,EAAoB;AACzB,0BAAA,IAAA,CAAK,aAAL,GAAqB,QAArB;AACA,mBAAO,KAAP,CAAa,qDAAb,EAAoE,OAApE;AACA;AACH;AAL8C,KAAnD;AAOH,CAVD;AAYA,KAAK,gEAAL,EAAuE,UAAC,IAAD,EAAS;AAC5E,kBAAA,IAAA,CAAK,aAAL,CAAmB,aAAnB,EAAkC,IAAI,oBAAA,OAAJ,EAAlC,EAAmD;AAC/C,iBAAS,iBAAC,OAAD,EAAoB;AACzB,mBAAO,KAAP,CAAa,oFAAb,EAAmG,OAAnG;AACA;AACH;AAJ8C,KAAnD;AAMH,CAPD;AASA,KAAK,mDAAL,EAA0D,UAAC,IAAD,EAAS;AAC/D,QAAI,QAAQ,KAAZ;AACA,QAAI,QAAQ,KAAZ;;AAF+D,QAGzD,SAHyD;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,gCAIhD,GAJgD,EAInC,IAJmC,EAIxB,OAJwB,EAIL;AAClD,wBAAQ,SAAU,QAAQ,kBAAR,IAA8B,gBAAgB,WAA9C,IAA8D,KAAqB,UAArB,GAAkC,CAAlH;AACA;AACH;AAP0D;AAAA;AAAA,gCAShD,GATgD,EASnC,MATmC,EASN,OATM,EASwB;AAC/E,wBAAQ,SAAS,QAAQ,kBAAzB;AACA,wBAAQ,cAAR;AACH;AAZ0D;AAAA;AAAA,oCAc5C,IAd4C,EAcH,KAdG,EAcc;AACrE;AACH;AAhB0D;;AAAA;AAAA;;AAmB/D,QAAI,aAAa,CAAC,CAAlB;AACA,kBAAA,IAAA,CAAK,aAAL,CAAmB,aAAnB,EAAkC,IAAI,SAAJ,EAAlC,EAAmD;AAC/C,oBAAY,oBAAC,KAAD,EAAgB,KAAhB,EAA+B,MAA/B,EAAiD;AACzD,oBAAQ,GAAR,CAAY,KAAZ,EAAmB,KAAnB,EAA0B,MAA1B;AACA,mBAAO,KAAP,CAAa,IAAb,EAAmB,UAAU,KAA7B,EAAoC,SAAS,IAAT,GAAgB,KAApD;AACA,mBAAO,KAAP,CAAa,IAAb,EAAmB,cAAc,MAAjC,EAAyC,aAAa,IAAb,GAAoB,MAA7D;AACA,yBAAa,MAAb;AACH,SAN8C;AAO/C,kBAAU,kBAAC,MAAD,EAAc,eAAd,EAAsC;AAC5C,mBAAO,EAAP,CAAU,KAAV;AACA,mBAAO,EAAP,CAAU,KAAV;AACA;AACH,SAX8C;AAY/C,iBAAS,iBAAC,OAAD,EAAoB;AACzB,mBAAO,IAAP;AACH;AAd8C,KAAnD;AAgBH,CApCD;AAsCA,KAAK,wCAAL,EAA+C,UAAC,IAAD,EAAS;AACpD,kBAAA,IAAA,CAAK,aAAL,CAAmB,aAAnB,EAAkC,IAAI,oBAAA,OAAJ,EAAlC,EAAmD;AAC/C,oBAAY,oBAAC,KAAD,EAAgB,KAAhB,EAA+B,MAA/B,EAAiD;AACzD,mBAAO,IAAP;AACH,SAH8C;AAI/C,kBAAU,kBAAC,MAAD,EAAc,eAAd,EAAsC;AAC5C;AACH,SAN8C;AAO/C,iBAAS,iBAAC,OAAD,EAAoB;AACzB,mBAAO,IAAP;AACH;AAT8C,KAAnD;AAWH,CAZD;AAcA,KAAK,iDAAL,EAAwD,UAAC,IAAD,EAAS;AAC7D,kBAAA,IAAA,CAAK,aAAL,CAAmB,aAAnB,EAAkC,IAAI,oBAAA,OAAJ,EAAlC,EAAmD;AAC/C,kBAAU,kBAAC,MAAD,EAAc,eAAd,EAAsC;AAC5C,mBAAO,EAAP,CAAU,MAAV;AACA,mBAAO,EAAP,CAAU,eAAV;AACA;AACH,SAL8C;AAM/C,iBAAS,iBAAC,OAAD,EAAoB;AACzB,mBAAO,IAAP;AACH;AAR8C,KAAnD;AAUH,CAXD;AAaA,MAAM,QAAN;AAEA,KAAK,oDAAL,EAA2D,UAAC,IAAD,EAAS;AAChE,aAAA,GAAA,CAAI,IAAJ,EAAU;AACN,oBAAY,aADN;AAEN,iBAAS,iBAAC,OAAD,EAAoB;AACzB,mBAAO,KAAP,CAAa,wCAAb,EAAuD,OAAvD;AACA;AACH;AALK,KAAV;AAOH,CARD;AAUA,KAAK,mDAAL,EAA0D,UAAC,IAAD,EAAS;AAC/D,QAAM,MAAM,SAAA,GAAA,CAAI,IAAJ,EAAU;AAClB,oBAAY;AADM,KAAV,CAAZ;AAGA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,OAAD,EAAY;AACrB,eAAO,KAAP,CAAa,wCAAb,EAAuD,OAAvD;AACA;AACH,KAHD;AAIA,SAAA,MAAA,CAAO,GAAP,EAAY,YAAK;AACb,eAAO,IAAP;AACH,KAFD;AAGH,CAXD;AAaA,KAAK,iDAAL,EAAwD,UAAC,IAAD,EAAS;AAC7D,QAAM,MAAM,SAAA,GAAA,CAAI,IAAJ,EAAU;AAClB,oBAAY;AADM,KAAV,CAAZ;AAGA,QAAM,UAAU,IAAI,KAAJ,CAAU,UAAC,EAAD,EAAK,IAAL,EAAa;AACnC,YAAM,KAAK,SAAL,EAAK;AAAA,mBAAM,OAAO,IAAP,EAAN;AAAA,SAAX;AACA,mBAAW,EAAX,EAAe,CAAf;AACH,KAHe,CAAhB;AAIA,SAAA,OAAA,CAAQ,OAAR,EAAiB,UAAC,OAAD,EAAY;AACzB,eAAO,KAAP,CAAa,wCAAb,EAAuD,OAAvD;AACA;AACH,KAHD;AAIH,CAZD;AAcA,KAAK,iCAAL,EAAwC,UAAC,IAAD,EAAS;AAC7C,QAAM,MAAM,SAAA,GAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAY;AADwD,KAA5D,CAAZ;AAGA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAa;AACtB,aAAA,MAAA,CAAO,KAAK,EAAL,CAAP,EAAiB,UAAC,EAAD,EAAO;AACpB,eAAG,IAAH;AACA;AACH,SAHD;AAIH,KALD;AAMH,CAVD;AAYA,KAAK,sCAAL,EAA6C,UAAC,IAAD,EAAS;AAClD,QAAM,MAAM,SAAA,GAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAY;AADwD,KAA5D,CAAZ;AAGA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAa;AACtB,aAAA,MAAA,CAAO,KAAK,EAAL,CAAP,EAAiB,UAAC,EAAD,EAAO;AACpB,sBAAA,cAAA,CAAe,UAAf,EAA2B,EAA3B,EAA+B,IAA/B;AACH,SAFD;AAGH,KAJD;AAKH,CATD;AAWA,MAAM,WAAN;AAEA,KAAK,qCAAL,EAA4C,UAAC,IAAD,EAAS;AACjD,QAAM,MAAM,SAAA,GAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAY,aADwD;AAEpE,iBAAS,iBAAC,OAAD,EAAY;AACjB,mBAAO,KAAP,CAAa,OAAb,EAAsB,kDAAtB;AACA;AACH;AALmE,KAA5D,CAAZ;AAQA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAa;AACtB,WAAG,UAAH,CAAc,EAAd,EAAkB,EAAlB;AACH,KAFD;AAGH,CAZD;AAcA,KAAK,uCAAL,EAA8C,UAAC,IAAD,EAAS;AACnD,QAAM,MAAM,SAAA,GAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAY,aADwD;AAEpE,iBAAS,iBAAC,OAAD,EAAY;AACjB,mBAAO,KAAP,CAAa,OAAb,EAAsB,wDAAtB;AACA;AACH;AALmE,KAA5D,CAAZ;AAQA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAa;AACtB,WAAG,UAAH,CAAc,QAAd,EAAwB,EAAxB;AACH,KAFD;AAGH,CAZD;AAcA,KAAK,2BAAL,EAAkC,UAAC,IAAD,EAAS;AACvC,QAAM,MAAM,SAAA,GAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAY,aADwD;AAEpE,iBAAS,iBAAC,OAAD,EAAY;AACjB,mBAAO,IAAP;AACH;AAJmE,KAA5D,CAAZ;AAOA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAa;AACtB,WAAG,UAAH,CAAc,YAAd,EAA4B,YAA5B;AACA,aAAA,MAAA,CAAO,MAAP,EAAe,UAAC,EAAD,EAAO;AAClB,iBAAA,MAAA,CAAO,GAAG,KAAH,CAAS,iBAAT,CAAP,EAAoC,YAAK;AACrC,0BAAA,cAAA,CAAe,cAAf,EAA+B,EAA/B,EAAmC,IAAnC;AACH,aAFD;AAGH,SAJD;AAKH,KAPD;AAQH,CAhBD;AAkBA,KAAK,0CAAL,EAAiD,UAAC,IAAD,EAAS;AACtD,QAAM,MAAM,SAAA,GAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAY,aADwD;AAEpE,iBAAS,iBAAC,OAAD,EAAY;AACjB,mBAAO,IAAP;AACH;AAJmE,KAA5D,CAAZ;AAOA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAa;AACtB,WAAG,UAAH,CAAc,gBAAd,EAAgC,YAAhC;AACA,aAAA,MAAA,CAAO,MAAP,EAAe,UAAC,EAAD,EAAO;AAClB,iBAAA,MAAA,CAAO,GAAG,KAAH,CAAS,iBAAT,CAAP,EAAoC,YAAK;AACrC,0BAAA,cAAA,CAAe,cAAf,EAA+B,EAA/B,EAAmC,IAAnC;AACH,aAFD;AAGH,SAJD;AAKH,KAPD;AAQH,CAhBD;AAkBA,KAAK,6BAAL,EAAoC,UAAC,IAAD,EAAS;AACzC,QAAM,UAAU,UAAU,cAAV,CAAyB,OAAzB,CAAhB;AAEA,YAAQ,OAAR,GAAkB,UAAC,KAAD,EAAU;AACxB,gBAAQ,KAAR,CAAc,KAAd;AACA,eAAO,IAAP;AACH,KAHD;AAKA,YAAQ,SAAR,GAAoB,UAAC,KAAD,EAAU;AAC1B;AACH,KAFD;AAGH,CAXD;AAaA,KAAK,4DAAL,EAAmE,UAAC,IAAD,EAAS;AACxE,QAAI,eAAe,KAAnB;AACA,QAAM,MAAM,SAAA,GAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAY,aADwD;AAEpE,iBAAS,iBAAC,OAAD,EAAY;AACjB,mBAAO,IAAP;AACH,SAJmE;AAKpE,oBAAY,oBAAC,KAAD,EAAgB,KAAhB,EAA+B,MAA/B,EAAiD;AACzD,2BAAe,IAAf;AACH;AAPmE,KAA5D,CAAZ;AAUA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAa;AACtB,aAAA,MAAA,CAAO,GAAG,OAAH,CAAW,YAAX,EAAyB,OAAzB,CAAP,EAA0C,YAAK;AAC3C,iBAAA,MAAA,CAAO,MAAP,EAAe,UAAC,EAAD,EAAO;AAClB,qBAAA,MAAA,CAAO,GAAG,KAAH,CAAS,UAAT,CAAP,EAA6B,YAAK;AAC9B,2BAAO,EAAP,CAAU,YAAV;AACA,8BAAA,cAAA,CAAe,qBAAf,EAAsC,EAAtC,EAA0C,IAA1C;AACH,iBAHD;AAIH,aALD;AAMH,SAPD;AAQH,KATD;AAUH,CAtBD;AAwBA,KAAK,+DAAL,EAAsE,UAAC,IAAD,EAAS;AAC3E,QAAM,MAAM,SAAA,GAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAY,aADwD;AAEpE,iBAAS,iBAAC,OAAD,EAAY;AACjB,mBAAO,IAAP;AACH,SAJmE;AAKpE,oBAAY,oBAAC,KAAD,EAAgB,KAAhB,EAA+B,MAA/B,EAAiD;AACzD,mBAAO,IAAP;AACH;AAPmE,KAA5D,CAAZ;AAUA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAa;AACtB,aAAA,MAAA,CAAO,GAAG,OAAH,CAAW,YAAX,EAAyB,OAAzB,CAAP,EAA0C,YAAK;AAC3C,iBAAA,MAAA,CAAO,MAAP,EAAe,UAAC,EAAD,EAAO;AAClB,qBAAA,MAAA,CAAO,GAAG,KAAH,CAAS,UAAT,CAAP,EAA6B,YAAK;AAC9B,8BAAA,cAAA,CAAe,qBAAf,EAAsC,EAAtC,EAA0C,IAA1C;AACH,iBAFD;AAGH,aAJD;AAKH,SAND;AAOH,KARD;AASH,CApBD;AAsBA,MAAM,QAAN;AAEA,KAAK,8CAAL,EAAqD,UAAC,IAAD,EAAS;AAC1D,QAAM,MAAM,SAAA,GAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAY,aADwD;AAEpE,iBAAS,iBAAC,OAAD,EAAY;AACjB,mBAAO,IAAP;AACH;AAJmE,KAA5D,CAAZ;AAOA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAa;AACtB,WAAG,UAAH,CAAc,aAAd;AAUA,aAAA,MAAA,CAAO,KAAK,CAAC,OAAD,EAAU,aAAV,CAAL,CAAP,EAAuC,UAAC,EAAD,EAAO;AAC1C,sBAAA,cAAA,CAAe,gBAAf,EAAiC,EAAjC,EAAqC,IAArC;AACH,SAFD;AAGH,KAdD;AAeH,CAvBD;AAyBA,KAAK,wCAAL,EAA+C,UAAC,IAAD,EAAS;AACpD,QAAM,MAAM,SAAA,GAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAY,aADwD;AAEpE,iBAAS,iBAAC,OAAD,EAAY;AACjB,mBAAO,IAAP;AACH;AAJmE,KAA5D,CAAZ;AAOA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAa;AACtB,WAAG,UAAH,CAAc,aAAd;AAMA,aAAA,MAAA,CAAO,KAAK,CAAC,OAAD,EAAU,aAAV,CAAL,CAAP,EAAuC,UAAC,EAAD,EAAO;AAC1C,sBAAA,cAAA,CAAe,gBAAf,EAAiC,EAAjC,EAAqC,IAArC;AACH,SAFD;AAGH,KAVD;AAWH,CAnBD;AAqBA,KAAK,2BAAL,EAAkC,UAAC,IAAD,EAAS;AACvC,QAAM,MAAM,SAAA,GAAA,CAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,EAA4D;AACpE,oBAAY;AADwD,KAA5D,CAAZ;AAIA,SAAA,OAAA,CAAQ,GAAR,EAAa,UAAC,EAAD,EAAK,IAAL,EAAa;AACtB,aAAA,MAAA,CAAO,GAAG,OAAH,CAAW,YAAX,CAAP,EAAiC,YAAK;AAClC,iBAAA,MAAA,CAAO,KAAK,CAAC,YAAD,CAAL,CAAP,EAA6B,UAAC,EAAD,EAAO;AAChC,oBAAM,KAAK,SAAL,EAAK,GAAK;AACZ,8BAAA,cAAA,CAAe,YAAf,EAA6B,EAA7B,EAAiC,IAAjC;AACA;AACH,iBAHD;AAKA,2BAAW,EAAX,EAAe,IAAf;AACH,aAPD;AAQH,SATD;AAUH,KAXD;AAYH,CAjBD;AAmBA,IAAM,YAAY,SAAZ,SAAY,CAAC,EAAD,EAA4B;AAC1C,OAAG,UAAH,GAAgB,IAAhB,CAAqB,UAAC,IAAD,EAAS;AAC1B,YAAM,IAAI,OAAO,IAAP,CAAY,aAAZ,EAA2B,mBAA3B,CAAV;AACA,UAAE,QAAF,CAAW,KAAX,CAAiB,eAAe,IAAf,GAAsB,uBAAvC;AACH,KAHD;AAIH,CALD;AAOA,IAAM,41CAAN","file":"test.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// Autogenerated\n// -------------\n// gulpfile.js --> generateBuildInfo\n\nexport const Build = {\n    version: \"6.22.20 (a61956c685b01720b85c6a1f1cce0cd1)\",\n    jsVersion: \"254ae5ceaa80eb9f8ccecb542130a63aad719e88\",\n    jsSize:  468455,\n    wasmVersion: \"d9f429891f4b5026d1dacb873f8f7a2a\",\n    wasmSize: 2140358,\n};\n","import { ICache } from \"./js-dos-cache\";\n\nexport default class CacheDb implements ICache {\n\n    public version: string;\n    private storeName: string = \"files\";\n    private indexedDB: IDBFactory;\n    private db: IDBDatabase;\n\n    constructor(version: string, onready: (cache: ICache) => void, onerror: (msg: string) => void) {\n        this.version = version;\n        this.indexedDB = window.indexedDB || (window as any).mozIndexedDB\n            || (window as any).webkitIndexedDB || (window as any).msIndexedDB;\n\n        if (!this.indexedDB) {\n            onerror(\"Indexed db is not supported on this host\");\n            return;\n        }\n\n        const openRequest = this.indexedDB.open(\"js-dos-cache (\" + version + \")\", 1);\n        openRequest.onerror = (event) => {\n            onerror(\"Can't open cache database\");\n        };\n        openRequest.onsuccess = (event) => {\n            this.db = openRequest.result;\n            onready(this);\n        };\n        openRequest.onupgradeneeded = (event) => {\n            try {\n                this.db = openRequest.result;\n                this.db.onerror = (event) => {\n                    onerror(\"Can't upgrade cache database\");\n                };\n\n                this.db.createObjectStore(this.storeName);\n            } catch (e) {\n                onerror(\"Can't upgrade cache database\");\n            }\n        };\n    }\n\n    public put(key: string, data: any, onflush: () => void) {\n        const transaction = this.db.transaction(this.storeName, \"readwrite\");\n        transaction.oncomplete = () => onflush();\n        transaction.objectStore(this.storeName).put(data, key);\n    }\n\n    public get(key: string, ondata: (data: any) => void, onerror: (msg: string) => void) {\n        const transaction = this.db.transaction(this.storeName, \"readonly\");\n        const request = transaction.objectStore(this.storeName).get(key);\n        request.onerror = () => onerror(\"Can't read value for key '\" + key + \"'\");\n        request.onsuccess = () => {\n            if (request.result) {\n                ondata(request.result);\n            } else {\n                onerror(\"Result is empty for key '\" + key + \"', result: \" + request.result);\n            }\n        };\n    }\n\n    public forEach(each: (key: string, value: any) => void, onend: () => void) {\n        const transaction = this.db.transaction(this.storeName, \"readonly\");\n        const request = transaction.objectStore(this.storeName).openCursor();\n        request.onerror = () => onerror(\"Can't open cursor on \" + this.storeName);\n        request.onsuccess = (event) => {\n            const cursor = (event.target as any).result as IDBCursorWithValue;\n            if (cursor) {\n                each(cursor.key.toString(), cursor.value);\n                cursor.continue();\n            } else {\n                onend();\n            }\n        };\n    }\n}\n","import { ICache } from \"./js-dos-cache\";\n\nexport default class CacheNoop implements ICache {\n    public put(key: string, data: any, onflush: () => void) {\n        // nothing\n    }\n\n    public get(key: string, ondata: (data: any) => void, onerror: (msg: string) => void) {\n        onerror(\"Cache is not supported on this host\");\n    }\n\n    public forEach(each: (key: string, value: any) => void, onend: () => void) {\n        onend();\n    }\n}\n","import CacheDb from \"./js-dos-cache-db\";\nimport CacheNoop from \"./js-dos-cache-noop\";\nimport { DosModule } from \"./js-dos-module\";\n\nexport interface ICache {\n    put: (key: string, data: any, onflush: () => void) => void;\n    get: (key: string, ondata: (data: any) => void, onerror: (msg: string) => void) => void;\n    forEach: (each: (key: string, value: any) => void, onend: () => void) => void;\n}\n\nexport default function openCache(module: DosModule, onready: (cache: ICache) => void) {\n    new CacheDb(module.version, onready, (msg: string) => {\n        module.log(\"ERR! Can't initalize cache, cause: \" + msg);\n        onready(new CacheNoop());\n    });\n}\n","// # DosCommandInterface\n// Is abstraction that allows you to control runned instance of js-dos\nimport { Dos } from \"./js-dos\";\nimport { DosModule } from \"./js-dos-module\";\nimport { Xhr } from \"./js-dos-xhr\";\n\nexport class DosCommandInterface {\n    public dos: DosModule;\n    private em: typeof Module;\n    private api: LowLevelApi;\n    private onready: (ci: DosCommandInterface) => void;\n\n    private shellInputQueue: string[] = [];\n    private shellInputClients: Array<() => void> = [];\n\n    constructor(dos: DosModule, onready: (ci: DosCommandInterface) => void) {\n        this.dos = dos;\n        this.em = (dos as any);\n        this.api = (dos as any);\n        this.api.ping = (msg: string, ...args: any[]) => {\n            this.onping(msg, args);\n        };\n        this.onready = onready;\n    }\n\n    // * `width()` - return dosbox window width in pixels\n    public width() {\n        return this.dos.canvas.width;\n    }\n\n    // * `height()` - return dosbox window height in pixels\n    public height() {\n        return this.dos.canvas.height;\n    }\n\n    // * `shell([cmd1, cmd2, ...])` - executes passed commands\n    // in dosbox shell if it's runned, returns Promise that\n    // resolves when commands sequence is executed\n    public shell(...cmd: string[]) {\n        if (cmd.length === 0) {\n            return;\n        }\n\n        return new Promise((resolve, reject) => {\n            this.shellInputClients.push(resolve);\n            for (const next of cmd) {\n                this.shellInputQueue.push(next);\n            }\n            this.requestShellInput();\n        });\n    }\n\n    // * `screenshot()` - get screnshot of canvas as ImageData\n    public screenshot() {\n        return new Promise((resolve) => {\n            this.api.send(\"screenshot\", \"\", (data) => {\n                resolve(data);\n            });\n        });\n    }\n\n    // * `exit()` - immediately exit from runtime\n    public exit() {\n        try {\n            this.dos.terminate();\n            this.api.send(\"exit\");\n        } catch (e) {\n            return 0;\n        }\n\n        this.dos.error(\"Runtime is still alive!\");\n        return -1;\n    }\n\n    private sendKeyPress(code: number) {\n        this.api.send(\"sdl_key_event\", code + \"\");\n    }\n\n    private requestShellInput() {\n        this.sendKeyPress(13);\n    }\n\n    private onping(msg: string, args: any[]) {\n        switch (msg) {\n            case \"ready\":\n                this.onready(this);\n                break;\n            case \"frame\":\n                this.onframe();\n                break;\n            case \"shell_input\":\n                if (this.shellInputQueue.length === 0) {\n                    return;\n                }\n\n                const buffer: number = args[0];\n                const maxLength: number = args[1];\n\n                const cmd = this.shellInputQueue.shift();\n                const cmdLength = (this.em as any).lengthBytesUTF8(cmd) + 1;\n\n                if (cmdLength > maxLength) {\n                    this.dos.onerror(\"Can't execute cmd '\" + cmd +\n                        \"', because it's bigger then max cmd length \" + maxLength);\n                    return;\n                }\n\n                (this.em as any).stringToUTF8(cmd, buffer, cmdLength);\n\n                if (this.shellInputQueue.length === 0) {\n                    for (const resolve of this.shellInputClients) {\n                        resolve();\n                    }\n                    this.shellInputClients = [];\n                } else {\n                    this.requestShellInput();\n                }\n            default:\n            /* do nothing */\n        }\n    }\n\n    private onframe() {\n        this.dos.tick();\n    }\n}\n\ninterface LowLevelApi {\n    send: (event: string, msg?: any, callback?: (msg: string) => void) => void;\n    ping: (msg: string) => void;\n}\n","// # js-dos default config\n// This is default config for dosbox.\n\n/* tslint:disable:max-line-length */\nexport const jsdosconf = `\n# This is the configurationfile for DOSBox 0.74. (Please use the latest version of DOSBox)\n# Lines starting with a # are commentlines and are ignored by DOSBox.\n# They are used to (briefly) document the effect of each option.\n\n[sdl]\n#       fullscreen: Start dosbox directly in fullscreen. (Press ALT-Enter to go back)\n#       fulldouble: Use double buffering in fullscreen. It can reduce screen flickering, but it can also result in a slow DOSBox.\n#   fullresolution: What resolution to use for fullscreen: original or fixed size (e.g. 1024x768).\n#                     Using your monitor's native resolution with aspect=true might give the best results.\n#                     If you end up with small window on a large screen, try an output different from surface.\n# windowresolution: Scale the window to this size IF the output device supports hardware scaling.\n#                     (output=surface does not!)\n#           output: What video system to use for output.\n#                   Possible values: surface, overlay, opengl, openglnb.\n#         autolock: Mouse will automatically lock, if you click on the screen. (Press CTRL-F10 to unlock)\n#      sensitivity: Mouse sensitivity.\n#      waitonerror: Wait before closing the console if dosbox has an error.\n#         priority: Priority levels for dosbox. Second entry behind the comma is for when dosbox is not focused/minimized.\n#                     pause is only valid for the second entry.\n#                   Possible values: lowest, lower, normal, higher, highest, pause.\n#       mapperfile: File used to load/save the key/event mappings from. Resetmapper only works with the defaul value.\n#     usescancodes: Avoid usage of symkeys, might not work on all operating systems.\n\nfullscreen=false\nfulldouble=false\nfullresolution=original\nwindowresolution=original\noutput=surface\nautolock=false\nsensitivity=100\nwaitonerror=true\npriority=higher,normal\nmapperfile=mapper-jsdos.map\nusescancodes=true\nvsync=false\n\n[dosbox]\n# language: Select another language file.\n#  machine: The type of machine tries to emulate.\n#           Possible values: hercules, cga, tandy, pcjr, ega, vgaonly, svga_s3, svga_et3000, svga_et4000, svga_paradise, vesa_nolfb, vesa_oldvbe.\n# captures: Directory where things like wave, midi, screenshot get captured.\n#  memsize: Amount of memory DOSBox has in megabytes.\n#             This value is best left at its default to avoid problems with some games,\n#             though few games might require a higher value.\n#             There is generally no speed advantage when raising this value.\n\nlanguage=\nmachine=svga_s3\ncaptures=capture\nmemsize=16\n\n[render]\n# frameskip: How many frames DOSBox skips before drawing one.\n#    aspect: Do aspect correction, if your output method doesn't support scaling this can slow things down!.\n#    scaler: Scaler used to enlarge/enhance low resolution modes.\n#              If 'forced' is appended, then the scaler will be used even if the result might not be desired.\n#            Possible values: none, normal2x, normal3x, advmame2x, advmame3x, advinterp2x, advinterp3x, hq2x, hq3x, 2xsai, super2xsai, supereagle, tv2x, tv3x, rgb2x, rgb3x, scan2x, scan3x.\n\nframeskip=0\naspect=false\nscaler=none\n\n[cpu]\n#      core: CPU Core used in emulation. auto will switch to dynamic if available and appropriate.\n#            Possible values: auto, dynamic, normal, simple.\n#   cputype: CPU Type used in emulation. auto is the fastest choice.\n#            Possible values: auto, 386, 386_slow, 486_slow, pentium_slow, 386_prefetch.\n#    cycles: Amount of instructions DOSBox tries to emulate each millisecond.\n#            Setting this value too high results in sound dropouts and lags.\n#            Cycles can be set in 3 ways:\n#              'auto'          tries to guess what a game needs.\n#                              It usually works, but can fail for certain games.\n#              'fixed #number' will set a fixed amount of cycles. This is what you usually need if 'auto' fails.\n#                              (Example: fixed 4000).\n#              'max'           will allocate as much cycles as your computer is able to handle.\n#\n#            Possible values: auto, fixed, max.\n#   cycleup: Amount of cycles to decrease/increase with keycombo.(CTRL-F11/CTRL-F12)\n# cycledown: Setting it lower than 100 will be a percentage.\n\ncore=auto\ncputype=auto\ncycles=auto\ncycleup=10\ncycledown=20\n\n[mixer]\n#   nosound: Enable silent mode, sound is still emulated though.\n#      rate: Mixer sample rate, setting any device's rate higher than this will probably lower their sound quality.\n#            Possible values: 44100, 48000, 32000, 22050, 16000, 11025, 8000, 49716.\n# blocksize: Mixer block size, larger blocks might help sound stuttering but sound will also be more lagged.\n#            Possible values: 1024, 2048, 4096, 8192, 512, 256.\n# prebuffer: How many milliseconds of data to keep on top of the blocksize.\n\nnosound=false\nrate=44100\nblocksize=1024\nprebuffer=20\n\n[midi]\n#     mpu401: Type of MPU-401 to emulate.\n#             Possible values: intelligent, uart, none.\n# mididevice: Device that will receive the MIDI data from MPU-401.\n#             Possible values: default, win32, alsa, oss, coreaudio, coremidi, none.\n# midiconfig: Special configuration options for the device driver. This is usually the id of the device you want to use.\n#               See the README/Manual for more details.\n\nmpu401=intelligent\nmididevice=default\nmidiconfig=\n\n[sblaster]\n#  sbtype: Type of Soundblaster to emulate. gb is Gameblaster.\n#          Possible values: sb1, sb2, sbpro1, sbpro2, sb16, gb, none.\n#  sbbase: The IO address of the soundblaster.\n#          Possible values: 220, 240, 260, 280, 2a0, 2c0, 2e0, 300.\n#     irq: The IRQ number of the soundblaster.\n#          Possible values: 7, 5, 3, 9, 10, 11, 12.\n#     dma: The DMA number of the soundblaster.\n#          Possible values: 1, 5, 0, 3, 6, 7.\n#    hdma: The High DMA number of the soundblaster.\n#          Possible values: 1, 5, 0, 3, 6, 7.\n# sbmixer: Allow the soundblaster mixer to modify the DOSBox mixer.\n# oplmode: Type of OPL emulation. On 'auto' the mode is determined by sblaster type. All OPL modes are Adlib-compatible, except for 'cms'.\n#          Possible values: auto, cms, opl2, dualopl2, opl3, none.\n#  oplemu: Provider for the OPL emulation. compat might provide better quality (see oplrate as well).\n#          Possible values: default, compat, fast.\n# oplrate: Sample rate of OPL music emulation. Use 49716 for highest quality (set the mixer rate accordingly).\n#          Possible values: 44100, 49716, 48000, 32000, 22050, 16000, 11025, 8000.\n\nsbtype=sb16\nsbbase=220\nirq=7\ndma=1\nhdma=5\nsbmixer=true\noplmode=auto\noplemu=default\noplrate=44100\n\n[gus]\n#      gus: Enable the Gravis Ultrasound emulation.\n#  gusrate: Sample rate of Ultrasound emulation.\n#           Possible values: 44100, 48000, 32000, 22050, 16000, 11025, 8000, 49716.\n#  gusbase: The IO base address of the Gravis Ultrasound.\n#           Possible values: 240, 220, 260, 280, 2a0, 2c0, 2e0, 300.\n#   gusirq: The IRQ number of the Gravis Ultrasound.\n#           Possible values: 5, 3, 7, 9, 10, 11, 12.\n#   gusdma: The DMA channel of the Gravis Ultrasound.\n#           Possible values: 3, 0, 1, 5, 6, 7.\n# ultradir: Path to Ultrasound directory. In this directory\n#           there should be a MIDI directory that contains\n#           the patch files for GUS playback. Patch sets used\n#           with Timidity should work fine.\n\ngus=false\ngusrate=44100\ngusbase=240\ngusirq=5\ngusdma=3\nultradir=C:\\ULTRASND\n\n[speaker]\n# pcspeaker: Enable PC-Speaker emulation.\n#    pcrate: Sample rate of the PC-Speaker sound generation.\n#            Possible values: 44100, 48000, 32000, 22050, 16000, 11025, 8000, 49716.\n#     tandy: Enable Tandy Sound System emulation. For 'auto', emulation is present only if machine is set to 'tandy'.\n#            Possible values: auto, on, off.\n# tandyrate: Sample rate of the Tandy 3-Voice generation.\n#            Possible values: 44100, 48000, 32000, 22050, 16000, 11025, 8000, 49716.\n#    disney: Enable Disney Sound Source emulation. (Covox Voice Master and Speech Thing compatible).\n\npcspeaker=true\npcrate=44100\ntandy=auto\ntandyrate=44100\ndisney=true\n\n[joystick]\n# joysticktype: Type of joystick to emulate: auto (default), none,\n#               2axis (supports two joysticks),\n#               4axis (supports one joystick, first joystick used),\n#               4axis_2 (supports one joystick, second joystick used),\n#               fcs (Thrustmaster), ch (CH Flightstick).\n#               none disables joystick emulation.\n#               auto chooses emulation depending on real joystick(s).\n#               (Remember to reset dosbox's mapperfile if you saved it earlier)\n#               Possible values: auto, 2axis, 4axis, 4axis_2, fcs, ch, none.\n#        timed: enable timed intervals for axis. Experiment with this option, if your joystick drifts (away).\n#     autofire: continuously fires as long as you keep the button pressed.\n#       swap34: swap the 3rd and the 4th axis. can be useful for certain joysticks.\n#   buttonwrap: enable button wrapping at the number of emulated buttons.\n\njoysticktype=auto\ntimed=true\nautofire=false\nswap34=false\nbuttonwrap=false\n\n[serial]\n# serial1: set type of device connected to com port.\n#          Can be disabled, dummy, modem, nullmodem, directserial.\n#          Additional parameters must be in the same line in the form of\n#          parameter:value. Parameter for all types is irq (optional).\n#          for directserial: realport (required), rxdelay (optional).\n#                           (realport:COM1 realport:ttyS0).\n#          for modem: listenport (optional).\n#          for nullmodem: server, rxdelay, txdelay, telnet, usedtr,\n#                         transparent, port, inhsocket (all optional).\n#          Example: serial1=modem listenport:5000\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n# serial2: see serial1\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n# serial3: see serial1\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n# serial4: see serial1\n#          Possible values: dummy, disabled, modem, nullmodem, directserial.\n\nserial1=dummy\nserial2=dummy\nserial3=disabled\nserial4=disabled\n\n[dos]\n#            xms: Enable XMS support.\n#            ems: Enable EMS support.\n#            umb: Enable UMB support.\n# keyboardlayout: Language code of the keyboard layout (or none).\n\nxms=true\nems=true\numb=true\nkeyboardlayout=auto\n\n[ipx]\n# ipx: Enable ipx over UDP/IP emulation.\n\nipx=false\n\n[autoexec]\n# Lines in this section will be run at startup.\n# You can put your MOUNT lines here.\n\n# https://js-dos.com\n# █▀▀▀▀▀█ █  ▄▄▄▀▀█ █▀▀▀▀▀█\n# █ ███ █ ██▄ █ ▀ ▄ █ ███ █\n# █ ▀▀▀ █ ▄██ ▀ ▀▀█ █ ▀▀▀ █\n# ▀▀▀▀▀▀▀ ▀ █▄▀▄▀ █ ▀▀▀▀▀▀▀\n# █▀▄▄█▀▀▄▄ ▀ ▀█▄▄▄▄ ▀▄█▀█▀\n# █▀ ▀ ▀▀▄ █▀ ▄ ▄▀▀▀▄ █▀█▄\n# ▄ ▄▄ █▀▀▄ ▄▀▄▀▀█  ▀▀▄▀▀█▀\n#   ▄▀▀█▀▀ █▀█▀█▀▀▄ ▀██▀█▄\n# ▀▀▀ ▀ ▀ █▄█ ▀█▄▄█▀▀▀█▀▀\n# █▀▀▀▀▀█ ▄▄▄ ▄ ▄ █ ▀ █▄▄▄▄\n# █ ███ █ ▀█▀▀▄▀▀▄████▀▀█▄█\n# █ ▀▀▀ █ ▄▀▀█▀█▀▄ ▀▀▄▄█▄█ \n# ▀▀▀▀▀▀▀ ▀   ▀▀ ▀  ▀   ▀▀▀\n`;\n","// # DosFS\n// API for working with file system of dosbox\n\nimport CacheNoop from \"./js-dos-cache-noop\";\nimport { DosModule } from \"./js-dos-module\";\nimport { Xhr } from \"./js-dos-xhr\";\n\nexport class DosFS {\n    private dos: DosModule;\n    private em: typeof Module;\n    private fs: any;\n    private syncingPromise: Promise<void> | null = null;\n    private lastSyncTime = 0;\n\n    constructor(dos: DosModule) {\n        this.dos = dos;\n        this.em = dos as any;\n        this.fs = (dos as any).FS;\n\n        // Sync fs to indexed db periodically\n        this.dos.registerTickListener(() => {\n            if (Date.now() - this.lastSyncTime < 5000) {\n                return;\n            }\n            this.lastSyncTime = Date.now();\n            this.syncFs();\n        });\n        this.dos.registerPauseListener(() => this.syncFs());\n        this.dos.registerTerminateListener(() => this.syncFs());\n    }\n\n    public chdir(path: string) {\n        this.fs.chdir(path);\n    }\n\n    // ### extract\n    public extract(url: string, persistentMount: string = \"/\", type: string = \"zip\") {\n        // download archive by given url and then extract it in cwd (cwd will be mounted as C:)\n        //\n        // * `url` - url for downloading archive\n        // * `persistentMount` - is a path to mount archive contents, by default mount point is '/' which\n        // is a MEMFS that is live only in one ssesion. It means that after restart all progress will be erased.\n        // If you set some path (any), then this path will be stored across sessions in indexed db. It means\n        // that progress will be there after browser restart.\n        // * `type` - archive type **only zip is supported**\n        //\n        // this method will return `Promise<void>`, that will be resolved\n        // on success with empty object or rejected\n\n        persistentMount = this.normalizePath(persistentMount);\n\n        const parts = persistentMount.split(\"/\");\n        this.createPath(parts, 0, parts.length);\n        this.chdir(persistentMount);\n\n        const extractArchiveInCwd = () => {\n            return new Promise<void>((resolve, reject) => {\n                if (type !== \"zip\") {\n                    reject(\"Only ZIP archive is supported\");\n                    return;\n                }\n\n                new Xhr(url, {\n                    cache: new CacheNoop(),\n                    responseType: \"arraybuffer\",\n                    fail: (msg) => reject(msg),\n                    progress: (total, loaded) => this.dos.onprogress(\"Downloading \" + url, total, loaded),\n                    success: (data: ArrayBuffer) => {\n                        const bytes = new Uint8Array(data);\n                        const buffer = this.em._malloc(bytes.length);\n                        this.em.HEAPU8.set(bytes, buffer);\n                        const retcode = (this.em as any)._extract_zip(buffer, bytes.length);\n                        this.em._free(buffer);\n\n                        if (retcode === 0) {\n                            this.writeOk(persistentMount);\n                            this.syncFs().then(resolve).catch(reject);\n                        } else {\n                            reject(\"Can't extract zip, retcode \" + retcode + \", see more info in logs\");\n                        }\n                    },\n                });\n            });\n        };\n\n        if (persistentMount === \"/\" || persistentMount.length === 0) {\n            return extractArchiveInCwd();\n        }\n\n        return new Promise<void>((resolve, reject) => {\n            if (this.lastSyncTime > 0) {\n                reject(\"Can't create persistent mount point, after syncing process starts\");\n                return;\n            }\n\n            this.fs.mount(this.fs.filesystems.IDBFS, {}, persistentMount);\n            this.fs.syncfs(true, (err: any) => {\n                if (err) {\n                    reject(\"Can't restore FS from indexed db, cause: \" + err);\n                    return;\n                }\n\n                if (!this.readOk(persistentMount)) {\n                    this.dos.warn(\"Indexed db contains broken FS, resetting...\");\n                    extractArchiveInCwd().then(resolve).catch(reject);\n                    return;\n                }\n\n                resolve();\n            });\n        });\n    }\n\n    // ### createFile\n    public createFile(file: string, body: ArrayBuffer | Uint8Array | string) {\n        // [synchronous] allow to create file in FS, you can pass absolute path.\n        // All directories will be created\n        //\n        // body can be string or ArrayBuffer or Uint8Array\n\n        if (body instanceof ArrayBuffer) {\n            body = new Uint8Array(body);\n        }\n\n        // windows style path are also valid, but **drive letter is ignored**\n        // if you pass only filename, then file will be writed in root \"/\" directory\n        file = file.replace(new RegExp(\"^[a-zA-z]+:\"), \"\") .replace(new RegExp(\"\\\\\\\\\", \"g\"), \"/\");\n        const parts = file.split(\"/\");\n\n        if (parts.length === 0) {\n            this.dos.onerror(\"Can't create file '\" + file + \"', because it's not valid file path\");\n            return;\n        }\n\n        const filename = parts[parts.length - 1].trim();\n\n        if (filename.length === 0) {\n            this.dos.onerror(\"Can't create file '\" + file + \"', because file name is empty\");\n            return;\n        }\n\n        /* i < parts.length - 1, because last part is file name */\n        const path = this.createPath(parts, 0, parts.length - 1);\n        this.fs.createDataFile(path, filename, body, true, true, true);\n    }\n\n    private createPath(parts: string[], begin: number, end: number) {\n        let path = \"\";\n        for (let i = begin; i < end; ++i) {\n            const part = parts[i].trim();\n            if (part.length === 0) {\n                continue;\n            }\n\n            this.fs.createPath(path, part, true, true);\n            path = path + \"/\" + part;\n        }\n\n        return path;\n    }\n\n    private syncFs() {\n        if (this.syncingPromise) {\n            return this.syncingPromise;\n        }\n\n        this.syncingPromise = new Promise<void>((resolve, reject) => {\n            const startedAt = Date.now();\n            this.fs.syncfs(false, (err: any) => {\n                if (err) {\n                    this.dos.error(\"Can't sync FS to indexed db, cause: \" + err);\n                    reject(err);\n                }\n                this.syncingPromise = null;\n                this.lastSyncTime = Date.now();\n                resolve();\n            });\n        });\n\n        return this.syncingPromise;\n    }\n\n    private normalizePath(path: string) {\n        if (path.length === 0 || path[0] !== \"/\") {\n            path = \"/\" + path;\n        }\n\n        if (path.length > 1 && path.endsWith(\"/\")) {\n            path = path.substr(0, path.length - 1);\n        }\n\n        return path;\n    }\n\n    private readOk(path: string) {\n        try {\n            const readed = this.fs.readFile(path + \"/state.fs\");\n            return readed[0] === 79 && readed[1] === 70;\n        } catch {\n            return false;\n        }\n    }\n\n    private writeOk(path: string) {\n        this.createFile(path + \"/state.fs\", new Uint8Array([79, 70])); // Ok\n    }\n\n}\n","// # DosHost\n// This class is used to detect and provide information about\n// features that supported in current environment\n\n/* tslint:disable:member-ordering */\nimport { Build } from \"./js-dos-build\";\nimport { ICache } from \"./js-dos-cache\";\nimport { DosModule } from \"./js-dos-module\";\nimport { Xhr } from \"./js-dos-xhr\";\n\nclass DosHost {\n\n    public wasmSupported = false;\n    public global = window as any;\n\n    private wdosboxPromise: Promise<any> = null;\n\n    constructor() {\n        this.global.exports = {};\n\n        // ### WebAssembly\n        // Host able to detect is WebAssembly supported or not,\n        // this information is stored in `Host.wasmSupported` variable\n        try {\n            if (typeof WebAssembly === \"object\" &&\n                typeof WebAssembly.instantiate === \"function\" &&\n                typeof WebAssembly.compile === \"function\") {\n\n                const wmodule = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n                if (wmodule instanceof WebAssembly.Module) {\n                    this.wasmSupported = new WebAssembly.Instance(wmodule) instanceof WebAssembly.Instance;\n                }\n            }\n        } catch (error) {\n            /* do nothing WebAssembly is not supported */\n        }\n\n        // ### polyfill\n        // Host also provides limited set of polyfills to support legacy browsers\n        this.polyfill();\n    }\n\n    // Currently polyfill contains implementations for:\n    // `Math.imul`, `Math.fround`, `Math.clz32`, `Math.trunc`\n    /* tslint:disable:no-bitwise */\n    /* tslint:disable:only-arrow-functions */\n    private polyfill() {\n        if (!Math.imul || Math.imul(0xffffffff, 5) !== -5) {\n            Math.imul = function imul(a: any, b: any) {\n                const ah = a >>> 16;\n                const al = a & 0xffff;\n                const bh = b >>> 16;\n                const bl = b & 0xffff;\n                return (al * bl + ((ah * bl + al * bh) << 16)) | 0;\n            };\n        }\n        Math.imul = Math.imul;\n\n        if (!Math.fround) {\n            Math.fround = function(x) { return x; };\n        }\n        Math.fround = Math.fround;\n\n        if (!Math.clz32) {\n            Math.clz32 = function(x) {\n                x = x >>> 0;\n                for (let i = 0; i < 32; i++) {\n                    if (x & (1 << (31 - i))) { return i; }\n                }\n                return 32;\n            };\n        }\n        Math.clz32 = Math.clz32;\n\n        if (!Math.trunc) {\n            Math.trunc = function(x) {\n                return x < 0 ? Math.ceil(x) : Math.floor(x);\n            };\n        }\n        Math.trunc = Math.trunc;\n    }\n\n    // ### resolveDosBox\n    // `resolveDosBox` is another important task of DosHost\n    public resolveDosBox(url: string, cache: ICache, module: DosModule) {\n        // When dosbox is resolved, WDOSBOX module is set to\n        // global variable `exports.WDOSBOX`. This variable is\n        // used to prevent next loads of same dosbox module.\n        if (this.global.exports.WDOSBOX) {\n            module.ondosbox(this.global.exports.WDOSBOX, this.global.exports.instantiateWasm);\n            return;\n        }\n\n        if (!this.wasmSupported) {\n            module.onerror(\"WebAssembly is not supported, can't resolve wdosbox\");\n            return;\n        }\n\n        if (this.wdosboxPromise === null) {\n            this.wdosboxPromise = this.compileDosBox(url, cache, module);\n        }\n\n        this.wdosboxPromise.then((instance: any) => {\n            /* leave promise scope */\n            const fn = () => {\n                this.wdosboxPromise = null;\n                module.ondosbox(this.global.exports.WDOSBOX, this.global.exports.instantiateWasm);\n            };\n            setTimeout(fn, 1);\n        }, (message: string) => {\n            /* leave promise scope */\n            const fn = () => {\n                this.wdosboxPromise = null;\n                module.onerror(message);\n            };\n            setTimeout(fn, 1);\n        });\n    }\n\n    // If dosbox is not yet resolved, then:\n    private compileDosBox(url: string, cache: ICache, module: DosModule) {\n        const buildTotal = Build.wasmSize + Build.jsSize;\n        return new Promise((resolve, reject) => {\n            const wasmUrl = url.replace(\".js\", \".wasm.js\");\n\n            // * Host downloads `wdosbox` asm + js scripts\n            new Xhr(wasmUrl, {\n                cache,\n                responseType: \"arraybuffer\",\n                progress: (total, loaded) => {\n                    if (module.onprogress) {\n                        module.onprogress(\"Resolving DosBox\", buildTotal, loaded);\n                    }\n                },\n                fail: (url: string, status: number, message: string) => {\n                    reject(\"Can't download wasm, code: \" + status +\n                        \", message: \" + message + \", url: \" + url);\n                },\n                success: (response: any) => {\n                    // * Compile dosbox wasm module\n                    const promise = WebAssembly.compile(response);\n                    const onreject = (reason: any) => {\n                        reject(reason + \"\");\n                    };\n                    promise.catch(onreject);\n                    promise.then((wasmModule) => {\n                        this.global.exports.instantiateWasm = (info: any, receiveInstance: any) => {\n                            info.env.globalscall = (...args: any[]) => {\n                                if (module.onglobals) {\n                                    module.onglobals.apply(null, args);\n                                }\n                            };\n                            // *  Instaniate it for each new dosbox runtime\n                            return WebAssembly.instantiate(wasmModule, info)\n                                .catch(onreject)\n                                .then((instance) => {\n                                    receiveInstance(instance, wasmModule);\n                                });\n                        };\n\n                        new Xhr(url, {\n                            cache,\n                            progress: (total, loaded) => {\n                                if (module.onprogress) {\n                                    module.onprogress(\"Resolving DosBox\", buildTotal, Build.wasmSize + loaded);\n                                }\n                            },\n                            fail: (url: string, status: number, message: string) => {\n                                reject(\"Can't download wdosbox.js, code: \" + status +\n                                    \", message: \" + message + \", url: \" + url);\n                            },\n                            success: (response: string) => {\n                                module.onprogress(\"Resolving DosBox\", buildTotal, buildTotal);\n\n                                response +=\n                                /* tslint:disable:no-eval */\n                                eval.call(window, response);\n                                /* tslint:enable:no-eval */\n                                resolve(this.global.exports.WDOSBOX);\n                            },\n                        });\n                    });\n                },\n            });\n        });\n    }\n\n}\n\nexport const Host = new DosHost();\n","// # DosModule\n// DosModule is [emscripten module object](https://kripken.github.io/emscripten-site/docs/api_reference/module.html),\n// with additional functionality\nimport { DosRuntime } from \"./js-dos\";\nimport { Build } from \"./js-dos-build\";\nimport { DosCommandInterface } from \"./js-dos-ci\";\nimport { jsdosconf } from \"./js-dos-conf\";\nimport { DosFS } from \"./js-dos-fs\";\nimport { DosOptions } from \"./js-dos-options\";\nimport { DosUi } from \"./js-dos-ui\";\n\nexport class DosModule extends DosOptions {\n    public isValid: boolean = false;\n    public canvas: HTMLCanvasElement = null;\n    public version = Build.version;\n    public onglobals?: (...args: any[]) => void;\n\n    private ci: Promise<DosCommandInterface> = null;\n    private instance: any;\n    private fs: DosFS = null;\n    private ui: DosUi = null;\n    private onready: (runtime: DosRuntime) => void;\n\n    private tickListeners: Array< () => void > = [];\n    private pauseListeners: Array< () => void > = [];\n    private resumeListeners: Array< () => void > = [];\n    private terminateListeners: Array< () => void > = [];\n\n    constructor(canvas: HTMLCanvasElement, onready: (runtime: DosRuntime) => void) {\n        super();\n        this.canvas = canvas;\n        this.onready = onready;\n\n        this.registerDefaultListeners();\n    }\n\n    private registerDefaultListeners() {\n        let hidden: string;\n        let visibilityChange: string;\n\n        if (typeof document.hidden !== \"undefined\") {\n            hidden = \"hidden\";\n            visibilityChange = \"visibilitychange\";\n        } else if (typeof (document as any).mozHidden !== \"undefined\") {\n            hidden = \"mozHidden\";\n            visibilityChange = \"mozvisibilitychange\";\n        } else if (typeof (document as any).msHidden !== \"undefined\") {\n            hidden = \"msHidden\";\n            visibilityChange = \"msvisibilitychange\";\n        } else if (typeof (document as any).webkitHidden !== \"undefined\") {\n            hidden = \"webkitHidden\";\n            visibilityChange = \"webkitvisibilitychange\";\n        }\n\n        document.addEventListener(visibilityChange, () => {\n            (document as any)[hidden] ? this.pause() : this.resume();\n        }, false);\n\n        window.addEventListener(\"beforeunload\", () => {\n           this.terminate();\n        });\n    }\n\n    // ### logging\n    // DosModule implements simply logging features:\n    // `debug`, `info`, `warn`, `error` methods\n    public debug(message: string) {\n        this.log(\"[DEBUG] \" + message);\n    }\n\n    public info(message: string) {\n        this.log(\"[INFO] \" + message);\n    }\n\n    public warn(message: string) {\n        this.log(\"[WARN] \" + message);\n    }\n\n    public error(message: string) {\n        this.log(\"[ERROR] \" + message);\n    }\n\n    // ### ondosbox\n    public ondosbox(dosbox: any, instantiateWasm: any) {\n        this.info(\"DosBox resolved\");\n        (this as any).instantiateWasm = instantiateWasm;\n        this.instance = new dosbox(this);\n    }\n    // Method `ondosbox` is called when\n    // [Host](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-host) is resolved.\n    // This method instaniate wasm dosbox module with `this` as emscripten\n    // module object. It means that emscripten will call\n    // `this.onRuntimeInitialized` when runtime will be ready\n\n    public resolve() {\n        if (!this.wdosboxUrl) {\n            this.wdosboxUrl = \"wdosbox.js\";\n        }\n\n        if (!this.log) {\n            /* tslint:disable:no-console */\n            this.log = (message: string) => console.log(message);\n        }\n\n        if (!this.canvas) {\n            this.onerror(\"canvas field is required, but not set!\");\n            return;\n        }\n\n        if (!this.onprogress) {\n            this.ui = new DosUi(this);\n            this.onprogress = (stage, total, loaded) => this.ui.onprogress(stage, total, loaded);\n        }\n\n        // ### sdl defaults\n        // DosModule overrides defaults for emscripten SDL wrapper\n        // for maximum performance\n        (this as any).SDL = {\n            defaults: {\n                widht: 320,\n                height: 200,\n                copyOnLock: false,\n                discardOnLock: true,\n                opaqueFrontBuffer: false,\n            },\n        };\n\n        this.isValid = true;\n    }\n\n    // ### onRuntimeInitialized\n    public onRuntimeInitialized() {\n        const mainFn = (args?: string[]) => {\n            // When emscripten runtime is initialized and main\n            // function is called:\n            //\n            // * DosModule detach [auto ui](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-ui)\n            if (this.ui !== null) {\n                this.ui.detach();\n                this.ui = null;\n            }\n\n            if (!args) {\n                args = [];\n            }\n\n            this.fs.chdir(\"/\");\n\n            // * Write default [dosbox.conf](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-conf)\n            // file to user directory\n            this.fs.createFile(\"/home/web_user/.dosbox/dosbox-jsdos.conf\", jsdosconf);\n            // * Mount emscripten FS as drive c:\n            args.unshift(\"-userconf\", \"-c\", \"mount c .\", \"-c\", \"c:\");\n            // * Run dosbox with passed arguments and resolve\n            // [DosCommandInterface](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-ci)\n            (this as any).callMain(args);\n            return new Promise<DosCommandInterface>((resolve) => {\n                new DosCommandInterface(this, (ci: DosCommandInterface) => {\n                    resolve(ci);\n                });\n            });\n        };\n        this.fs = new DosFS(this);\n        this.onready({\n            fs: this.fs,\n            main: mainFn,\n        });\n    }\n\n    // ### registerTickListener\n    // registred tick listener it will be called each frame\n    public registerTickListener(listener: () => void) {\n        this.tickListeners.push(listener);\n    }\n\n    // ### registerPauseListener\n    // registred tick listener it will be called each frame\n    public registerPauseListener(listener: () => void) {\n        this.pauseListeners.push(listener);\n    }\n\n    // ### registerResumeListener\n    // registred tick listener it will be called each frame\n    public registerResumeListener(listener: () => void) {\n        this.resumeListeners.push(listener);\n    }\n\n    // ### registerTerminateListener\n    // registred tick listener it will be called each frame\n    public registerTerminateListener(listener: () => void) {\n        this.terminateListeners.push(listener);\n    }\n\n    // ### tick\n    // tick is called internally each frame, no need to call\n    // it manually\n    public tick() {\n        for (const l of this.tickListeners) {\n            l();\n        }\n    }\n\n    // ### pause\n    // pause is called when dosbox tab became inactive\n    public pause() {\n        for (const l of this.pauseListeners) {\n            l();\n        }\n    }\n\n    // ### tick\n    // resume is called when dosbox tab became active\n    public resume() {\n        for (const l of this.resumeListeners) {\n            l();\n        }\n    }\n\n    // ### tick\n    // terminate is called when dosbox tab is closed\n    public terminate() {\n        for (const l of this.terminateListeners) {\n            l();\n        }\n    }\n\n}\n","// # DosOptions\n// Is a options object that you pass to constructor of\n// [Dos](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos)\n// class, to configure emulation layer\nimport { DosCommandInterface } from \"./js-dos-ci\";\nimport { DosFS } from \"./js-dos-fs\";\n\nexport class DosOptions {\n\n    // ### onprogress\n    public onprogress?: (stage: string, total: number, loaded: number) => void;\n    // progress event listener, it is fired when loading progress is changed\n    // if this function is not set, then\n    // [auto ui](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-ui) will be used\n    // to show progress\n    //\n    // * `stage` - current loading stage\n    // * `total` - total bytes to download on current stage\n    // * `loaded` - downloaded bytes\n\n    // ### onerror\n    public onerror?: (message: string) => void;\n    // this function is called when error happens\n    //\n    // * `message` - infomation about error\n\n    // ### log\n    public log?: (message: string) => void;\n    // you can provide log function, to override logging, by default js-dos uses console.log as implementation\n\n    // ### wdosboxUrl\n    public wdosboxUrl?: string;\n    // you can set alternative url for downloading js-dos script, default is 'wdosbox.js'\n\n}\n","// # JsDosUi\n// Optional ui module for js-dos.\n// This ui will be applied if client did not set `onprogress` in\n// [DosOptions](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-options)\nimport { DosModule } from \"./js-dos-module\";\n\nexport class DosUi {\n    private canvas: HTMLCanvasElement;\n    private dos: DosModule;\n\n    private overlay: HTMLDivElement;\n    private loaderMessage: HTMLDivElement;\n    private hidden: boolean;\n\n    constructor(dos: DosModule) {\n        this.dos = dos;\n        this.canvas = dos.canvas;\n\n        // ### How it works\n        // This ui replace canvas element with div .dosbox-container,\n        // that contains original canvas and .dosbox-overlay as children\n        // You can change style of ui by editing css for this two classes\n\n        try {\n            if (document.getElementById(\"js-dos-ui-css\") === null) {\n                const style = document.createElement(\"style\") as HTMLStyleElement;\n                style.id = \"js-dos-ui-css\";\n                style.innerHTML = this.css;\n                document.head.appendChild(style);\n            }\n\n            if (this.canvas.parentElement.className !== \"dosbox-container\") {\n                const container = document.createElement(\"div\") as HTMLDivElement;\n                container.className = \"dosbox-container\";\n\n                const parent = this.canvas.parentElement;\n                parent.replaceChild(container, this.canvas);\n                container.appendChild(this.canvas);\n\n                const overlay = document.createElement(\"div\") as HTMLDivElement;\n                overlay.className = \"dosbox-overlay\";\n                container.appendChild(overlay);\n\n                overlay.innerHTML = this.overlayHtml;\n            }\n\n            const container = this.canvas.parentElement;\n            this.overlay = this.childById(container, \"dosbox-overlay\");\n            this.loaderMessage = this.childById(this.overlay, \"dosbox-loader-message\");\n\n            this.hidden = true;\n            this.show();\n        } catch (e) {\n            this.onprogress = this.onprogressFallback;\n        }\n    }\n\n    public onprogress(stage: string, total: number, loaded: number) {\n        const message = stage + \" \" + Math.round(loaded * 100 / total * 10) / 10 + \"%\";\n        this.loaderMessage.innerHTML = message;\n        this.dos.info(message);\n\n        if (loaded >= total) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    }\n\n    public detach() {\n        this.hide();\n        this.onprogress = this.onprogressFallback;\n    }\n\n    public hide() {\n        if (this.hidden) {\n            return;\n        }\n        this.hidden = true;\n        this.overlay.setAttribute(\"style\", \"display: none\");\n    }\n\n    public show() {\n        if (!this.hidden) {\n            return;\n        }\n        this.hidden = false;\n        this.overlay.setAttribute(\"style\", \"display: block\");\n    }\n\n    private onprogressFallback(stage: string, total: number, loaded: number) {\n        this.dos.info(stage + \" \" + loaded * 100 / total + \"%\");\n    }\n\n    private childById(parent: Element, className: string) {\n        if (parent === null) {\n            return null;\n        }\n\n        for (let i = 0; i < parent.childElementCount; ++i) {\n            let child = parent.children[i];\n            if (child.className === className) {\n                return child as HTMLDivElement;\n            }\n\n            child = this.childById(child, className);\n            if (child !== null) {\n                return child as HTMLDivElement;\n            }\n        }\n\n        return null;\n    }\n\n    // ### Style\n    /* tslint:disable:member-ordering */\n    /* tslint:disable:max-line-length */\n    private css: string = `\n    .dosbox-container { position: relative; min-width: 320px; min-height: 200px; display: inline-block; }\n    .dosbox-overlay, .dosbox-loader { position: absolute; left: 0; right: 0; top: 0; bottom: 0; background-color: rgba(51, 51, 51, 0.7); }\n    .dosbox-start { text-align: center; position: absolute; left: 0; right: 0; bottom: 50%; color: #f80; font-size: 1.5em; text-decoration: underline; cursor: pointer; }\n    .dosbox-overlay a { color: #f80; }\n    .dosbox-powered { position: absolute; right: 1em; bottom: 1em; font-size: 0.8em; color: #9C9C9C; }\n    .dosbox-loader-message { text-align: center; position: absolute; left: 0; right: 0; bottom: 50%; margin: 0 0 -3em 0; box-sizing: border-box; color: #f80; font-size: 1.5em; }\n    @-moz-keyframes loading { 0% { left: 0; } 50% { left: 8.33333em; } 100% { left: 0; } } @-webkit-keyframes loading { 0% { left: 0; } 50% { left: 8.33333em; } 100% { left: 0; } } @keyframes loading { 0% { left: 0; } 50% { left: 8.33333em; } 100% { left: 0; } } .st-loader { width: 10em; height: 2.5em; position: absolute; top: 50%; left: 50%; margin: -1.25em 0 0 -5em; box-sizing: border-box; }\n    .st-loader:before, .st-loader:after { content: \"\"; display: block; position: absolute; top: 0; bottom: 0; width: 1.25em; box-sizing: border-box; border: 0.25em solid #f80; }\n    .st-loader:before { left: -0.76923em; border-right: 0; }\n    .st-loader:after { right: -0.76923em; border-left: 0; }\n    .st-loader .equal { display: block; position: absolute; top: 50%; margin-top: -0.5em; left: 4.16667em; height: 1em; width: 1.66667em; border: 0.25em solid #f80; box-sizing: border-box; border-width: 0.25em 0; -moz-animation: loading 1.5s infinite ease-in-out; -webkit-animation: loading 1.5s infinite ease-in-out; animation: loading 1.5s infinite ease-in-out; background: #f80; }\n    `;\n\n    // ### Template\n    /* tslint:disable:member-ordering */\n    /* tslint:disable:max-line-length */\n    private overlayHtml: string = `\n        <div class=\"dosbox-loader\">\n            <div class=\"st-loader\">\n                <span class=\"equal\"></span>\n            </div>\n            <div class=\"dosbox-loader-message\"></div>\n        </div>\n        <div class=\"dosbox-powered\">\n            Powered by &nbsp;<a href=\"https://js-dos.com\">js-dos.com</a> (6.22)\n        </div>\n    `;\n}\n","import { ICache } from \"./js-dos-cache\";\nimport CacheNoop from \"./js-dos-cache-noop\";\n\n// # Xhr\n// `Xhr` is small wrapper over XMLHttpRequest, that provides some\n// handy methods\n\n// You can configre Xhr with XhrOptions object:\ninterface XhrOptions {\n    cache: ICache;\n    method?: string;\n    success?: (response: any) => void;\n    progress?: (total: number, loaded: number) => void;\n    fail?: (url: string, status: number, message: string) => void;\n    data?: string;\n    responseType?: XMLHttpRequestResponseType;\n}\n// * `method` - \"GET\" | \"POST\"\n// * `success` - callback when resource is downloaded\n// * `progress` - callback for progress\n// * `fail` - fail callback\n// * `data` - data for POST request, should typeof `application/x-www-form-urlencoded`\n// * `responseType` - XMLHttpRequestResponseType\n\n// Class Xhr does not have any public methods\nexport class Xhr {\n    private cache: ICache;\n    private resource: string;\n    private options: XhrOptions;\n    private xhr: XMLHttpRequest;\n    private total: number = 0;\n    private loaded: number = 0;\n\n    constructor(url: string, options: XhrOptions) {\n        this.resource = url;\n        this.options = options;\n        this.options.method = options.method || \"GET\";\n        this.cache = options.cache || new CacheNoop();\n\n        if (this.options.method  === \"GET\") {\n            this.cache.get(this.resource, (data) => {\n                this.options.success(data);\n            }, () => {\n                this.makeHttpRequest();\n            });\n        }\n    }\n\n    private makeHttpRequest() {\n        this.xhr = new XMLHttpRequest();\n        this.xhr.open(this.options.method, this.resource, true);\n        if (this.options.method === \"POST\") {\n            this.xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n        }\n        this.xhr.overrideMimeType(\"text/plain; charset=x-user-defined\");\n\n        let progressListner;\n        if (typeof (progressListner = this.xhr).addEventListener === \"function\") {\n            progressListner.addEventListener(\"progress\", (evt) => {\n                this.total = evt.total;\n                this.loaded = evt.loaded;\n                if (this.options.progress) {\n                    return this.options.progress(evt.total, evt.loaded);\n                }\n            });\n        }\n\n        let errorListener;\n        if (typeof (errorListener = this.xhr).addEventListener === \"function\") {\n            errorListener.addEventListener(\"error\", (evt) => {\n                if (this.options.fail) {\n                    this.options.fail(this.resource, this.xhr.status, \"connection problem\");\n                    return delete this.options.fail;\n                }\n            });\n        }\n        this.xhr.onreadystatechange = () => {\n            return this.onReadyStateChange();\n        };\n        if (this.options.responseType) {\n            this.xhr.responseType = this.options.responseType;\n        }\n        this.xhr.send(this.options.data);\n    }\n\n    private onReadyStateChange() {\n        if (this.xhr.readyState === 4) {\n            if (this.xhr.status === 200) {\n                if (this.options.success) {\n                    const total = Math.max(this.total, this.loaded);\n                    this.options.progress(total, total);\n\n                    if (this.options.method === \"GET\" && this.resource.indexOf(\"?\") < 0) {\n                        this.cache.put(this.resource, this.xhr.response, () => { /**/ });\n                    }\n\n                    return this.options.success(this.xhr.response);\n                }\n            } else if (this.options.fail) {\n                this.options.fail(this.resource, this.xhr.status, \"connection problem\");\n                return delete this.options.fail;\n            }\n        }\n    }\n\n}\n","\n// # Example\n// ```javascript\n// Dos(canvas).ready((fs, main) => {\n//     fs.extract(\"digger.zip\").then(() => {\n//         main([\"-c\", \"DIGGER.COM\"])\n//     });\n// });\n// ```\n// Dos function is entry point that provides emulation layer.\n// As emulation layer js-dos uses [DosBox ported to emscripten](https://github.com/dreamlayers/em-dosbox/#compiling).\n\n// # Dos\n\nimport openCache from \"./js-dos-cache\";\nimport CacheDb from \"./js-dos-cache-db\";\nimport CacheNoop from \"./js-dos-cache-noop\";\nimport { DosCommandInterface } from \"./js-dos-ci\";\nimport { DosFS } from \"./js-dos-fs\";\nimport { Host } from \"./js-dos-host\";\nimport { DosModule } from \"./js-dos-module\";\nimport { DosOptions } from \"./js-dos-options\";\n\n// When you call `Dos(canvas, options)` js-dos behind the scene will download\n// dosbox and prepare it to start. This function will return `Promise<DosReadyPromise>`\n// that will be resolved when dosbox is ready. In case of error promise\n// will be rejected.\n//\n// * `canvas`: HTMLCanvasElement - this canvas element is used as window for dosbox\n// * `options`: [DosOptions](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-options) -\n// optional configuration object\nexport function Dos(canvas: HTMLCanvasElement, options?: DosOptions) {\n    const promise = new Promise<DosRuntime>((resolve, reject) => {\n        const module = new DosModule(canvas, resolve);\n\n        if (!options) {\n            options = {};\n        }\n\n        if (!options.onerror) {\n            options.onerror = (message: string) => {\n                /* tslint:disable:no-console */\n                console.error(message);\n                /* tslint:enable:no-console */\n            };\n        }\n\n        Object.assign(module, options);\n\n        // ### Error handling\n        // Error handling should support both ways:\n        //\n        // * Through rejecting of promise\n        // * Fire onerror function of DosOptions object\n\n        const onerror = module.onerror;\n        module.onerror = (message: string) => {\n            reject(message);\n\n            const fn = () => {\n                if (onerror) {\n                    onerror(message);\n                    module.onerror = onerror;\n                } else {\n                    module.onerror = module.error;\n                }\n            };\n\n            setTimeout(fn, 1);\n        };\n\n        module.resolve();\n        if (!module.isValid) {\n            return;\n        }\n\n        openCache(module, (cache) => {\n            // See [Host](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-host)\n            // to understand resolving of emulation layer (dosbox).\n            Host.resolveDosBox(module.wdosboxUrl, cache, module);\n        });\n\n    });\n\n// ### DosReadyPromise\n// Is a Promise object with additional method ready.\n// Method `ready` is just a wrapper over `then` method that\n// split resolved object into meaningful parts.\n\n    const dosReadyPromise = (promise as unknown) as DosReadyPromise;\n    dosReadyPromise.ready = (onready) => {\n        dosReadyPromise.then((runtime: DosRuntime) => {\n            onready(runtime.fs, runtime.main);\n        });\n        return dosReadyPromise;\n    };\n    return dosReadyPromise;\n}\n\nexport type DosMainFn = (args?: string[]) => Promise<DosCommandInterface>;\n\n// Plain promise will be resolved with `DosRuntime` interface, that\n// includes:\n//\n// * `fs`: [DosFS](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-fs) -\n// API for working with dosbox filesystem\n// * `main`: DosMainFn - a function that you should call to actuall start\n// dosbox. It's like a main function in C++, or shell command line. This function\n// will return Promise of [DosCommandInterface](https://js-dos.com/6.22/docs/api/generate.html?page=js-dos-ci).\n// You can use it to control runned dosbox.\nexport interface DosRuntime {\n    fs: DosFS;\n    main: DosMainFn;\n}\n\nexport interface DosReadyPromise extends Promise<DosRuntime> {\n    // `onready` - callback that receive DosRuntime splitted by fields\n    ready: (onready: (fs: DosFS, main: DosMainFn) => void) => Promise<DosRuntime>;\n}\n\n(window as any).Dos = Dos;\n","'use strict';\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import * as assert from \"assert\";\nimport { DosCommandInterface } from \"../js-dos-ts/js-dos-ci\";\nimport { doThen } from \"./do\";\n\n// Compare\n// =======\n// Compare image from url, and screenshot from DosBox\n\nexport function compareAndExit(imageUrl: string, ci: DosCommandInterface, done: () => void) {\n    compare(imageUrl, ci, (wrong) => {\n        assert.equal(0, wrong);\n        ci.exit();\n        done();\n    });\n}\n\nconst compare = (imageUrl: string, ci: DosCommandInterface, callback: (wrong: number) => void) => {\n    doThen(ci.screenshot(), (actualUrl: string) => {\n        const img = new Image();\n        img.onload = () => {\n            assert(img.width === ci.width(), \"Invalid width: \" + ci.width() + \", should be \" + img.width);\n            assert(img.height === ci.height(), \"Invalid height: \" + ci.height() + \", should be \" + img.height);\n\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = img.width;\n            canvas.height = img.height;\n            const ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0);\n            const expected = ctx.getImageData(0, 0, img.width, img.height).data;\n\n            const actualImage = new Image();\n            actualImage.onload = () => {\n                /*\n                document.body.appendChild(img); // for comparisons\n                var div = document.createElement('div');\n                div.innerHTML = '^=expected, v=actual';\n                document.body.appendChild(div);\n                document.body.appendChild(actualImage); // to grab it for creating the test reference\n                */\n\n                const actualCanvas = document.createElement(\"canvas\");\n                actualCanvas.width = actualImage.width;\n                actualCanvas.height = actualImage.height;\n                const actualCtx = actualCanvas.getContext(\"2d\");\n                actualCtx.drawImage(actualImage, 0, 0);\n                const actual = actualCtx.getImageData(0, 0, actualImage.width, actualImage.height).data;\n\n                let total = 0;\n                const width = img.width;\n                const height = img.height;\n                for (let x = 0; x < width; x++) {\n                    for (let y = 0; y < height; y++) {\n                        total += Math.abs(expected[y * width * 4 + x * 4 + 0] - actual[y * width * 4 + x * 4 + 0]);\n                        total += Math.abs(expected[y * width * 4 + x * 4 + 1] - actual[y * width * 4 + x * 4 + 1]);\n                        total += Math.abs(expected[y * width * 4 + x * 4 + 2] - actual[y * width * 4 + x * 4 + 2]);\n                    }\n                }\n\n                // floor, to allow some margin of error for antialiasing\n                const wrong = Math.floor(total / (img.width * img.height * 3));\n                callback(wrong);\n            };\n            actualImage.src = actualUrl;\n        };\n        img.src = imageUrl;\n    });\n};\n","import assert = require(\"assert\");\nimport { DosMainFn, DosReadyPromise } from \"../js-dos-ts/js-dos\";\nimport { DosFS } from \"../js-dos-ts/js-dos-fs\";\n\n// Do\n// ==\n// We use this functions to avoid problem of throwing,\n// exceptions inside promise.\n// Mocha can't handle exceptions if they are throwed in promise\n\nexport function doThen<T>(promise: Promise<T>, fn: (v: T) => void) {\n    promise.then((v: T) => {\n        const topFn = () => {\n            fn(v);\n        };\n\n        setTimeout(topFn, 1);\n    });\n}\n\nexport function doCatch<T>(promise: Promise<T>, fn: (v: string) => void) {\n    promise.catch((v: string) => {\n        const topFn = () => {\n            fn(v);\n        };\n\n        setTimeout(topFn, 1);\n    });\n}\n\nexport function doNext<T>(promise: Promise<T>, fn: (v: T) => void) {\n    doThen(promise, fn);\n    doCatch(promise, (msg: string) => assert.fail(msg));\n}\n\nexport function doReady(promise: DosReadyPromise, fn: (fs: DosFS, main: DosMainFn) => void) {\n    doThen(promise, (runtime) => {\n        fn(runtime.fs, runtime.main);\n    });\n    doCatch(promise, (msg: string) => assert.fail(msg));\n}\n","/* tslint:disable:max-line-length */\n/* tslint:disable:no-console */\n\nimport * as assert from \"assert\";\nimport { Dos } from \"../js-dos-ts/js-dos\";\nimport { ICache } from \"../js-dos-ts/js-dos-cache\";\nimport CacheDb from \"../js-dos-ts/js-dos-cache-db\";\nimport CacheNoop from \"../js-dos-ts/js-dos-cache-noop\";\nimport { DosCommandInterface } from \"../js-dos-ts/js-dos-ci\";\nimport { Host } from \"../js-dos-ts/js-dos-host\";\nimport { DosModule } from \"../js-dos-ts/js-dos-module\";\nimport { DosOptions } from \"../js-dos-ts/js-dos-options\";\nimport { compareAndExit } from \"./compare\";\nimport { doCatch, doNext, doReady, doThen } from \"./do\";\n\nsuite(\"js-dos-host\");\n\ntest(\"loader should notify about error if wasm is not supported\", (done) => {\n    const oldValue = Host.wasmSupported;\n    Host.wasmSupported = false;\n    Host.resolveDosBox(\"wrongurl.js\", new CacheNoop(), {\n        onerror: (message: string) => {\n            Host.wasmSupported = oldValue;\n            assert.equal(\"WebAssembly is not supported, can't resolve wdosbox\", message);\n            done();\n        },\n    } as DosModule);\n});\n\ntest(\"loader should notify about error, if it can't download wdosbox\", (done) => {\n    Host.resolveDosBox(\"wrongurl.js\", new CacheNoop(), {\n        onerror: (message: string) => {\n            assert.equal(\"Can't download wasm, code: 404, message: connection problem, url: wrongurl.wasm.js\", message);\n            done();\n        },\n    } as DosModule);\n});\n\ntest(\"loader should show progress loading and use cache\", (done) => {\n    let isGET = false;\n    let isPUT = false;\n    class TestCache implements ICache {\n        public put(key: string, data: any, onflush: () => void) {\n            isPUT = isPUT || (key === \"/wdosbox.wasm.js\" && data instanceof ArrayBuffer && (data as ArrayBuffer).byteLength > 0);\n            onflush();\n        }\n\n        public get(key: string, ondata: (data: any) => void, onerror: (msg: string) => void) {\n            isGET = isGET || key === \"/wdosbox.wasm.js\";\n            onerror(\"not in cache\");\n        }\n\n        public forEach(each: (key: string, value: any) => void, onend: () => void) {\n            onend();\n        }\n    }\n\n    let lastLoaded = -1;\n    Host.resolveDosBox(\"/wdosbox.js\", new TestCache(), {\n        onprogress: (stage: string, total: number, loaded: number) => {\n            console.log(stage, total, loaded);\n            assert.equal(true, loaded <= total, loaded + \"<=\" + total);\n            assert.equal(true, lastLoaded <= loaded, lastLoaded + \"<=\" + loaded);\n            lastLoaded = loaded;\n        },\n        ondosbox: (dosbox: any, instantiateWasm: any) => {\n            assert.ok(isGET);\n            assert.ok(isPUT);\n            done();\n        },\n        onerror: (message: string) => {\n            assert.fail();\n        },\n    } as DosModule);\n});\n\ntest(\"loader should never load twice wdosbox\", (done) => {\n    Host.resolveDosBox(\"/wdosbox.js\", new CacheNoop(), {\n        onprogress: (stage: string, total: number, loaded: number) => {\n            assert.fail();\n        },\n        ondosbox: (dosbox: any, instantiateWasm: any) => {\n            done();\n        },\n        onerror: (message: string) => {\n            assert.fail();\n        },\n    } as DosModule);\n});\n\ntest(\"loader should fire event when wdosbox is loaded\", (done) => {\n    Host.resolveDosBox(\"/wdosbox.js\", new CacheNoop(), {\n        ondosbox: (dosbox: any, instantiateWasm: any) => {\n            assert.ok(dosbox);\n            assert.ok(instantiateWasm);\n            done();\n        },\n        onerror: (message: string) => {\n            assert.fail();\n        },\n    } as DosModule);\n});\n\nsuite(\"js-dos\");\n\ntest(\"js-dos can't start without canvas (listener style)\", (done) => {\n    Dos(null, {\n        wdosboxUrl: \"/wdosbox.js\",\n        onerror: (message: string) => {\n            assert.equal(\"canvas field is required, but not set!\", message);\n            done();\n        },\n    } as DosOptions);\n});\n\ntest(\"js-dos can't start without canvas (promise style)\", (done) => {\n    const dos = Dos(null, {\n        wdosboxUrl: \"/wdosbox.js\",\n    } as DosOptions);\n    doCatch(dos, (message) => {\n        assert.equal(\"canvas field is required, but not set!\", message);\n        done();\n    });\n    doThen(dos, () => {\n        assert.fail();\n    });\n});\n\ntest(\"js-dos can't start without canvas (ready style)\", (done) => {\n    const dos = Dos(null, {\n        wdosboxUrl: \"/wdosbox.js\",\n    } as DosOptions);\n    const promise = dos.ready((fs, main) => {\n        const fn = () => assert.fail();\n        setTimeout(fn, 1);\n    });\n    doCatch(promise, (message) => {\n        assert.equal(\"canvas field is required, but not set!\", message);\n        done();\n    });\n});\n\ntest(\"js-dos should start with canvas\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl: \"/wdosbox.js\",\n    });\n    doReady(dos, (fs, main) => {\n        doNext(main([]), (ci) => {\n            ci.exit();\n            done();\n        });\n    });\n});\n\ntest(\"js-dos can take screenshot of canvas\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl: \"/wdosbox.js\",\n    });\n    doReady(dos, (fs, main) => {\n        doNext(main([]), (ci) => {\n            compareAndExit(\"init.png\", ci, done);\n        });\n    });\n});\n\nsuite(\"js-dos-fs\");\n\ntest(\"js-dos-fs createFile error handling\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl: \"/wdosbox.js\",\n        onerror: (message) => {\n            assert.equal(message, \"Can't create file '', because file name is empty\");\n            done();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"\", \"\");\n    });\n});\n\ntest(\"js-dos-fs createFile error handling 2\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl: \"/wdosbox.js\",\n        onerror: (message) => {\n            assert.equal(message, \"Can't create file '/home/', because file name is empty\");\n            done();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"/home/\", \"\");\n    });\n});\n\ntest(\"js-dos-fs can create file\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl: \"/wdosbox.js\",\n        onerror: (message) => {\n            assert.fail();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"/wiki/musk\", wikiElonMusk);\n        doNext(main(), (ci) => {\n            doNext(ci.shell(\"type wiki\\\\musk\"), () => {\n                compareAndExit(\"elonmusk.png\", ci, done);\n            });\n        });\n    });\n});\n\ntest(\"js-dos-fs can create file (windows path)\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl: \"/wdosbox.js\",\n        onerror: (message) => {\n            assert.fail();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"C:\\\\wiki\\\\musk\", wikiElonMusk);\n        doNext(main(), (ci) => {\n            doNext(ci.shell(\"type wiki\\\\musk\"), () => {\n                compareAndExit(\"elonmusk.png\", ci, done);\n            });\n        });\n    });\n});\n\ntest(\"js-dos-fs clearing IDBFS db\", (done) => {\n    const request = indexedDB.deleteDatabase(\"/test\");\n\n    request.onerror = (event) => {\n        console.error(event);\n        assert.fail();\n    };\n\n    request.onsuccess = (event) => {\n        done();\n    };\n});\n\ntest(\"js-dos-fs can mount archive on persistent point [empty db]\", (done) => {\n    let isOnProgress = false;\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl: \"/wdosbox.js\",\n        onerror: (message) => {\n            assert.fail();\n        },\n        onprogress: (stage: string, total: number, loaded: number) => {\n            isOnProgress = true;\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        doNext(fs.extract(\"digger.zip\", \"/test\"), () => {\n            doNext(main(), (ci) => {\n                doNext(ci.shell(\"dir test\"), () => {\n                    assert.ok(isOnProgress);\n                    compareAndExit(\"pesistent-mount.png\", ci, done);\n                });\n            });\n        });\n    });\n});\n\ntest(\"js-dos-fs can mount archive on persistent point [existent db]\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl: \"/wdosbox.js\",\n        onerror: (message) => {\n            assert.fail();\n        },\n        onprogress: (stage: string, total: number, loaded: number) => {\n            assert.fail();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        doNext(fs.extract(\"digger.zip\", \"/test\"), () => {\n            doNext(main(), (ci) => {\n                doNext(ci.shell(\"dir test\"), () => {\n                    compareAndExit(\"pesistent-mount.png\", ci, done);\n                });\n            });\n        });\n    });\n});\n\nsuite(\"js-dos\");\n\ntest(\"js-dos should provide user level dosbox.conf\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl: \"/wdosbox.js\",\n        onerror: (message) => {\n            assert.fail();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"dosbox.conf\", `\n        [autoexec]\n        mount c .\n        c:\n        cd HOME\n        cd WEB_USER\n        cd DOSBOX~1\n        type dosbox~1.con\n        `);\n\n        doNext(main([\"-conf\", \"dosbox.conf\"]), (ci) => {\n            compareAndExit(\"jsdos-conf.png\", ci, done);\n        });\n    });\n});\n\ntest(\"js-dos can create and read dosbox.conf\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl: \"/wdosbox.js\",\n        onerror: (message) => {\n            assert.fail();\n        },\n    });\n\n    doReady(dos, (fs, main) => {\n        fs.createFile(\"dosbox.conf\", `\n            [autoexec]\n            mount c .\n            c:\n            type dosbox~1.con\n        `);\n        doNext(main([\"-conf\", \"dosbox.conf\"]), (ci) => {\n            compareAndExit(\"dosboxconf.png\", ci, done);\n        });\n    });\n});\n\ntest(\"js-dos can run digger.zip\", (done) => {\n    const dos = Dos(document.getElementById(\"canvas\") as HTMLCanvasElement, {\n        wdosboxUrl: \"/wdosbox.js\",\n    });\n\n    doReady(dos, (fs, main) => {\n        doNext(fs.extract(\"digger.zip\"), () => {\n            doNext(main([\"DIGGER.COM\"]), (ci) => {\n                const fn = () => {\n                    compareAndExit(\"digger.png\", ci, done);\n                    // saveImage(ci);\n                };\n\n                setTimeout(fn, 5000);\n            });\n        });\n    });\n});\n\nconst saveImage = (ci: DosCommandInterface) => {\n    ci.screenshot().then((data) => {\n        const w = window.open(\"about:blank\", \"image from canvas\");\n        w.document.write(\"<img src='\" + data + \"' alt='from canvas'/>\");\n    });\n};\n\nconst wikiElonMusk = `\nElon Reeve Musk FRS (/ˈiːlɒn/; born June 28, 1971) is a\ntechnology entrepreneur and engineer.[10][11][12]\nHe holds South African, Canadian, and U.S. citizenship\nand is the founder, CEO, and lead designer of SpaceX;\n[13] co-founder, CEO, and product architect of Tesla, Inc.;\n[14] co-founder and CEO of Neuralink; and co-founder of PayPal.\nIn December 2016, he was ranked 21st on the Forbes list of\nThe World's Most Powerful People.[15] As of October 2018,\nhe has a net worth of $22.8 billion and is listed by Forbes\nas the 54th-richest person in the world.[16]\nBorn and raised in Pretoria, South Africa, Musk moved to\nCanada when he was 17 to attend Queen's University.\nHe transferred to the University of Pennsylvania two years\nlater, where he received an economics degree from\nthe Wharton School and a degree in physics from the College\nof Arts and Sciences. He began a Ph.D.\nin applied physics and material sciences at Stanford University\nin 1995 but dropped out after two days to pursue\nan entrepreneurial career. He subsequently co-founded Zip2, a\nweb software company, which was acquired by Compaq\nfor $340 million in 1999. Musk then founded X.com, an online bank.\nIt merged with Confinity in 2000 and later that\nyear became PayPal, which was bought by eBay for $1.5 billion\nin October 2002.[17][18][19][20]\n`;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy1kb3MtdHMvanMtZG9zLWJ1aWxkLnRzIiwianMtZG9zLXRzL2pzLWRvcy1jYWNoZS1kYi50cyIsImpzLWRvcy10cy9qcy1kb3MtY2FjaGUtbm9vcC50cyIsImpzLWRvcy10cy9qcy1kb3MtY2FjaGUudHMiLCJqcy1kb3MtdHMvanMtZG9zLWNpLnRzIiwianMtZG9zLXRzL2pzLWRvcy1jb25mLnRzIiwianMtZG9zLXRzL2pzLWRvcy1mcy50cyIsImpzLWRvcy10cy9qcy1kb3MtaG9zdC50cyIsImpzLWRvcy10cy9qcy1kb3MtbW9kdWxlLnRzIiwianMtZG9zLXRzL2pzLWRvcy1vcHRpb25zLnRzIiwianMtZG9zLXRzL2pzLWRvcy11aS50cyIsImpzLWRvcy10cy9qcy1kb3MteGhyLnRzIiwianMtZG9zLXRzL2pzLWRvcy50cyIsIm5vZGVfbW9kdWxlcy9hc3NlcnQvYXNzZXJ0LmpzIiwibm9kZV9tb2R1bGVzL2Fzc2VydC9ub2RlX21vZHVsZXMvaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9hc3NlcnQvbm9kZV9tb2R1bGVzL3V0aWwvc3VwcG9ydC9pc0J1ZmZlckJyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvYXNzZXJ0L25vZGVfbW9kdWxlcy91dGlsL3V0aWwuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwidGVzdC9jb21wYXJlLnRzIiwidGVzdC9kby50cyIsInRlc3QvdGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQTtBQUNBO0FBQ0E7OztBQUVhLFFBQUEsS0FBQSxHQUFRO0FBQ2pCLGFBQVMsNENBRFE7QUFFakIsZUFBVywwQ0FGTTtBQUdqQixZQUFTLE1BSFE7QUFJakIsaUJBQWEsa0NBSkk7QUFLakIsY0FBVTtBQUxPLENBQVI7Ozs7Ozs7Ozs7O0lDRlEsTztBQU9qQixxQkFBWSxPQUFa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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFQLEVBQWlDLFlBQUs7QUFDbEMsaUJBQUEsTUFBQSxDQUFPLEtBQUssQ0FBQyxZQUFELENBQUwsQ0FBUCxFQUE2QixVQUFDLEVBQUQsRUFBTztBQUNoQyxvQkFBTSxLQUFLLFNBQUwsRUFBSyxHQUFLO0FBQ1osOEJBQUEsY0FBQSxDQUFlLFlBQWYsRUFBNkIsRUFBN0IsRUFBaUMsSUFBakM7QUFDQTtBQUNILGlCQUhEO0FBS0EsMkJBQVcsRUFBWCxFQUFlLElBQWY7QUFDSCxhQVBEO0FBUUgsU0FURDtBQVVILEtBWEQ7QUFZSCxDQWpCRDtBQW1CQSxJQUFNLFlBQVksU0FBWixTQUFZLENBQUMsRUFBRCxFQUE0QjtBQUMxQyxPQUFHLFVBQUgsR0FBZ0IsSUFBaEIsQ0FBcUIsVUFBQyxJQUFELEVBQVM7QUFDMUIsWUFBTSxJQUFJLE9BQU8sSUFBUCxDQUFZLGFBQVosRUFBMkIsbUJBQTNCLENBQVY7QUFDQSxVQUFFLFFBQUYsQ0FBVyxLQUFYLENBQWlCLGVBQWUsSUFBZixHQUFzQix1QkFBdkM7QUFDSCxLQUhEO0FBSUgsQ0FMRDtBQU9BLElBQU0sNDFDQUFOIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLy8gQXV0b2dlbmVyYXRlZFxuLy8gLS0tLS0tLS0tLS0tLVxuLy8gZ3VscGZpbGUuanMgLS0+IGdlbmVyYXRlQnVpbGRJbmZvXG5cbmV4cG9ydCBjb25zdCBCdWlsZCA9IHtcbiAgICB2ZXJzaW9uOiBcIjYuMjIuMjAgKGE2MTk1NmM2ODViMDE3MjBiODVjNmExZjFjY2UwY2QxKVwiLFxuICAgIGpzVmVyc2lvbjogXCIyNTRhZTVjZWFhODBlYjlmOGNjZWNiNTQyMTMwYTYzYWFkNzE5ZTg4XCIsXG4gICAganNTaXplOiAgNDY4NDU1LFxuICAgIHdhc21WZXJzaW9uOiBcImQ5ZjQyOTg5MWY0YjUwMjZkMWRhY2I4NzNmOGY3YTJhXCIsXG4gICAgd2FzbVNpemU6IDIxNDAzNTgsXG59O1xuIiwiaW1wb3J0IHsgSUNhY2hlIH0gZnJvbSBcIi4vanMtZG9zLWNhY2hlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhY2hlRGIgaW1wbGVtZW50cyBJQ2FjaGUge1xuXG4gICAgcHVibGljIHZlcnNpb246IHN0cmluZztcbiAgICBwcml2YXRlIHN0b3JlTmFtZTogc3RyaW5nID0gXCJmaWxlc1wiO1xuICAgIHByaXZhdGUgaW5kZXhlZERCOiBJREJGYWN0b3J5O1xuICAgIHByaXZhdGUgZGI6IElEQkRhdGFiYXNlO1xuXG4gICAgY29uc3RydWN0b3IodmVyc2lvbjogc3RyaW5nLCBvbnJlYWR5OiAoY2FjaGU6IElDYWNoZSkgPT4gdm9pZCwgb25lcnJvcjogKG1zZzogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgIHRoaXMuaW5kZXhlZERCID0gd2luZG93LmluZGV4ZWREQiB8fCAod2luZG93IGFzIGFueSkubW96SW5kZXhlZERCXG4gICAgICAgICAgICB8fCAod2luZG93IGFzIGFueSkud2Via2l0SW5kZXhlZERCIHx8ICh3aW5kb3cgYXMgYW55KS5tc0luZGV4ZWREQjtcblxuICAgICAgICBpZiAoIXRoaXMuaW5kZXhlZERCKSB7XG4gICAgICAgICAgICBvbmVycm9yKFwiSW5kZXhlZCBkYiBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgaG9zdFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG9wZW5SZXF1ZXN0ID0gdGhpcy5pbmRleGVkREIub3BlbihcImpzLWRvcy1jYWNoZSAoXCIgKyB2ZXJzaW9uICsgXCIpXCIsIDEpO1xuICAgICAgICBvcGVuUmVxdWVzdC5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBvbmVycm9yKFwiQ2FuJ3Qgb3BlbiBjYWNoZSBkYXRhYmFzZVwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgb3BlblJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRiID0gb3BlblJlcXVlc3QucmVzdWx0O1xuICAgICAgICAgICAgb25yZWFkeSh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgb3BlblJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGIgPSBvcGVuUmVxdWVzdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5kYi5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG9uZXJyb3IoXCJDYW4ndCB1cGdyYWRlIGNhY2hlIGRhdGFiYXNlXCIpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRiLmNyZWF0ZU9iamVjdFN0b3JlKHRoaXMuc3RvcmVOYW1lKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBvbmVycm9yKFwiQ2FuJ3QgdXBncmFkZSBjYWNoZSBkYXRhYmFzZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcHV0KGtleTogc3RyaW5nLCBkYXRhOiBhbnksIG9uZmx1c2g6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHRoaXMuc3RvcmVOYW1lLCBcInJlYWR3cml0ZVwiKTtcbiAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9ICgpID0+IG9uZmx1c2goKTtcbiAgICAgICAgdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5zdG9yZU5hbWUpLnB1dChkYXRhLCBrZXkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQoa2V5OiBzdHJpbmcsIG9uZGF0YTogKGRhdGE6IGFueSkgPT4gdm9pZCwgb25lcnJvcjogKG1zZzogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbih0aGlzLnN0b3JlTmFtZSwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMuc3RvcmVOYW1lKS5nZXQoa2V5KTtcbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4gb25lcnJvcihcIkNhbid0IHJlYWQgdmFsdWUgZm9yIGtleSAnXCIgKyBrZXkgKyBcIidcIik7XG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3QucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgb25kYXRhKHJlcXVlc3QucmVzdWx0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb25lcnJvcihcIlJlc3VsdCBpcyBlbXB0eSBmb3Iga2V5ICdcIiArIGtleSArIFwiJywgcmVzdWx0OiBcIiArIHJlcXVlc3QucmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZm9yRWFjaChlYWNoOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHZvaWQsIG9uZW5kOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbih0aGlzLnN0b3JlTmFtZSwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMuc3RvcmVOYW1lKS5vcGVuQ3Vyc29yKCk7XG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IG9uZXJyb3IoXCJDYW4ndCBvcGVuIGN1cnNvciBvbiBcIiArIHRoaXMuc3RvcmVOYW1lKTtcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvciA9IChldmVudC50YXJnZXQgYXMgYW55KS5yZXN1bHQgYXMgSURCQ3Vyc29yV2l0aFZhbHVlO1xuICAgICAgICAgICAgaWYgKGN1cnNvcikge1xuICAgICAgICAgICAgICAgIGVhY2goY3Vyc29yLmtleS50b1N0cmluZygpLCBjdXJzb3IudmFsdWUpO1xuICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvbmVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IElDYWNoZSB9IGZyb20gXCIuL2pzLWRvcy1jYWNoZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYWNoZU5vb3AgaW1wbGVtZW50cyBJQ2FjaGUge1xuICAgIHB1YmxpYyBwdXQoa2V5OiBzdHJpbmcsIGRhdGE6IGFueSwgb25mbHVzaDogKCkgPT4gdm9pZCkge1xuICAgICAgICAvLyBub3RoaW5nXG4gICAgfVxuXG4gICAgcHVibGljIGdldChrZXk6IHN0cmluZywgb25kYXRhOiAoZGF0YTogYW55KSA9PiB2b2lkLCBvbmVycm9yOiAobXNnOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICAgICAgb25lcnJvcihcIkNhY2hlIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBob3N0XCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBmb3JFYWNoKGVhY2g6IChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4gdm9pZCwgb25lbmQ6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgb25lbmQoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgQ2FjaGVEYiBmcm9tIFwiLi9qcy1kb3MtY2FjaGUtZGJcIjtcbmltcG9ydCBDYWNoZU5vb3AgZnJvbSBcIi4vanMtZG9zLWNhY2hlLW5vb3BcIjtcbmltcG9ydCB7IERvc01vZHVsZSB9IGZyb20gXCIuL2pzLWRvcy1tb2R1bGVcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJQ2FjaGUge1xuICAgIHB1dDogKGtleTogc3RyaW5nLCBkYXRhOiBhbnksIG9uZmx1c2g6ICgpID0+IHZvaWQpID0+IHZvaWQ7XG4gICAgZ2V0OiAoa2V5OiBzdHJpbmcsIG9uZGF0YTogKGRhdGE6IGFueSkgPT4gdm9pZCwgb25lcnJvcjogKG1zZzogc3RyaW5nKSA9PiB2b2lkKSA9PiB2b2lkO1xuICAgIGZvckVhY2g6IChlYWNoOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHZvaWQsIG9uZW5kOiAoKSA9PiB2b2lkKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBvcGVuQ2FjaGUobW9kdWxlOiBEb3NNb2R1bGUsIG9ucmVhZHk6IChjYWNoZTogSUNhY2hlKSA9PiB2b2lkKSB7XG4gICAgbmV3IENhY2hlRGIobW9kdWxlLnZlcnNpb24sIG9ucmVhZHksIChtc2c6IHN0cmluZykgPT4ge1xuICAgICAgICBtb2R1bGUubG9nKFwiRVJSISBDYW4ndCBpbml0YWxpemUgY2FjaGUsIGNhdXNlOiBcIiArIG1zZyk7XG4gICAgICAgIG9ucmVhZHkobmV3IENhY2hlTm9vcCgpKTtcbiAgICB9KTtcbn1cbiIsIi8vICMgRG9zQ29tbWFuZEludGVyZmFjZVxuLy8gSXMgYWJzdHJhY3Rpb24gdGhhdCBhbGxvd3MgeW91IHRvIGNvbnRyb2wgcnVubmVkIGluc3RhbmNlIG9mIGpzLWRvc1xuaW1wb3J0IHsgRG9zIH0gZnJvbSBcIi4vanMtZG9zXCI7XG5pbXBvcnQgeyBEb3NNb2R1bGUgfSBmcm9tIFwiLi9qcy1kb3MtbW9kdWxlXCI7XG5pbXBvcnQgeyBYaHIgfSBmcm9tIFwiLi9qcy1kb3MteGhyXCI7XG5cbmV4cG9ydCBjbGFzcyBEb3NDb21tYW5kSW50ZXJmYWNlIHtcbiAgICBwdWJsaWMgZG9zOiBEb3NNb2R1bGU7XG4gICAgcHJpdmF0ZSBlbTogdHlwZW9mIE1vZHVsZTtcbiAgICBwcml2YXRlIGFwaTogTG93TGV2ZWxBcGk7XG4gICAgcHJpdmF0ZSBvbnJlYWR5OiAoY2k6IERvc0NvbW1hbmRJbnRlcmZhY2UpID0+IHZvaWQ7XG5cbiAgICBwcml2YXRlIHNoZWxsSW5wdXRRdWV1ZTogc3RyaW5nW10gPSBbXTtcbiAgICBwcml2YXRlIHNoZWxsSW5wdXRDbGllbnRzOiBBcnJheTwoKSA9PiB2b2lkPiA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IoZG9zOiBEb3NNb2R1bGUsIG9ucmVhZHk6IChjaTogRG9zQ29tbWFuZEludGVyZmFjZSkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLmRvcyA9IGRvcztcbiAgICAgICAgdGhpcy5lbSA9IChkb3MgYXMgYW55KTtcbiAgICAgICAgdGhpcy5hcGkgPSAoZG9zIGFzIGFueSk7XG4gICAgICAgIHRoaXMuYXBpLnBpbmcgPSAobXNnOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9ucGluZyhtc2csIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9ucmVhZHkgPSBvbnJlYWR5O1xuICAgIH1cblxuICAgIC8vICogYHdpZHRoKClgIC0gcmV0dXJuIGRvc2JveCB3aW5kb3cgd2lkdGggaW4gcGl4ZWxzXG4gICAgcHVibGljIHdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb3MuY2FudmFzLndpZHRoO1xuICAgIH1cblxuICAgIC8vICogYGhlaWdodCgpYCAtIHJldHVybiBkb3Nib3ggd2luZG93IGhlaWdodCBpbiBwaXhlbHNcbiAgICBwdWJsaWMgaGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb3MuY2FudmFzLmhlaWdodDtcbiAgICB9XG5cbiAgICAvLyAqIGBzaGVsbChbY21kMSwgY21kMiwgLi4uXSlgIC0gZXhlY3V0ZXMgcGFzc2VkIGNvbW1hbmRzXG4gICAgLy8gaW4gZG9zYm94IHNoZWxsIGlmIGl0J3MgcnVubmVkLCByZXR1cm5zIFByb21pc2UgdGhhdFxuICAgIC8vIHJlc29sdmVzIHdoZW4gY29tbWFuZHMgc2VxdWVuY2UgaXMgZXhlY3V0ZWRcbiAgICBwdWJsaWMgc2hlbGwoLi4uY21kOiBzdHJpbmdbXSkge1xuICAgICAgICBpZiAoY21kLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2hlbGxJbnB1dENsaWVudHMucHVzaChyZXNvbHZlKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbmV4dCBvZiBjbWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWxsSW5wdXRRdWV1ZS5wdXNoKG5leHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0U2hlbGxJbnB1dCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAqIGBzY3JlZW5zaG90KClgIC0gZ2V0IHNjcmVuc2hvdCBvZiBjYW52YXMgYXMgSW1hZ2VEYXRhXG4gICAgcHVibGljIHNjcmVlbnNob3QoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcGkuc2VuZChcInNjcmVlbnNob3RcIiwgXCJcIiwgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vICogYGV4aXQoKWAgLSBpbW1lZGlhdGVseSBleGl0IGZyb20gcnVudGltZVxuICAgIHB1YmxpYyBleGl0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5kb3MudGVybWluYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmFwaS5zZW5kKFwiZXhpdFwiKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRvcy5lcnJvcihcIlJ1bnRpbWUgaXMgc3RpbGwgYWxpdmUhXCIpO1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZW5kS2V5UHJlc3MoY29kZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuYXBpLnNlbmQoXCJzZGxfa2V5X2V2ZW50XCIsIGNvZGUgKyBcIlwiKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcXVlc3RTaGVsbElucHV0KCkge1xuICAgICAgICB0aGlzLnNlbmRLZXlQcmVzcygxMyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbnBpbmcobXNnOiBzdHJpbmcsIGFyZ3M6IGFueVtdKSB7XG4gICAgICAgIHN3aXRjaCAobXNnKSB7XG4gICAgICAgICAgICBjYXNlIFwicmVhZHlcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm9ucmVhZHkodGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZnJhbWVcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm9uZnJhbWUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzaGVsbF9pbnB1dFwiOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNoZWxsSW5wdXRRdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcjogbnVtYmVyID0gYXJnc1swXTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhMZW5ndGg6IG51bWJlciA9IGFyZ3NbMV07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjbWQgPSB0aGlzLnNoZWxsSW5wdXRRdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNtZExlbmd0aCA9ICh0aGlzLmVtIGFzIGFueSkubGVuZ3RoQnl0ZXNVVEY4KGNtZCkgKyAxO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNtZExlbmd0aCA+IG1heExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvcy5vbmVycm9yKFwiQ2FuJ3QgZXhlY3V0ZSBjbWQgJ1wiICsgY21kICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiJywgYmVjYXVzZSBpdCdzIGJpZ2dlciB0aGVuIG1heCBjbWQgbGVuZ3RoIFwiICsgbWF4TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICh0aGlzLmVtIGFzIGFueSkuc3RyaW5nVG9VVEY4KGNtZCwgYnVmZmVyLCBjbWRMZW5ndGgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hlbGxJbnB1dFF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc29sdmUgb2YgdGhpcy5zaGVsbElucHV0Q2xpZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlbGxJbnB1dENsaWVudHMgPSBbXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RTaGVsbElucHV0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8qIGRvIG5vdGhpbmcgKi9cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgb25mcmFtZSgpIHtcbiAgICAgICAgdGhpcy5kb3MudGljaygpO1xuICAgIH1cbn1cblxuaW50ZXJmYWNlIExvd0xldmVsQXBpIHtcbiAgICBzZW5kOiAoZXZlbnQ6IHN0cmluZywgbXNnPzogYW55LCBjYWxsYmFjaz86IChtc2c6IHN0cmluZykgPT4gdm9pZCkgPT4gdm9pZDtcbiAgICBwaW5nOiAobXNnOiBzdHJpbmcpID0+IHZvaWQ7XG59XG4iLCIvLyAjIGpzLWRvcyBkZWZhdWx0IGNvbmZpZ1xuLy8gVGhpcyBpcyBkZWZhdWx0IGNvbmZpZyBmb3IgZG9zYm94LlxuXG4vKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbmV4cG9ydCBjb25zdCBqc2Rvc2NvbmYgPSBgXG4jIFRoaXMgaXMgdGhlIGNvbmZpZ3VyYXRpb25maWxlIGZvciBET1NCb3ggMC43NC4gKFBsZWFzZSB1c2UgdGhlIGxhdGVzdCB2ZXJzaW9uIG9mIERPU0JveClcbiMgTGluZXMgc3RhcnRpbmcgd2l0aCBhICMgYXJlIGNvbW1lbnRsaW5lcyBhbmQgYXJlIGlnbm9yZWQgYnkgRE9TQm94LlxuIyBUaGV5IGFyZSB1c2VkIHRvIChicmllZmx5KSBkb2N1bWVudCB0aGUgZWZmZWN0IG9mIGVhY2ggb3B0aW9uLlxuXG5bc2RsXVxuIyAgICAgICBmdWxsc2NyZWVuOiBTdGFydCBkb3Nib3ggZGlyZWN0bHkgaW4gZnVsbHNjcmVlbi4gKFByZXNzIEFMVC1FbnRlciB0byBnbyBiYWNrKVxuIyAgICAgICBmdWxsZG91YmxlOiBVc2UgZG91YmxlIGJ1ZmZlcmluZyBpbiBmdWxsc2NyZWVuLiBJdCBjYW4gcmVkdWNlIHNjcmVlbiBmbGlja2VyaW5nLCBidXQgaXQgY2FuIGFsc28gcmVzdWx0IGluIGEgc2xvdyBET1NCb3guXG4jICAgZnVsbHJlc29sdXRpb246IFdoYXQgcmVzb2x1dGlvbiB0byB1c2UgZm9yIGZ1bGxzY3JlZW46IG9yaWdpbmFsIG9yIGZpeGVkIHNpemUgKGUuZy4gMTAyNHg3NjgpLlxuIyAgICAgICAgICAgICAgICAgICAgIFVzaW5nIHlvdXIgbW9uaXRvcidzIG5hdGl2ZSByZXNvbHV0aW9uIHdpdGggYXNwZWN0PXRydWUgbWlnaHQgZ2l2ZSB0aGUgYmVzdCByZXN1bHRzLlxuIyAgICAgICAgICAgICAgICAgICAgIElmIHlvdSBlbmQgdXAgd2l0aCBzbWFsbCB3aW5kb3cgb24gYSBsYXJnZSBzY3JlZW4sIHRyeSBhbiBvdXRwdXQgZGlmZmVyZW50IGZyb20gc3VyZmFjZS5cbiMgd2luZG93cmVzb2x1dGlvbjogU2NhbGUgdGhlIHdpbmRvdyB0byB0aGlzIHNpemUgSUYgdGhlIG91dHB1dCBkZXZpY2Ugc3VwcG9ydHMgaGFyZHdhcmUgc2NhbGluZy5cbiMgICAgICAgICAgICAgICAgICAgICAob3V0cHV0PXN1cmZhY2UgZG9lcyBub3QhKVxuIyAgICAgICAgICAgb3V0cHV0OiBXaGF0IHZpZGVvIHN5c3RlbSB0byB1c2UgZm9yIG91dHB1dC5cbiMgICAgICAgICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiBzdXJmYWNlLCBvdmVybGF5LCBvcGVuZ2wsIG9wZW5nbG5iLlxuIyAgICAgICAgIGF1dG9sb2NrOiBNb3VzZSB3aWxsIGF1dG9tYXRpY2FsbHkgbG9jaywgaWYgeW91IGNsaWNrIG9uIHRoZSBzY3JlZW4uIChQcmVzcyBDVFJMLUYxMCB0byB1bmxvY2spXG4jICAgICAgc2Vuc2l0aXZpdHk6IE1vdXNlIHNlbnNpdGl2aXR5LlxuIyAgICAgIHdhaXRvbmVycm9yOiBXYWl0IGJlZm9yZSBjbG9zaW5nIHRoZSBjb25zb2xlIGlmIGRvc2JveCBoYXMgYW4gZXJyb3IuXG4jICAgICAgICAgcHJpb3JpdHk6IFByaW9yaXR5IGxldmVscyBmb3IgZG9zYm94LiBTZWNvbmQgZW50cnkgYmVoaW5kIHRoZSBjb21tYSBpcyBmb3Igd2hlbiBkb3Nib3ggaXMgbm90IGZvY3VzZWQvbWluaW1pemVkLlxuIyAgICAgICAgICAgICAgICAgICAgIHBhdXNlIGlzIG9ubHkgdmFsaWQgZm9yIHRoZSBzZWNvbmQgZW50cnkuXG4jICAgICAgICAgICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogbG93ZXN0LCBsb3dlciwgbm9ybWFsLCBoaWdoZXIsIGhpZ2hlc3QsIHBhdXNlLlxuIyAgICAgICBtYXBwZXJmaWxlOiBGaWxlIHVzZWQgdG8gbG9hZC9zYXZlIHRoZSBrZXkvZXZlbnQgbWFwcGluZ3MgZnJvbS4gUmVzZXRtYXBwZXIgb25seSB3b3JrcyB3aXRoIHRoZSBkZWZhdWwgdmFsdWUuXG4jICAgICB1c2VzY2FuY29kZXM6IEF2b2lkIHVzYWdlIG9mIHN5bWtleXMsIG1pZ2h0IG5vdCB3b3JrIG9uIGFsbCBvcGVyYXRpbmcgc3lzdGVtcy5cblxuZnVsbHNjcmVlbj1mYWxzZVxuZnVsbGRvdWJsZT1mYWxzZVxuZnVsbHJlc29sdXRpb249b3JpZ2luYWxcbndpbmRvd3Jlc29sdXRpb249b3JpZ2luYWxcbm91dHB1dD1zdXJmYWNlXG5hdXRvbG9jaz1mYWxzZVxuc2Vuc2l0aXZpdHk9MTAwXG53YWl0b25lcnJvcj10cnVlXG5wcmlvcml0eT1oaWdoZXIsbm9ybWFsXG5tYXBwZXJmaWxlPW1hcHBlci1qc2Rvcy5tYXBcbnVzZXNjYW5jb2Rlcz10cnVlXG52c3luYz1mYWxzZVxuXG5bZG9zYm94XVxuIyBsYW5ndWFnZTogU2VsZWN0IGFub3RoZXIgbGFuZ3VhZ2UgZmlsZS5cbiMgIG1hY2hpbmU6IFRoZSB0eXBlIG9mIG1hY2hpbmUgdHJpZXMgdG8gZW11bGF0ZS5cbiMgICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogaGVyY3VsZXMsIGNnYSwgdGFuZHksIHBjanIsIGVnYSwgdmdhb25seSwgc3ZnYV9zMywgc3ZnYV9ldDMwMDAsIHN2Z2FfZXQ0MDAwLCBzdmdhX3BhcmFkaXNlLCB2ZXNhX25vbGZiLCB2ZXNhX29sZHZiZS5cbiMgY2FwdHVyZXM6IERpcmVjdG9yeSB3aGVyZSB0aGluZ3MgbGlrZSB3YXZlLCBtaWRpLCBzY3JlZW5zaG90IGdldCBjYXB0dXJlZC5cbiMgIG1lbXNpemU6IEFtb3VudCBvZiBtZW1vcnkgRE9TQm94IGhhcyBpbiBtZWdhYnl0ZXMuXG4jICAgICAgICAgICAgIFRoaXMgdmFsdWUgaXMgYmVzdCBsZWZ0IGF0IGl0cyBkZWZhdWx0IHRvIGF2b2lkIHByb2JsZW1zIHdpdGggc29tZSBnYW1lcyxcbiMgICAgICAgICAgICAgdGhvdWdoIGZldyBnYW1lcyBtaWdodCByZXF1aXJlIGEgaGlnaGVyIHZhbHVlLlxuIyAgICAgICAgICAgICBUaGVyZSBpcyBnZW5lcmFsbHkgbm8gc3BlZWQgYWR2YW50YWdlIHdoZW4gcmFpc2luZyB0aGlzIHZhbHVlLlxuXG5sYW5ndWFnZT1cbm1hY2hpbmU9c3ZnYV9zM1xuY2FwdHVyZXM9Y2FwdHVyZVxubWVtc2l6ZT0xNlxuXG5bcmVuZGVyXVxuIyBmcmFtZXNraXA6IEhvdyBtYW55IGZyYW1lcyBET1NCb3ggc2tpcHMgYmVmb3JlIGRyYXdpbmcgb25lLlxuIyAgICBhc3BlY3Q6IERvIGFzcGVjdCBjb3JyZWN0aW9uLCBpZiB5b3VyIG91dHB1dCBtZXRob2QgZG9lc24ndCBzdXBwb3J0IHNjYWxpbmcgdGhpcyBjYW4gc2xvdyB0aGluZ3MgZG93biEuXG4jICAgIHNjYWxlcjogU2NhbGVyIHVzZWQgdG8gZW5sYXJnZS9lbmhhbmNlIGxvdyByZXNvbHV0aW9uIG1vZGVzLlxuIyAgICAgICAgICAgICAgSWYgJ2ZvcmNlZCcgaXMgYXBwZW5kZWQsIHRoZW4gdGhlIHNjYWxlciB3aWxsIGJlIHVzZWQgZXZlbiBpZiB0aGUgcmVzdWx0IG1pZ2h0IG5vdCBiZSBkZXNpcmVkLlxuIyAgICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogbm9uZSwgbm9ybWFsMngsIG5vcm1hbDN4LCBhZHZtYW1lMngsIGFkdm1hbWUzeCwgYWR2aW50ZXJwMngsIGFkdmludGVycDN4LCBocTJ4LCBocTN4LCAyeHNhaSwgc3VwZXIyeHNhaSwgc3VwZXJlYWdsZSwgdHYyeCwgdHYzeCwgcmdiMngsIHJnYjN4LCBzY2FuMngsIHNjYW4zeC5cblxuZnJhbWVza2lwPTBcbmFzcGVjdD1mYWxzZVxuc2NhbGVyPW5vbmVcblxuW2NwdV1cbiMgICAgICBjb3JlOiBDUFUgQ29yZSB1c2VkIGluIGVtdWxhdGlvbi4gYXV0byB3aWxsIHN3aXRjaCB0byBkeW5hbWljIGlmIGF2YWlsYWJsZSBhbmQgYXBwcm9wcmlhdGUuXG4jICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiBhdXRvLCBkeW5hbWljLCBub3JtYWwsIHNpbXBsZS5cbiMgICBjcHV0eXBlOiBDUFUgVHlwZSB1c2VkIGluIGVtdWxhdGlvbi4gYXV0byBpcyB0aGUgZmFzdGVzdCBjaG9pY2UuXG4jICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiBhdXRvLCAzODYsIDM4Nl9zbG93LCA0ODZfc2xvdywgcGVudGl1bV9zbG93LCAzODZfcHJlZmV0Y2guXG4jICAgIGN5Y2xlczogQW1vdW50IG9mIGluc3RydWN0aW9ucyBET1NCb3ggdHJpZXMgdG8gZW11bGF0ZSBlYWNoIG1pbGxpc2Vjb25kLlxuIyAgICAgICAgICAgIFNldHRpbmcgdGhpcyB2YWx1ZSB0b28gaGlnaCByZXN1bHRzIGluIHNvdW5kIGRyb3BvdXRzIGFuZCBsYWdzLlxuIyAgICAgICAgICAgIEN5Y2xlcyBjYW4gYmUgc2V0IGluIDMgd2F5czpcbiMgICAgICAgICAgICAgICdhdXRvJyAgICAgICAgICB0cmllcyB0byBndWVzcyB3aGF0IGEgZ2FtZSBuZWVkcy5cbiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJdCB1c3VhbGx5IHdvcmtzLCBidXQgY2FuIGZhaWwgZm9yIGNlcnRhaW4gZ2FtZXMuXG4jICAgICAgICAgICAgICAnZml4ZWQgI251bWJlcicgd2lsbCBzZXQgYSBmaXhlZCBhbW91bnQgb2YgY3ljbGVzLiBUaGlzIGlzIHdoYXQgeW91IHVzdWFsbHkgbmVlZCBpZiAnYXV0bycgZmFpbHMuXG4jICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKEV4YW1wbGU6IGZpeGVkIDQwMDApLlxuIyAgICAgICAgICAgICAgJ21heCcgICAgICAgICAgIHdpbGwgYWxsb2NhdGUgYXMgbXVjaCBjeWNsZXMgYXMgeW91ciBjb21wdXRlciBpcyBhYmxlIHRvIGhhbmRsZS5cbiNcbiMgICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IGF1dG8sIGZpeGVkLCBtYXguXG4jICAgY3ljbGV1cDogQW1vdW50IG9mIGN5Y2xlcyB0byBkZWNyZWFzZS9pbmNyZWFzZSB3aXRoIGtleWNvbWJvLihDVFJMLUYxMS9DVFJMLUYxMilcbiMgY3ljbGVkb3duOiBTZXR0aW5nIGl0IGxvd2VyIHRoYW4gMTAwIHdpbGwgYmUgYSBwZXJjZW50YWdlLlxuXG5jb3JlPWF1dG9cbmNwdXR5cGU9YXV0b1xuY3ljbGVzPWF1dG9cbmN5Y2xldXA9MTBcbmN5Y2xlZG93bj0yMFxuXG5bbWl4ZXJdXG4jICAgbm9zb3VuZDogRW5hYmxlIHNpbGVudCBtb2RlLCBzb3VuZCBpcyBzdGlsbCBlbXVsYXRlZCB0aG91Z2guXG4jICAgICAgcmF0ZTogTWl4ZXIgc2FtcGxlIHJhdGUsIHNldHRpbmcgYW55IGRldmljZSdzIHJhdGUgaGlnaGVyIHRoYW4gdGhpcyB3aWxsIHByb2JhYmx5IGxvd2VyIHRoZWlyIHNvdW5kIHF1YWxpdHkuXG4jICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiA0NDEwMCwgNDgwMDAsIDMyMDAwLCAyMjA1MCwgMTYwMDAsIDExMDI1LCA4MDAwLCA0OTcxNi5cbiMgYmxvY2tzaXplOiBNaXhlciBibG9jayBzaXplLCBsYXJnZXIgYmxvY2tzIG1pZ2h0IGhlbHAgc291bmQgc3R1dHRlcmluZyBidXQgc291bmQgd2lsbCBhbHNvIGJlIG1vcmUgbGFnZ2VkLlxuIyAgICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogMTAyNCwgMjA0OCwgNDA5NiwgODE5MiwgNTEyLCAyNTYuXG4jIHByZWJ1ZmZlcjogSG93IG1hbnkgbWlsbGlzZWNvbmRzIG9mIGRhdGEgdG8ga2VlcCBvbiB0b3Agb2YgdGhlIGJsb2Nrc2l6ZS5cblxubm9zb3VuZD1mYWxzZVxucmF0ZT00NDEwMFxuYmxvY2tzaXplPTEwMjRcbnByZWJ1ZmZlcj0yMFxuXG5bbWlkaV1cbiMgICAgIG1wdTQwMTogVHlwZSBvZiBNUFUtNDAxIHRvIGVtdWxhdGUuXG4jICAgICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogaW50ZWxsaWdlbnQsIHVhcnQsIG5vbmUuXG4jIG1pZGlkZXZpY2U6IERldmljZSB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgTUlESSBkYXRhIGZyb20gTVBVLTQwMS5cbiMgICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiBkZWZhdWx0LCB3aW4zMiwgYWxzYSwgb3NzLCBjb3JlYXVkaW8sIGNvcmVtaWRpLCBub25lLlxuIyBtaWRpY29uZmlnOiBTcGVjaWFsIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIGRldmljZSBkcml2ZXIuIFRoaXMgaXMgdXN1YWxseSB0aGUgaWQgb2YgdGhlIGRldmljZSB5b3Ugd2FudCB0byB1c2UuXG4jICAgICAgICAgICAgICAgU2VlIHRoZSBSRUFETUUvTWFudWFsIGZvciBtb3JlIGRldGFpbHMuXG5cbm1wdTQwMT1pbnRlbGxpZ2VudFxubWlkaWRldmljZT1kZWZhdWx0XG5taWRpY29uZmlnPVxuXG5bc2JsYXN0ZXJdXG4jICBzYnR5cGU6IFR5cGUgb2YgU291bmRibGFzdGVyIHRvIGVtdWxhdGUuIGdiIGlzIEdhbWVibGFzdGVyLlxuIyAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IHNiMSwgc2IyLCBzYnBybzEsIHNicHJvMiwgc2IxNiwgZ2IsIG5vbmUuXG4jICBzYmJhc2U6IFRoZSBJTyBhZGRyZXNzIG9mIHRoZSBzb3VuZGJsYXN0ZXIuXG4jICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogMjIwLCAyNDAsIDI2MCwgMjgwLCAyYTAsIDJjMCwgMmUwLCAzMDAuXG4jICAgICBpcnE6IFRoZSBJUlEgbnVtYmVyIG9mIHRoZSBzb3VuZGJsYXN0ZXIuXG4jICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogNywgNSwgMywgOSwgMTAsIDExLCAxMi5cbiMgICAgIGRtYTogVGhlIERNQSBudW1iZXIgb2YgdGhlIHNvdW5kYmxhc3Rlci5cbiMgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiAxLCA1LCAwLCAzLCA2LCA3LlxuIyAgICBoZG1hOiBUaGUgSGlnaCBETUEgbnVtYmVyIG9mIHRoZSBzb3VuZGJsYXN0ZXIuXG4jICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogMSwgNSwgMCwgMywgNiwgNy5cbiMgc2JtaXhlcjogQWxsb3cgdGhlIHNvdW5kYmxhc3RlciBtaXhlciB0byBtb2RpZnkgdGhlIERPU0JveCBtaXhlci5cbiMgb3BsbW9kZTogVHlwZSBvZiBPUEwgZW11bGF0aW9uLiBPbiAnYXV0bycgdGhlIG1vZGUgaXMgZGV0ZXJtaW5lZCBieSBzYmxhc3RlciB0eXBlLiBBbGwgT1BMIG1vZGVzIGFyZSBBZGxpYi1jb21wYXRpYmxlLCBleGNlcHQgZm9yICdjbXMnLlxuIyAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IGF1dG8sIGNtcywgb3BsMiwgZHVhbG9wbDIsIG9wbDMsIG5vbmUuXG4jICBvcGxlbXU6IFByb3ZpZGVyIGZvciB0aGUgT1BMIGVtdWxhdGlvbi4gY29tcGF0IG1pZ2h0IHByb3ZpZGUgYmV0dGVyIHF1YWxpdHkgKHNlZSBvcGxyYXRlIGFzIHdlbGwpLlxuIyAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IGRlZmF1bHQsIGNvbXBhdCwgZmFzdC5cbiMgb3BscmF0ZTogU2FtcGxlIHJhdGUgb2YgT1BMIG11c2ljIGVtdWxhdGlvbi4gVXNlIDQ5NzE2IGZvciBoaWdoZXN0IHF1YWxpdHkgKHNldCB0aGUgbWl4ZXIgcmF0ZSBhY2NvcmRpbmdseSkuXG4jICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogNDQxMDAsIDQ5NzE2LCA0ODAwMCwgMzIwMDAsIDIyMDUwLCAxNjAwMCwgMTEwMjUsIDgwMDAuXG5cbnNidHlwZT1zYjE2XG5zYmJhc2U9MjIwXG5pcnE9N1xuZG1hPTFcbmhkbWE9NVxuc2JtaXhlcj10cnVlXG5vcGxtb2RlPWF1dG9cbm9wbGVtdT1kZWZhdWx0XG5vcGxyYXRlPTQ0MTAwXG5cbltndXNdXG4jICAgICAgZ3VzOiBFbmFibGUgdGhlIEdyYXZpcyBVbHRyYXNvdW5kIGVtdWxhdGlvbi5cbiMgIGd1c3JhdGU6IFNhbXBsZSByYXRlIG9mIFVsdHJhc291bmQgZW11bGF0aW9uLlxuIyAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiA0NDEwMCwgNDgwMDAsIDMyMDAwLCAyMjA1MCwgMTYwMDAsIDExMDI1LCA4MDAwLCA0OTcxNi5cbiMgIGd1c2Jhc2U6IFRoZSBJTyBiYXNlIGFkZHJlc3Mgb2YgdGhlIEdyYXZpcyBVbHRyYXNvdW5kLlxuIyAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiAyNDAsIDIyMCwgMjYwLCAyODAsIDJhMCwgMmMwLCAyZTAsIDMwMC5cbiMgICBndXNpcnE6IFRoZSBJUlEgbnVtYmVyIG9mIHRoZSBHcmF2aXMgVWx0cmFzb3VuZC5cbiMgICAgICAgICAgIFBvc3NpYmxlIHZhbHVlczogNSwgMywgNywgOSwgMTAsIDExLCAxMi5cbiMgICBndXNkbWE6IFRoZSBETUEgY2hhbm5lbCBvZiB0aGUgR3JhdmlzIFVsdHJhc291bmQuXG4jICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IDMsIDAsIDEsIDUsIDYsIDcuXG4jIHVsdHJhZGlyOiBQYXRoIHRvIFVsdHJhc291bmQgZGlyZWN0b3J5LiBJbiB0aGlzIGRpcmVjdG9yeVxuIyAgICAgICAgICAgdGhlcmUgc2hvdWxkIGJlIGEgTUlESSBkaXJlY3RvcnkgdGhhdCBjb250YWluc1xuIyAgICAgICAgICAgdGhlIHBhdGNoIGZpbGVzIGZvciBHVVMgcGxheWJhY2suIFBhdGNoIHNldHMgdXNlZFxuIyAgICAgICAgICAgd2l0aCBUaW1pZGl0eSBzaG91bGQgd29yayBmaW5lLlxuXG5ndXM9ZmFsc2Vcbmd1c3JhdGU9NDQxMDBcbmd1c2Jhc2U9MjQwXG5ndXNpcnE9NVxuZ3VzZG1hPTNcbnVsdHJhZGlyPUM6XFxVTFRSQVNORFxuXG5bc3BlYWtlcl1cbiMgcGNzcGVha2VyOiBFbmFibGUgUEMtU3BlYWtlciBlbXVsYXRpb24uXG4jICAgIHBjcmF0ZTogU2FtcGxlIHJhdGUgb2YgdGhlIFBDLVNwZWFrZXIgc291bmQgZ2VuZXJhdGlvbi5cbiMgICAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IDQ0MTAwLCA0ODAwMCwgMzIwMDAsIDIyMDUwLCAxNjAwMCwgMTEwMjUsIDgwMDAsIDQ5NzE2LlxuIyAgICAgdGFuZHk6IEVuYWJsZSBUYW5keSBTb3VuZCBTeXN0ZW0gZW11bGF0aW9uLiBGb3IgJ2F1dG8nLCBlbXVsYXRpb24gaXMgcHJlc2VudCBvbmx5IGlmIG1hY2hpbmUgaXMgc2V0IHRvICd0YW5keScuXG4jICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiBhdXRvLCBvbiwgb2ZmLlxuIyB0YW5keXJhdGU6IFNhbXBsZSByYXRlIG9mIHRoZSBUYW5keSAzLVZvaWNlIGdlbmVyYXRpb24uXG4jICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiA0NDEwMCwgNDgwMDAsIDMyMDAwLCAyMjA1MCwgMTYwMDAsIDExMDI1LCA4MDAwLCA0OTcxNi5cbiMgICAgZGlzbmV5OiBFbmFibGUgRGlzbmV5IFNvdW5kIFNvdXJjZSBlbXVsYXRpb24uIChDb3ZveCBWb2ljZSBNYXN0ZXIgYW5kIFNwZWVjaCBUaGluZyBjb21wYXRpYmxlKS5cblxucGNzcGVha2VyPXRydWVcbnBjcmF0ZT00NDEwMFxudGFuZHk9YXV0b1xudGFuZHlyYXRlPTQ0MTAwXG5kaXNuZXk9dHJ1ZVxuXG5bam95c3RpY2tdXG4jIGpveXN0aWNrdHlwZTogVHlwZSBvZiBqb3lzdGljayB0byBlbXVsYXRlOiBhdXRvIChkZWZhdWx0KSwgbm9uZSxcbiMgICAgICAgICAgICAgICAyYXhpcyAoc3VwcG9ydHMgdHdvIGpveXN0aWNrcyksXG4jICAgICAgICAgICAgICAgNGF4aXMgKHN1cHBvcnRzIG9uZSBqb3lzdGljaywgZmlyc3Qgam95c3RpY2sgdXNlZCksXG4jICAgICAgICAgICAgICAgNGF4aXNfMiAoc3VwcG9ydHMgb25lIGpveXN0aWNrLCBzZWNvbmQgam95c3RpY2sgdXNlZCksXG4jICAgICAgICAgICAgICAgZmNzIChUaHJ1c3RtYXN0ZXIpLCBjaCAoQ0ggRmxpZ2h0c3RpY2spLlxuIyAgICAgICAgICAgICAgIG5vbmUgZGlzYWJsZXMgam95c3RpY2sgZW11bGF0aW9uLlxuIyAgICAgICAgICAgICAgIGF1dG8gY2hvb3NlcyBlbXVsYXRpb24gZGVwZW5kaW5nIG9uIHJlYWwgam95c3RpY2socykuXG4jICAgICAgICAgICAgICAgKFJlbWVtYmVyIHRvIHJlc2V0IGRvc2JveCdzIG1hcHBlcmZpbGUgaWYgeW91IHNhdmVkIGl0IGVhcmxpZXIpXG4jICAgICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzOiBhdXRvLCAyYXhpcywgNGF4aXMsIDRheGlzXzIsIGZjcywgY2gsIG5vbmUuXG4jICAgICAgICB0aW1lZDogZW5hYmxlIHRpbWVkIGludGVydmFscyBmb3IgYXhpcy4gRXhwZXJpbWVudCB3aXRoIHRoaXMgb3B0aW9uLCBpZiB5b3VyIGpveXN0aWNrIGRyaWZ0cyAoYXdheSkuXG4jICAgICBhdXRvZmlyZTogY29udGludW91c2x5IGZpcmVzIGFzIGxvbmcgYXMgeW91IGtlZXAgdGhlIGJ1dHRvbiBwcmVzc2VkLlxuIyAgICAgICBzd2FwMzQ6IHN3YXAgdGhlIDNyZCBhbmQgdGhlIDR0aCBheGlzLiBjYW4gYmUgdXNlZnVsIGZvciBjZXJ0YWluIGpveXN0aWNrcy5cbiMgICBidXR0b253cmFwOiBlbmFibGUgYnV0dG9uIHdyYXBwaW5nIGF0IHRoZSBudW1iZXIgb2YgZW11bGF0ZWQgYnV0dG9ucy5cblxuam95c3RpY2t0eXBlPWF1dG9cbnRpbWVkPXRydWVcbmF1dG9maXJlPWZhbHNlXG5zd2FwMzQ9ZmFsc2VcbmJ1dHRvbndyYXA9ZmFsc2VcblxuW3NlcmlhbF1cbiMgc2VyaWFsMTogc2V0IHR5cGUgb2YgZGV2aWNlIGNvbm5lY3RlZCB0byBjb20gcG9ydC5cbiMgICAgICAgICAgQ2FuIGJlIGRpc2FibGVkLCBkdW1teSwgbW9kZW0sIG51bGxtb2RlbSwgZGlyZWN0c2VyaWFsLlxuIyAgICAgICAgICBBZGRpdGlvbmFsIHBhcmFtZXRlcnMgbXVzdCBiZSBpbiB0aGUgc2FtZSBsaW5lIGluIHRoZSBmb3JtIG9mXG4jICAgICAgICAgIHBhcmFtZXRlcjp2YWx1ZS4gUGFyYW1ldGVyIGZvciBhbGwgdHlwZXMgaXMgaXJxIChvcHRpb25hbCkuXG4jICAgICAgICAgIGZvciBkaXJlY3RzZXJpYWw6IHJlYWxwb3J0IChyZXF1aXJlZCksIHJ4ZGVsYXkgKG9wdGlvbmFsKS5cbiMgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVhbHBvcnQ6Q09NMSByZWFscG9ydDp0dHlTMCkuXG4jICAgICAgICAgIGZvciBtb2RlbTogbGlzdGVucG9ydCAob3B0aW9uYWwpLlxuIyAgICAgICAgICBmb3IgbnVsbG1vZGVtOiBzZXJ2ZXIsIHJ4ZGVsYXksIHR4ZGVsYXksIHRlbG5ldCwgdXNlZHRyLFxuIyAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVudCwgcG9ydCwgaW5oc29ja2V0IChhbGwgb3B0aW9uYWwpLlxuIyAgICAgICAgICBFeGFtcGxlOiBzZXJpYWwxPW1vZGVtIGxpc3RlbnBvcnQ6NTAwMFxuIyAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IGR1bW15LCBkaXNhYmxlZCwgbW9kZW0sIG51bGxtb2RlbSwgZGlyZWN0c2VyaWFsLlxuIyBzZXJpYWwyOiBzZWUgc2VyaWFsMVxuIyAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IGR1bW15LCBkaXNhYmxlZCwgbW9kZW0sIG51bGxtb2RlbSwgZGlyZWN0c2VyaWFsLlxuIyBzZXJpYWwzOiBzZWUgc2VyaWFsMVxuIyAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IGR1bW15LCBkaXNhYmxlZCwgbW9kZW0sIG51bGxtb2RlbSwgZGlyZWN0c2VyaWFsLlxuIyBzZXJpYWw0OiBzZWUgc2VyaWFsMVxuIyAgICAgICAgICBQb3NzaWJsZSB2YWx1ZXM6IGR1bW15LCBkaXNhYmxlZCwgbW9kZW0sIG51bGxtb2RlbSwgZGlyZWN0c2VyaWFsLlxuXG5zZXJpYWwxPWR1bW15XG5zZXJpYWwyPWR1bW15XG5zZXJpYWwzPWRpc2FibGVkXG5zZXJpYWw0PWRpc2FibGVkXG5cbltkb3NdXG4jICAgICAgICAgICAgeG1zOiBFbmFibGUgWE1TIHN1cHBvcnQuXG4jICAgICAgICAgICAgZW1zOiBFbmFibGUgRU1TIHN1cHBvcnQuXG4jICAgICAgICAgICAgdW1iOiBFbmFibGUgVU1CIHN1cHBvcnQuXG4jIGtleWJvYXJkbGF5b3V0OiBMYW5ndWFnZSBjb2RlIG9mIHRoZSBrZXlib2FyZCBsYXlvdXQgKG9yIG5vbmUpLlxuXG54bXM9dHJ1ZVxuZW1zPXRydWVcbnVtYj10cnVlXG5rZXlib2FyZGxheW91dD1hdXRvXG5cbltpcHhdXG4jIGlweDogRW5hYmxlIGlweCBvdmVyIFVEUC9JUCBlbXVsYXRpb24uXG5cbmlweD1mYWxzZVxuXG5bYXV0b2V4ZWNdXG4jIExpbmVzIGluIHRoaXMgc2VjdGlvbiB3aWxsIGJlIHJ1biBhdCBzdGFydHVwLlxuIyBZb3UgY2FuIHB1dCB5b3VyIE1PVU5UIGxpbmVzIGhlcmUuXG5cbiMgaHR0cHM6Ly9qcy1kb3MuY29tXG4jIOKWiOKWgOKWgOKWgOKWgOKWgOKWiCDiloggIOKWhOKWhOKWhOKWgOKWgOKWiCDilojiloDiloDiloDiloDiloDilohcbiMg4paIIOKWiOKWiOKWiCDilogg4paI4paI4paEIOKWiCDiloAg4paEIOKWiCDilojilojilogg4paIXG4jIOKWiCDiloDiloDiloAg4paIIOKWhOKWiOKWiCDiloAg4paA4paA4paIIOKWiCDiloDiloDiloAg4paIXG4jIOKWgOKWgOKWgOKWgOKWgOKWgOKWgCDiloAg4paI4paE4paA4paE4paAIOKWiCDiloDiloDiloDiloDiloDiloDiloBcbiMg4paI4paA4paE4paE4paI4paA4paA4paE4paEIOKWgCDiloDilojiloTiloTiloTiloQg4paA4paE4paI4paA4paI4paAXG4jIOKWiOKWgCDiloAg4paA4paA4paEIOKWiOKWgCDiloQg4paE4paA4paA4paA4paEIOKWiOKWgOKWiOKWhFxuIyDiloQg4paE4paEIOKWiOKWgOKWgOKWhCDiloTiloDiloTiloDiloDiloggIOKWgOKWgOKWhOKWgOKWgOKWiOKWgFxuIyAgIOKWhOKWgOKWgOKWiOKWgOKWgCDilojiloDilojiloDilojiloDiloDiloQg4paA4paI4paI4paA4paI4paEXG4jIOKWgOKWgOKWgCDiloAg4paAIOKWiOKWhOKWiCDiloDilojiloTiloTilojiloDiloDiloDilojiloDiloBcbiMg4paI4paA4paA4paA4paA4paA4paIIOKWhOKWhOKWhCDiloQg4paEIOKWiCDiloAg4paI4paE4paE4paE4paEXG4jIOKWiCDilojilojilogg4paIIOKWgOKWiOKWgOKWgOKWhOKWgOKWgOKWhOKWiOKWiOKWiOKWiOKWgOKWgOKWiOKWhOKWiFxuIyDilogg4paA4paA4paAIOKWiCDiloTiloDiloDilojiloDilojiloDiloQg4paA4paA4paE4paE4paI4paE4paIIFxuIyDiloDiloDiloDiloDiloDiloDiloAg4paAICAg4paA4paAIOKWgCAg4paAICAg4paA4paA4paAXG5gO1xuIiwiLy8gIyBEb3NGU1xuLy8gQVBJIGZvciB3b3JraW5nIHdpdGggZmlsZSBzeXN0ZW0gb2YgZG9zYm94XG5cbmltcG9ydCBDYWNoZU5vb3AgZnJvbSBcIi4vanMtZG9zLWNhY2hlLW5vb3BcIjtcbmltcG9ydCB7IERvc01vZHVsZSB9IGZyb20gXCIuL2pzLWRvcy1tb2R1bGVcIjtcbmltcG9ydCB7IFhociB9IGZyb20gXCIuL2pzLWRvcy14aHJcIjtcblxuZXhwb3J0IGNsYXNzIERvc0ZTIHtcbiAgICBwcml2YXRlIGRvczogRG9zTW9kdWxlO1xuICAgIHByaXZhdGUgZW06IHR5cGVvZiBNb2R1bGU7XG4gICAgcHJpdmF0ZSBmczogYW55O1xuICAgIHByaXZhdGUgc3luY2luZ1Byb21pc2U6IFByb21pc2U8dm9pZD4gfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGxhc3RTeW5jVGltZSA9IDA7XG5cbiAgICBjb25zdHJ1Y3Rvcihkb3M6IERvc01vZHVsZSkge1xuICAgICAgICB0aGlzLmRvcyA9IGRvcztcbiAgICAgICAgdGhpcy5lbSA9IGRvcyBhcyBhbnk7XG4gICAgICAgIHRoaXMuZnMgPSAoZG9zIGFzIGFueSkuRlM7XG5cbiAgICAgICAgLy8gU3luYyBmcyB0byBpbmRleGVkIGRiIHBlcmlvZGljYWxseVxuICAgICAgICB0aGlzLmRvcy5yZWdpc3RlclRpY2tMaXN0ZW5lcigoKSA9PiB7XG4gICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFN5bmNUaW1lIDwgNTAwMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFzdFN5bmNUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIHRoaXMuc3luY0ZzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRvcy5yZWdpc3RlclBhdXNlTGlzdGVuZXIoKCkgPT4gdGhpcy5zeW5jRnMoKSk7XG4gICAgICAgIHRoaXMuZG9zLnJlZ2lzdGVyVGVybWluYXRlTGlzdGVuZXIoKCkgPT4gdGhpcy5zeW5jRnMoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNoZGlyKHBhdGg6IHN0cmluZykge1xuICAgICAgICB0aGlzLmZzLmNoZGlyKHBhdGgpO1xuICAgIH1cblxuICAgIC8vICMjIyBleHRyYWN0XG4gICAgcHVibGljIGV4dHJhY3QodXJsOiBzdHJpbmcsIHBlcnNpc3RlbnRNb3VudDogc3RyaW5nID0gXCIvXCIsIHR5cGU6IHN0cmluZyA9IFwiemlwXCIpIHtcbiAgICAgICAgLy8gZG93bmxvYWQgYXJjaGl2ZSBieSBnaXZlbiB1cmwgYW5kIHRoZW4gZXh0cmFjdCBpdCBpbiBjd2QgKGN3ZCB3aWxsIGJlIG1vdW50ZWQgYXMgQzopXG4gICAgICAgIC8vXG4gICAgICAgIC8vICogYHVybGAgLSB1cmwgZm9yIGRvd25sb2FkaW5nIGFyY2hpdmVcbiAgICAgICAgLy8gKiBgcGVyc2lzdGVudE1vdW50YCAtIGlzIGEgcGF0aCB0byBtb3VudCBhcmNoaXZlIGNvbnRlbnRzLCBieSBkZWZhdWx0IG1vdW50IHBvaW50IGlzICcvJyB3aGljaFxuICAgICAgICAvLyBpcyBhIE1FTUZTIHRoYXQgaXMgbGl2ZSBvbmx5IGluIG9uZSBzc2VzaW9uLiBJdCBtZWFucyB0aGF0IGFmdGVyIHJlc3RhcnQgYWxsIHByb2dyZXNzIHdpbGwgYmUgZXJhc2VkLlxuICAgICAgICAvLyBJZiB5b3Ugc2V0IHNvbWUgcGF0aCAoYW55KSwgdGhlbiB0aGlzIHBhdGggd2lsbCBiZSBzdG9yZWQgYWNyb3NzIHNlc3Npb25zIGluIGluZGV4ZWQgZGIuIEl0IG1lYW5zXG4gICAgICAgIC8vIHRoYXQgcHJvZ3Jlc3Mgd2lsbCBiZSB0aGVyZSBhZnRlciBicm93c2VyIHJlc3RhcnQuXG4gICAgICAgIC8vICogYHR5cGVgIC0gYXJjaGl2ZSB0eXBlICoqb25seSB6aXAgaXMgc3VwcG9ydGVkKipcbiAgICAgICAgLy9cbiAgICAgICAgLy8gdGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gYFByb21pc2U8dm9pZD5gLCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWRcbiAgICAgICAgLy8gb24gc3VjY2VzcyB3aXRoIGVtcHR5IG9iamVjdCBvciByZWplY3RlZFxuXG4gICAgICAgIHBlcnNpc3RlbnRNb3VudCA9IHRoaXMubm9ybWFsaXplUGF0aChwZXJzaXN0ZW50TW91bnQpO1xuXG4gICAgICAgIGNvbnN0IHBhcnRzID0gcGVyc2lzdGVudE1vdW50LnNwbGl0KFwiL1wiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVQYXRoKHBhcnRzLCAwLCBwYXJ0cy5sZW5ndGgpO1xuICAgICAgICB0aGlzLmNoZGlyKHBlcnNpc3RlbnRNb3VudCk7XG5cbiAgICAgICAgY29uc3QgZXh0cmFjdEFyY2hpdmVJbkN3ZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgIT09IFwiemlwXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiT25seSBaSVAgYXJjaGl2ZSBpcyBzdXBwb3J0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBuZXcgWGhyKHVybCwge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZTogbmV3IENhY2hlTm9vcCgpLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IFwiYXJyYXlidWZmZXJcIixcbiAgICAgICAgICAgICAgICAgICAgZmFpbDogKG1zZykgPT4gcmVqZWN0KG1zZyksXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzOiAodG90YWwsIGxvYWRlZCkgPT4gdGhpcy5kb3Mub25wcm9ncmVzcyhcIkRvd25sb2FkaW5nIFwiICsgdXJsLCB0b3RhbCwgbG9hZGVkKSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogKGRhdGE6IEFycmF5QnVmZmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5lbS5fbWFsbG9jKGJ5dGVzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtLkhFQVBVOC5zZXQoYnl0ZXMsIGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXRjb2RlID0gKHRoaXMuZW0gYXMgYW55KS5fZXh0cmFjdF96aXAoYnVmZmVyLCBieXRlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbS5fZnJlZShidWZmZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0Y29kZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVPayhwZXJzaXN0ZW50TW91bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0ZzKCkudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJDYW4ndCBleHRyYWN0IHppcCwgcmV0Y29kZSBcIiArIHJldGNvZGUgKyBcIiwgc2VlIG1vcmUgaW5mbyBpbiBsb2dzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHBlcnNpc3RlbnRNb3VudCA9PT0gXCIvXCIgfHwgcGVyc2lzdGVudE1vdW50Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RBcmNoaXZlSW5Dd2QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0U3luY1RpbWUgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KFwiQ2FuJ3QgY3JlYXRlIHBlcnNpc3RlbnQgbW91bnQgcG9pbnQsIGFmdGVyIHN5bmNpbmcgcHJvY2VzcyBzdGFydHNcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmZzLm1vdW50KHRoaXMuZnMuZmlsZXN5c3RlbXMuSURCRlMsIHt9LCBwZXJzaXN0ZW50TW91bnQpO1xuICAgICAgICAgICAgdGhpcy5mcy5zeW5jZnModHJ1ZSwgKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJDYW4ndCByZXN0b3JlIEZTIGZyb20gaW5kZXhlZCBkYiwgY2F1c2U6IFwiICsgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5yZWFkT2socGVyc2lzdGVudE1vdW50KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvcy53YXJuKFwiSW5kZXhlZCBkYiBjb250YWlucyBicm9rZW4gRlMsIHJlc2V0dGluZy4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdEFyY2hpdmVJbkN3ZCgpLnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAjIyMgY3JlYXRlRmlsZVxuICAgIHB1YmxpYyBjcmVhdGVGaWxlKGZpbGU6IHN0cmluZywgYm9keTogQXJyYXlCdWZmZXIgfCBVaW50OEFycmF5IHwgc3RyaW5nKSB7XG4gICAgICAgIC8vIFtzeW5jaHJvbm91c10gYWxsb3cgdG8gY3JlYXRlIGZpbGUgaW4gRlMsIHlvdSBjYW4gcGFzcyBhYnNvbHV0ZSBwYXRoLlxuICAgICAgICAvLyBBbGwgZGlyZWN0b3JpZXMgd2lsbCBiZSBjcmVhdGVkXG4gICAgICAgIC8vXG4gICAgICAgIC8vIGJvZHkgY2FuIGJlIHN0cmluZyBvciBBcnJheUJ1ZmZlciBvciBVaW50OEFycmF5XG5cbiAgICAgICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgYm9keSA9IG5ldyBVaW50OEFycmF5KGJvZHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2luZG93cyBzdHlsZSBwYXRoIGFyZSBhbHNvIHZhbGlkLCBidXQgKipkcml2ZSBsZXR0ZXIgaXMgaWdub3JlZCoqXG4gICAgICAgIC8vIGlmIHlvdSBwYXNzIG9ubHkgZmlsZW5hbWUsIHRoZW4gZmlsZSB3aWxsIGJlIHdyaXRlZCBpbiByb290IFwiL1wiIGRpcmVjdG9yeVxuICAgICAgICBmaWxlID0gZmlsZS5yZXBsYWNlKG5ldyBSZWdFeHAoXCJeW2EtekEtel0rOlwiKSwgXCJcIikgLnJlcGxhY2UobmV3IFJlZ0V4cChcIlxcXFxcXFxcXCIsIFwiZ1wiKSwgXCIvXCIpO1xuICAgICAgICBjb25zdCBwYXJ0cyA9IGZpbGUuc3BsaXQoXCIvXCIpO1xuXG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZG9zLm9uZXJyb3IoXCJDYW4ndCBjcmVhdGUgZmlsZSAnXCIgKyBmaWxlICsgXCInLCBiZWNhdXNlIGl0J3Mgbm90IHZhbGlkIGZpbGUgcGF0aFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV0udHJpbSgpO1xuXG4gICAgICAgIGlmIChmaWxlbmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZG9zLm9uZXJyb3IoXCJDYW4ndCBjcmVhdGUgZmlsZSAnXCIgKyBmaWxlICsgXCInLCBiZWNhdXNlIGZpbGUgbmFtZSBpcyBlbXB0eVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGkgPCBwYXJ0cy5sZW5ndGggLSAxLCBiZWNhdXNlIGxhc3QgcGFydCBpcyBmaWxlIG5hbWUgKi9cbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuY3JlYXRlUGF0aChwYXJ0cywgMCwgcGFydHMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHRoaXMuZnMuY3JlYXRlRGF0YUZpbGUocGF0aCwgZmlsZW5hbWUsIGJvZHksIHRydWUsIHRydWUsIHRydWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUGF0aChwYXJ0czogc3RyaW5nW10sIGJlZ2luOiBudW1iZXIsIGVuZDogbnVtYmVyKSB7XG4gICAgICAgIGxldCBwYXRoID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IGJlZ2luOyBpIDwgZW5kOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXS50cmltKCk7XG4gICAgICAgICAgICBpZiAocGFydC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5mcy5jcmVhdGVQYXRoKHBhdGgsIHBhcnQsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgcGF0aCA9IHBhdGggKyBcIi9cIiArIHBhcnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN5bmNGcygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3luY2luZ1Byb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN5bmNpbmdQcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zeW5jaW5nUHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ZWRBdCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLmZzLnN5bmNmcyhmYWxzZSwgKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvcy5lcnJvcihcIkNhbid0IHN5bmMgRlMgdG8gaW5kZXhlZCBkYiwgY2F1c2U6IFwiICsgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc3luY2luZ1Byb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdFN5bmNUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY2luZ1Byb21pc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBub3JtYWxpemVQYXRoKHBhdGg6IHN0cmluZykge1xuICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDAgfHwgcGF0aFswXSAhPT0gXCIvXCIpIHtcbiAgICAgICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGF0aC5sZW5ndGggPiAxICYmIHBhdGguZW5kc1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcGF0aC5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVhZE9rKHBhdGg6IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVhZGVkID0gdGhpcy5mcy5yZWFkRmlsZShwYXRoICsgXCIvc3RhdGUuZnNcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVhZGVkWzBdID09PSA3OSAmJiByZWFkZWRbMV0gPT09IDcwO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgd3JpdGVPayhwYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVGaWxlKHBhdGggKyBcIi9zdGF0ZS5mc1wiLCBuZXcgVWludDhBcnJheShbNzksIDcwXSkpOyAvLyBPa1xuICAgIH1cblxufVxuIiwiLy8gIyBEb3NIb3N0XG4vLyBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gZGV0ZWN0IGFuZCBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0XG4vLyBmZWF0dXJlcyB0aGF0IHN1cHBvcnRlZCBpbiBjdXJyZW50IGVudmlyb25tZW50XG5cbi8qIHRzbGludDpkaXNhYmxlOm1lbWJlci1vcmRlcmluZyAqL1xuaW1wb3J0IHsgQnVpbGQgfSBmcm9tIFwiLi9qcy1kb3MtYnVpbGRcIjtcbmltcG9ydCB7IElDYWNoZSB9IGZyb20gXCIuL2pzLWRvcy1jYWNoZVwiO1xuaW1wb3J0IHsgRG9zTW9kdWxlIH0gZnJvbSBcIi4vanMtZG9zLW1vZHVsZVwiO1xuaW1wb3J0IHsgWGhyIH0gZnJvbSBcIi4vanMtZG9zLXhoclwiO1xuXG5jbGFzcyBEb3NIb3N0IHtcblxuICAgIHB1YmxpYyB3YXNtU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgcHVibGljIGdsb2JhbCA9IHdpbmRvdyBhcyBhbnk7XG5cbiAgICBwcml2YXRlIHdkb3Nib3hQcm9taXNlOiBQcm9taXNlPGFueT4gPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZ2xvYmFsLmV4cG9ydHMgPSB7fTtcblxuICAgICAgICAvLyAjIyMgV2ViQXNzZW1ibHlcbiAgICAgICAgLy8gSG9zdCBhYmxlIHRvIGRldGVjdCBpcyBXZWJBc3NlbWJseSBzdXBwb3J0ZWQgb3Igbm90LFxuICAgICAgICAvLyB0aGlzIGluZm9ybWF0aW9uIGlzIHN0b3JlZCBpbiBgSG9zdC53YXNtU3VwcG9ydGVkYCB2YXJpYWJsZVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBXZWJBc3NlbWJseSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIFdlYkFzc2VtYmx5LmNvbXBpbGUgPT09IFwiZnVuY3Rpb25cIikge1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgd21vZHVsZSA9IG5ldyBXZWJBc3NlbWJseS5Nb2R1bGUoVWludDhBcnJheS5vZigweDAsIDB4NjEsIDB4NzMsIDB4NmQsIDB4MDEsIDB4MDAsIDB4MDAsIDB4MDApKTtcbiAgICAgICAgICAgICAgICBpZiAod21vZHVsZSBpbnN0YW5jZW9mIFdlYkFzc2VtYmx5Lk1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndhc21TdXBwb3J0ZWQgPSBuZXcgV2ViQXNzZW1ibHkuSW5zdGFuY2Uod21vZHVsZSkgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5JbnN0YW5jZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvKiBkbyBub3RoaW5nIFdlYkFzc2VtYmx5IGlzIG5vdCBzdXBwb3J0ZWQgKi9cbiAgICAgICAgfVxuXG4gICAgICAgIC8vICMjIyBwb2x5ZmlsbFxuICAgICAgICAvLyBIb3N0IGFsc28gcHJvdmlkZXMgbGltaXRlZCBzZXQgb2YgcG9seWZpbGxzIHRvIHN1cHBvcnQgbGVnYWN5IGJyb3dzZXJzXG4gICAgICAgIHRoaXMucG9seWZpbGwoKTtcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50bHkgcG9seWZpbGwgY29udGFpbnMgaW1wbGVtZW50YXRpb25zIGZvcjpcbiAgICAvLyBgTWF0aC5pbXVsYCwgYE1hdGguZnJvdW5kYCwgYE1hdGguY2x6MzJgLCBgTWF0aC50cnVuY2BcbiAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby1iaXR3aXNlICovXG4gICAgLyogdHNsaW50OmRpc2FibGU6b25seS1hcnJvdy1mdW5jdGlvbnMgKi9cbiAgICBwcml2YXRlIHBvbHlmaWxsKCkge1xuICAgICAgICBpZiAoIU1hdGguaW11bCB8fCBNYXRoLmltdWwoMHhmZmZmZmZmZiwgNSkgIT09IC01KSB7XG4gICAgICAgICAgICBNYXRoLmltdWwgPSBmdW5jdGlvbiBpbXVsKGE6IGFueSwgYjogYW55KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWggPSBhID4+PiAxNjtcbiAgICAgICAgICAgICAgICBjb25zdCBhbCA9IGEgJiAweGZmZmY7XG4gICAgICAgICAgICAgICAgY29uc3QgYmggPSBiID4+PiAxNjtcbiAgICAgICAgICAgICAgICBjb25zdCBibCA9IGIgJiAweGZmZmY7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChhbCAqIGJsICsgKChhaCAqIGJsICsgYWwgKiBiaCkgPDwgMTYpKSB8IDA7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIE1hdGguaW11bCA9IE1hdGguaW11bDtcblxuICAgICAgICBpZiAoIU1hdGguZnJvdW5kKSB7XG4gICAgICAgICAgICBNYXRoLmZyb3VuZCA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHg7IH07XG4gICAgICAgIH1cbiAgICAgICAgTWF0aC5mcm91bmQgPSBNYXRoLmZyb3VuZDtcblxuICAgICAgICBpZiAoIU1hdGguY2x6MzIpIHtcbiAgICAgICAgICAgIE1hdGguY2x6MzIgPSBmdW5jdGlvbih4KSB7XG4gICAgICAgICAgICAgICAgeCA9IHggPj4+IDA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4ICYgKDEgPDwgKDMxIC0gaSkpKSB7IHJldHVybiBpOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAzMjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgTWF0aC5jbHozMiA9IE1hdGguY2x6MzI7XG5cbiAgICAgICAgaWYgKCFNYXRoLnRydW5jKSB7XG4gICAgICAgICAgICBNYXRoLnRydW5jID0gZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB4IDwgMCA/IE1hdGguY2VpbCh4KSA6IE1hdGguZmxvb3IoeCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIE1hdGgudHJ1bmMgPSBNYXRoLnRydW5jO1xuICAgIH1cblxuICAgIC8vICMjIyByZXNvbHZlRG9zQm94XG4gICAgLy8gYHJlc29sdmVEb3NCb3hgIGlzIGFub3RoZXIgaW1wb3J0YW50IHRhc2sgb2YgRG9zSG9zdFxuICAgIHB1YmxpYyByZXNvbHZlRG9zQm94KHVybDogc3RyaW5nLCBjYWNoZTogSUNhY2hlLCBtb2R1bGU6IERvc01vZHVsZSkge1xuICAgICAgICAvLyBXaGVuIGRvc2JveCBpcyByZXNvbHZlZCwgV0RPU0JPWCBtb2R1bGUgaXMgc2V0IHRvXG4gICAgICAgIC8vIGdsb2JhbCB2YXJpYWJsZSBgZXhwb3J0cy5XRE9TQk9YYC4gVGhpcyB2YXJpYWJsZSBpc1xuICAgICAgICAvLyB1c2VkIHRvIHByZXZlbnQgbmV4dCBsb2FkcyBvZiBzYW1lIGRvc2JveCBtb2R1bGUuXG4gICAgICAgIGlmICh0aGlzLmdsb2JhbC5leHBvcnRzLldET1NCT1gpIHtcbiAgICAgICAgICAgIG1vZHVsZS5vbmRvc2JveCh0aGlzLmdsb2JhbC5leHBvcnRzLldET1NCT1gsIHRoaXMuZ2xvYmFsLmV4cG9ydHMuaW5zdGFudGlhdGVXYXNtKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53YXNtU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICBtb2R1bGUub25lcnJvcihcIldlYkFzc2VtYmx5IGlzIG5vdCBzdXBwb3J0ZWQsIGNhbid0IHJlc29sdmUgd2Rvc2JveFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLndkb3Nib3hQcm9taXNlID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLndkb3Nib3hQcm9taXNlID0gdGhpcy5jb21waWxlRG9zQm94KHVybCwgY2FjaGUsIG1vZHVsZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLndkb3Nib3hQcm9taXNlLnRoZW4oKGluc3RhbmNlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIC8qIGxlYXZlIHByb21pc2Ugc2NvcGUgKi9cbiAgICAgICAgICAgIGNvbnN0IGZuID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud2Rvc2JveFByb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIG1vZHVsZS5vbmRvc2JveCh0aGlzLmdsb2JhbC5leHBvcnRzLldET1NCT1gsIHRoaXMuZ2xvYmFsLmV4cG9ydHMuaW5zdGFudGlhdGVXYXNtKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZuLCAxKTtcbiAgICAgICAgfSwgKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgLyogbGVhdmUgcHJvbWlzZSBzY29wZSAqL1xuICAgICAgICAgICAgY29uc3QgZm4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53ZG9zYm94UHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgbW9kdWxlLm9uZXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2V0VGltZW91dChmbiwgMSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIElmIGRvc2JveCBpcyBub3QgeWV0IHJlc29sdmVkLCB0aGVuOlxuICAgIHByaXZhdGUgY29tcGlsZURvc0JveCh1cmw6IHN0cmluZywgY2FjaGU6IElDYWNoZSwgbW9kdWxlOiBEb3NNb2R1bGUpIHtcbiAgICAgICAgY29uc3QgYnVpbGRUb3RhbCA9IEJ1aWxkLndhc21TaXplICsgQnVpbGQuanNTaXplO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd2FzbVVybCA9IHVybC5yZXBsYWNlKFwiLmpzXCIsIFwiLndhc20uanNcIik7XG5cbiAgICAgICAgICAgIC8vICogSG9zdCBkb3dubG9hZHMgYHdkb3Nib3hgIGFzbSArIGpzIHNjcmlwdHNcbiAgICAgICAgICAgIG5ldyBYaHIod2FzbVVybCwge1xuICAgICAgICAgICAgICAgIGNhY2hlLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogXCJhcnJheWJ1ZmZlclwiLFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiAodG90YWwsIGxvYWRlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kdWxlLm9ucHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5vbnByb2dyZXNzKFwiUmVzb2x2aW5nIERvc0JveFwiLCBidWlsZFRvdGFsLCBsb2FkZWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWlsOiAodXJsOiBzdHJpbmcsIHN0YXR1czogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiQ2FuJ3QgZG93bmxvYWQgd2FzbSwgY29kZTogXCIgKyBzdGF0dXMgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIsIG1lc3NhZ2U6IFwiICsgbWVzc2FnZSArIFwiLCB1cmw6IFwiICsgdXJsKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXNwb25zZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vICogQ29tcGlsZSBkb3Nib3ggd2FzbSBtb2R1bGVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IFdlYkFzc2VtYmx5LmNvbXBpbGUocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbnJlamVjdCA9IChyZWFzb246IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlYXNvbiArIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLmNhdGNoKG9ucmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKCh3YXNtTW9kdWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbC5leHBvcnRzLmluc3RhbnRpYXRlV2FzbSA9IChpbmZvOiBhbnksIHJlY2VpdmVJbnN0YW5jZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5lbnYuZ2xvYmFsc2NhbGwgPSAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZHVsZS5vbmdsb2JhbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5vbmdsb2JhbHMuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICogIEluc3RhbmlhdGUgaXQgZm9yIGVhY2ggbmV3IGRvc2JveCBydW50aW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKHdhc21Nb2R1bGUsIGluZm8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChvbnJlamVjdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGluc3RhbmNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlSW5zdGFuY2UoaW5zdGFuY2UsIHdhc21Nb2R1bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBYaHIodXJsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6ICh0b3RhbCwgbG9hZGVkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2R1bGUub25wcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlLm9ucHJvZ3Jlc3MoXCJSZXNvbHZpbmcgRG9zQm94XCIsIGJ1aWxkVG90YWwsIEJ1aWxkLndhc21TaXplICsgbG9hZGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbDogKHVybDogc3RyaW5nLCBzdGF0dXM6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcIkNhbid0IGRvd25sb2FkIHdkb3Nib3guanMsIGNvZGU6IFwiICsgc3RhdHVzICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLCBtZXNzYWdlOiBcIiArIG1lc3NhZ2UgKyBcIiwgdXJsOiBcIiArIHVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiAocmVzcG9uc2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGUub25wcm9ncmVzcyhcIlJlc29sdmluZyBEb3NCb3hcIiwgYnVpbGRUb3RhbCwgYnVpbGRUb3RhbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgKz1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tZXZhbCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmFsLmNhbGwod2luZG93LCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRzbGludDplbmFibGU6bm8tZXZhbCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMuZ2xvYmFsLmV4cG9ydHMuV0RPU0JPWCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxufVxuXG5leHBvcnQgY29uc3QgSG9zdCA9IG5ldyBEb3NIb3N0KCk7XG4iLCIvLyAjIERvc01vZHVsZVxuLy8gRG9zTW9kdWxlIGlzIFtlbXNjcmlwdGVuIG1vZHVsZSBvYmplY3RdKGh0dHBzOi8va3JpcGtlbi5naXRodWIuaW8vZW1zY3JpcHRlbi1zaXRlL2RvY3MvYXBpX3JlZmVyZW5jZS9tb2R1bGUuaHRtbCksXG4vLyB3aXRoIGFkZGl0aW9uYWwgZnVuY3Rpb25hbGl0eVxuaW1wb3J0IHsgRG9zUnVudGltZSB9IGZyb20gXCIuL2pzLWRvc1wiO1xuaW1wb3J0IHsgQnVpbGQgfSBmcm9tIFwiLi9qcy1kb3MtYnVpbGRcIjtcbmltcG9ydCB7IERvc0NvbW1hbmRJbnRlcmZhY2UgfSBmcm9tIFwiLi9qcy1kb3MtY2lcIjtcbmltcG9ydCB7IGpzZG9zY29uZiB9IGZyb20gXCIuL2pzLWRvcy1jb25mXCI7XG5pbXBvcnQgeyBEb3NGUyB9IGZyb20gXCIuL2pzLWRvcy1mc1wiO1xuaW1wb3J0IHsgRG9zT3B0aW9ucyB9IGZyb20gXCIuL2pzLWRvcy1vcHRpb25zXCI7XG5pbXBvcnQgeyBEb3NVaSB9IGZyb20gXCIuL2pzLWRvcy11aVwiO1xuXG5leHBvcnQgY2xhc3MgRG9zTW9kdWxlIGV4dGVuZHMgRG9zT3B0aW9ucyB7XG4gICAgcHVibGljIGlzVmFsaWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwdWJsaWMgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCA9IG51bGw7XG4gICAgcHVibGljIHZlcnNpb24gPSBCdWlsZC52ZXJzaW9uO1xuICAgIHB1YmxpYyBvbmdsb2JhbHM/OiAoLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG5cbiAgICBwcml2YXRlIGNpOiBQcm9taXNlPERvc0NvbW1hbmRJbnRlcmZhY2U+ID0gbnVsbDtcbiAgICBwcml2YXRlIGluc3RhbmNlOiBhbnk7XG4gICAgcHJpdmF0ZSBmczogRG9zRlMgPSBudWxsO1xuICAgIHByaXZhdGUgdWk6IERvc1VpID0gbnVsbDtcbiAgICBwcml2YXRlIG9ucmVhZHk6IChydW50aW1lOiBEb3NSdW50aW1lKSA9PiB2b2lkO1xuXG4gICAgcHJpdmF0ZSB0aWNrTGlzdGVuZXJzOiBBcnJheTwgKCkgPT4gdm9pZCA+ID0gW107XG4gICAgcHJpdmF0ZSBwYXVzZUxpc3RlbmVyczogQXJyYXk8ICgpID0+IHZvaWQgPiA9IFtdO1xuICAgIHByaXZhdGUgcmVzdW1lTGlzdGVuZXJzOiBBcnJheTwgKCkgPT4gdm9pZCA+ID0gW107XG4gICAgcHJpdmF0ZSB0ZXJtaW5hdGVMaXN0ZW5lcnM6IEFycmF5PCAoKSA9PiB2b2lkID4gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIG9ucmVhZHk6IChydW50aW1lOiBEb3NSdW50aW1lKSA9PiB2b2lkKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgICAgICB0aGlzLm9ucmVhZHkgPSBvbnJlYWR5O1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJEZWZhdWx0TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RlckRlZmF1bHRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGxldCBoaWRkZW46IHN0cmluZztcbiAgICAgICAgbGV0IHZpc2liaWxpdHlDaGFuZ2U6IHN0cmluZztcblxuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50LmhpZGRlbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgaGlkZGVuID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSBcInZpc2liaWxpdHljaGFuZ2VcIjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgKGRvY3VtZW50IGFzIGFueSkubW96SGlkZGVuICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBoaWRkZW4gPSBcIm1vekhpZGRlblwiO1xuICAgICAgICAgICAgdmlzaWJpbGl0eUNoYW5nZSA9IFwibW96dmlzaWJpbGl0eWNoYW5nZVwiO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiAoZG9jdW1lbnQgYXMgYW55KS5tc0hpZGRlbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgaGlkZGVuID0gXCJtc0hpZGRlblwiO1xuICAgICAgICAgICAgdmlzaWJpbGl0eUNoYW5nZSA9IFwibXN2aXNpYmlsaXR5Y2hhbmdlXCI7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChkb2N1bWVudCBhcyBhbnkpLndlYmtpdEhpZGRlbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgaGlkZGVuID0gXCJ3ZWJraXRIaWRkZW5cIjtcbiAgICAgICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSBcIndlYmtpdHZpc2liaWxpdHljaGFuZ2VcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIodmlzaWJpbGl0eUNoYW5nZSwgKCkgPT4ge1xuICAgICAgICAgICAgKGRvY3VtZW50IGFzIGFueSlbaGlkZGVuXSA/IHRoaXMucGF1c2UoKSA6IHRoaXMucmVzdW1lKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLCAoKSA9PiB7XG4gICAgICAgICAgIHRoaXMudGVybWluYXRlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vICMjIyBsb2dnaW5nXG4gICAgLy8gRG9zTW9kdWxlIGltcGxlbWVudHMgc2ltcGx5IGxvZ2dpbmcgZmVhdHVyZXM6XG4gICAgLy8gYGRlYnVnYCwgYGluZm9gLCBgd2FybmAsIGBlcnJvcmAgbWV0aG9kc1xuICAgIHB1YmxpYyBkZWJ1ZyhtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5sb2coXCJbREVCVUddIFwiICsgbWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGluZm8obWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubG9nKFwiW0lORk9dIFwiICsgbWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHdhcm4obWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubG9nKFwiW1dBUk5dIFwiICsgbWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGVycm9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICB0aGlzLmxvZyhcIltFUlJPUl0gXCIgKyBtZXNzYWdlKTtcbiAgICB9XG5cbiAgICAvLyAjIyMgb25kb3Nib3hcbiAgICBwdWJsaWMgb25kb3Nib3goZG9zYm94OiBhbnksIGluc3RhbnRpYXRlV2FzbTogYW55KSB7XG4gICAgICAgIHRoaXMuaW5mbyhcIkRvc0JveCByZXNvbHZlZFwiKTtcbiAgICAgICAgKHRoaXMgYXMgYW55KS5pbnN0YW50aWF0ZVdhc20gPSBpbnN0YW50aWF0ZVdhc207XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgZG9zYm94KHRoaXMpO1xuICAgIH1cbiAgICAvLyBNZXRob2QgYG9uZG9zYm94YCBpcyBjYWxsZWQgd2hlblxuICAgIC8vIFtIb3N0XShodHRwczovL2pzLWRvcy5jb20vNi4yMi9kb2NzL2FwaS9nZW5lcmF0ZS5odG1sP3BhZ2U9anMtZG9zLWhvc3QpIGlzIHJlc29sdmVkLlxuICAgIC8vIFRoaXMgbWV0aG9kIGluc3RhbmlhdGUgd2FzbSBkb3Nib3ggbW9kdWxlIHdpdGggYHRoaXNgIGFzIGVtc2NyaXB0ZW5cbiAgICAvLyBtb2R1bGUgb2JqZWN0LiBJdCBtZWFucyB0aGF0IGVtc2NyaXB0ZW4gd2lsbCBjYWxsXG4gICAgLy8gYHRoaXMub25SdW50aW1lSW5pdGlhbGl6ZWRgIHdoZW4gcnVudGltZSB3aWxsIGJlIHJlYWR5XG5cbiAgICBwdWJsaWMgcmVzb2x2ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLndkb3Nib3hVcmwpIHtcbiAgICAgICAgICAgIHRoaXMud2Rvc2JveFVybCA9IFwid2Rvc2JveC5qc1wiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmxvZykge1xuICAgICAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tY29uc29sZSAqL1xuICAgICAgICAgICAgdGhpcy5sb2cgPSAobWVzc2FnZTogc3RyaW5nKSA9PiBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5jYW52YXMpIHtcbiAgICAgICAgICAgIHRoaXMub25lcnJvcihcImNhbnZhcyBmaWVsZCBpcyByZXF1aXJlZCwgYnV0IG5vdCBzZXQhXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm9ucHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIHRoaXMudWkgPSBuZXcgRG9zVWkodGhpcyk7XG4gICAgICAgICAgICB0aGlzLm9ucHJvZ3Jlc3MgPSAoc3RhZ2UsIHRvdGFsLCBsb2FkZWQpID0+IHRoaXMudWkub25wcm9ncmVzcyhzdGFnZSwgdG90YWwsIGxvYWRlZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAjIyMgc2RsIGRlZmF1bHRzXG4gICAgICAgIC8vIERvc01vZHVsZSBvdmVycmlkZXMgZGVmYXVsdHMgZm9yIGVtc2NyaXB0ZW4gU0RMIHdyYXBwZXJcbiAgICAgICAgLy8gZm9yIG1heGltdW0gcGVyZm9ybWFuY2VcbiAgICAgICAgKHRoaXMgYXMgYW55KS5TREwgPSB7XG4gICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgIHdpZGh0OiAzMjAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyMDAsXG4gICAgICAgICAgICAgICAgY29weU9uTG9jazogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGlzY2FyZE9uTG9jazogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvcGFxdWVGcm9udEJ1ZmZlcjogZmFsc2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuaXNWYWxpZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gIyMjIG9uUnVudGltZUluaXRpYWxpemVkXG4gICAgcHVibGljIG9uUnVudGltZUluaXRpYWxpemVkKCkge1xuICAgICAgICBjb25zdCBtYWluRm4gPSAoYXJncz86IHN0cmluZ1tdKSA9PiB7XG4gICAgICAgICAgICAvLyBXaGVuIGVtc2NyaXB0ZW4gcnVudGltZSBpcyBpbml0aWFsaXplZCBhbmQgbWFpblxuICAgICAgICAgICAgLy8gZnVuY3Rpb24gaXMgY2FsbGVkOlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICogRG9zTW9kdWxlIGRldGFjaCBbYXV0byB1aV0oaHR0cHM6Ly9qcy1kb3MuY29tLzYuMjIvZG9jcy9hcGkvZ2VuZXJhdGUuaHRtbD9wYWdlPWpzLWRvcy11aSlcbiAgICAgICAgICAgIGlmICh0aGlzLnVpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51aS5kZXRhY2goKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVpID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFhcmdzKSB7XG4gICAgICAgICAgICAgICAgYXJncyA9IFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmZzLmNoZGlyKFwiL1wiKTtcblxuICAgICAgICAgICAgLy8gKiBXcml0ZSBkZWZhdWx0IFtkb3Nib3guY29uZl0oaHR0cHM6Ly9qcy1kb3MuY29tLzYuMjIvZG9jcy9hcGkvZ2VuZXJhdGUuaHRtbD9wYWdlPWpzLWRvcy1jb25mKVxuICAgICAgICAgICAgLy8gZmlsZSB0byB1c2VyIGRpcmVjdG9yeVxuICAgICAgICAgICAgdGhpcy5mcy5jcmVhdGVGaWxlKFwiL2hvbWUvd2ViX3VzZXIvLmRvc2JveC9kb3Nib3gtanNkb3MuY29uZlwiLCBqc2Rvc2NvbmYpO1xuICAgICAgICAgICAgLy8gKiBNb3VudCBlbXNjcmlwdGVuIEZTIGFzIGRyaXZlIGM6XG4gICAgICAgICAgICBhcmdzLnVuc2hpZnQoXCItdXNlcmNvbmZcIiwgXCItY1wiLCBcIm1vdW50IGMgLlwiLCBcIi1jXCIsIFwiYzpcIik7XG4gICAgICAgICAgICAvLyAqIFJ1biBkb3Nib3ggd2l0aCBwYXNzZWQgYXJndW1lbnRzIGFuZCByZXNvbHZlXG4gICAgICAgICAgICAvLyBbRG9zQ29tbWFuZEludGVyZmFjZV0oaHR0cHM6Ly9qcy1kb3MuY29tLzYuMjIvZG9jcy9hcGkvZ2VuZXJhdGUuaHRtbD9wYWdlPWpzLWRvcy1jaSlcbiAgICAgICAgICAgICh0aGlzIGFzIGFueSkuY2FsbE1haW4oYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8RG9zQ29tbWFuZEludGVyZmFjZT4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgRG9zQ29tbWFuZEludGVyZmFjZSh0aGlzLCAoY2k6IERvc0NvbW1hbmRJbnRlcmZhY2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjaSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mcyA9IG5ldyBEb3NGUyh0aGlzKTtcbiAgICAgICAgdGhpcy5vbnJlYWR5KHtcbiAgICAgICAgICAgIGZzOiB0aGlzLmZzLFxuICAgICAgICAgICAgbWFpbjogbWFpbkZuLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAjIyMgcmVnaXN0ZXJUaWNrTGlzdGVuZXJcbiAgICAvLyByZWdpc3RyZWQgdGljayBsaXN0ZW5lciBpdCB3aWxsIGJlIGNhbGxlZCBlYWNoIGZyYW1lXG4gICAgcHVibGljIHJlZ2lzdGVyVGlja0xpc3RlbmVyKGxpc3RlbmVyOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMudGlja0xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAvLyAjIyMgcmVnaXN0ZXJQYXVzZUxpc3RlbmVyXG4gICAgLy8gcmVnaXN0cmVkIHRpY2sgbGlzdGVuZXIgaXQgd2lsbCBiZSBjYWxsZWQgZWFjaCBmcmFtZVxuICAgIHB1YmxpYyByZWdpc3RlclBhdXNlTGlzdGVuZXIobGlzdGVuZXI6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy5wYXVzZUxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAvLyAjIyMgcmVnaXN0ZXJSZXN1bWVMaXN0ZW5lclxuICAgIC8vIHJlZ2lzdHJlZCB0aWNrIGxpc3RlbmVyIGl0IHdpbGwgYmUgY2FsbGVkIGVhY2ggZnJhbWVcbiAgICBwdWJsaWMgcmVnaXN0ZXJSZXN1bWVMaXN0ZW5lcihsaXN0ZW5lcjogKCkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLnJlc3VtZUxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAvLyAjIyMgcmVnaXN0ZXJUZXJtaW5hdGVMaXN0ZW5lclxuICAgIC8vIHJlZ2lzdHJlZCB0aWNrIGxpc3RlbmVyIGl0IHdpbGwgYmUgY2FsbGVkIGVhY2ggZnJhbWVcbiAgICBwdWJsaWMgcmVnaXN0ZXJUZXJtaW5hdGVMaXN0ZW5lcihsaXN0ZW5lcjogKCkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLnRlcm1pbmF0ZUxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAvLyAjIyMgdGlja1xuICAgIC8vIHRpY2sgaXMgY2FsbGVkIGludGVybmFsbHkgZWFjaCBmcmFtZSwgbm8gbmVlZCB0byBjYWxsXG4gICAgLy8gaXQgbWFudWFsbHlcbiAgICBwdWJsaWMgdGljaygpIHtcbiAgICAgICAgZm9yIChjb25zdCBsIG9mIHRoaXMudGlja0xpc3RlbmVycykge1xuICAgICAgICAgICAgbCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gIyMjIHBhdXNlXG4gICAgLy8gcGF1c2UgaXMgY2FsbGVkIHdoZW4gZG9zYm94IHRhYiBiZWNhbWUgaW5hY3RpdmVcbiAgICBwdWJsaWMgcGF1c2UoKSB7XG4gICAgICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLnBhdXNlTGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBsKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjIyMgdGlja1xuICAgIC8vIHJlc3VtZSBpcyBjYWxsZWQgd2hlbiBkb3Nib3ggdGFiIGJlY2FtZSBhY3RpdmVcbiAgICBwdWJsaWMgcmVzdW1lKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGwgb2YgdGhpcy5yZXN1bWVMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vICMjIyB0aWNrXG4gICAgLy8gdGVybWluYXRlIGlzIGNhbGxlZCB3aGVuIGRvc2JveCB0YWIgaXMgY2xvc2VkXG4gICAgcHVibGljIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgZm9yIChjb25zdCBsIG9mIHRoaXMudGVybWluYXRlTGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBsKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbiIsIi8vICMgRG9zT3B0aW9uc1xuLy8gSXMgYSBvcHRpb25zIG9iamVjdCB0aGF0IHlvdSBwYXNzIHRvIGNvbnN0cnVjdG9yIG9mXG4vLyBbRG9zXShodHRwczovL2pzLWRvcy5jb20vNi4yMi9kb2NzL2FwaS9nZW5lcmF0ZS5odG1sP3BhZ2U9anMtZG9zKVxuLy8gY2xhc3MsIHRvIGNvbmZpZ3VyZSBlbXVsYXRpb24gbGF5ZXJcbmltcG9ydCB7IERvc0NvbW1hbmRJbnRlcmZhY2UgfSBmcm9tIFwiLi9qcy1kb3MtY2lcIjtcbmltcG9ydCB7IERvc0ZTIH0gZnJvbSBcIi4vanMtZG9zLWZzXCI7XG5cbmV4cG9ydCBjbGFzcyBEb3NPcHRpb25zIHtcblxuICAgIC8vICMjIyBvbnByb2dyZXNzXG4gICAgcHVibGljIG9ucHJvZ3Jlc3M/OiAoc3RhZ2U6IHN0cmluZywgdG90YWw6IG51bWJlciwgbG9hZGVkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgLy8gcHJvZ3Jlc3MgZXZlbnQgbGlzdGVuZXIsIGl0IGlzIGZpcmVkIHdoZW4gbG9hZGluZyBwcm9ncmVzcyBpcyBjaGFuZ2VkXG4gICAgLy8gaWYgdGhpcyBmdW5jdGlvbiBpcyBub3Qgc2V0LCB0aGVuXG4gICAgLy8gW2F1dG8gdWldKGh0dHBzOi8vanMtZG9zLmNvbS82LjIyL2RvY3MvYXBpL2dlbmVyYXRlLmh0bWw/cGFnZT1qcy1kb3MtdWkpIHdpbGwgYmUgdXNlZFxuICAgIC8vIHRvIHNob3cgcHJvZ3Jlc3NcbiAgICAvL1xuICAgIC8vICogYHN0YWdlYCAtIGN1cnJlbnQgbG9hZGluZyBzdGFnZVxuICAgIC8vICogYHRvdGFsYCAtIHRvdGFsIGJ5dGVzIHRvIGRvd25sb2FkIG9uIGN1cnJlbnQgc3RhZ2VcbiAgICAvLyAqIGBsb2FkZWRgIC0gZG93bmxvYWRlZCBieXRlc1xuXG4gICAgLy8gIyMjIG9uZXJyb3JcbiAgICBwdWJsaWMgb25lcnJvcj86IChtZXNzYWdlOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgLy8gdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiBlcnJvciBoYXBwZW5zXG4gICAgLy9cbiAgICAvLyAqIGBtZXNzYWdlYCAtIGluZm9tYXRpb24gYWJvdXQgZXJyb3JcblxuICAgIC8vICMjIyBsb2dcbiAgICBwdWJsaWMgbG9nPzogKG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZDtcbiAgICAvLyB5b3UgY2FuIHByb3ZpZGUgbG9nIGZ1bmN0aW9uLCB0byBvdmVycmlkZSBsb2dnaW5nLCBieSBkZWZhdWx0IGpzLWRvcyB1c2VzIGNvbnNvbGUubG9nIGFzIGltcGxlbWVudGF0aW9uXG5cbiAgICAvLyAjIyMgd2Rvc2JveFVybFxuICAgIHB1YmxpYyB3ZG9zYm94VXJsPzogc3RyaW5nO1xuICAgIC8vIHlvdSBjYW4gc2V0IGFsdGVybmF0aXZlIHVybCBmb3IgZG93bmxvYWRpbmcganMtZG9zIHNjcmlwdCwgZGVmYXVsdCBpcyAnd2Rvc2JveC5qcydcblxufVxuIiwiLy8gIyBKc0Rvc1VpXG4vLyBPcHRpb25hbCB1aSBtb2R1bGUgZm9yIGpzLWRvcy5cbi8vIFRoaXMgdWkgd2lsbCBiZSBhcHBsaWVkIGlmIGNsaWVudCBkaWQgbm90IHNldCBgb25wcm9ncmVzc2AgaW5cbi8vIFtEb3NPcHRpb25zXShodHRwczovL2pzLWRvcy5jb20vNi4yMi9kb2NzL2FwaS9nZW5lcmF0ZS5odG1sP3BhZ2U9anMtZG9zLW9wdGlvbnMpXG5pbXBvcnQgeyBEb3NNb2R1bGUgfSBmcm9tIFwiLi9qcy1kb3MtbW9kdWxlXCI7XG5cbmV4cG9ydCBjbGFzcyBEb3NVaSB7XG4gICAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICAgIHByaXZhdGUgZG9zOiBEb3NNb2R1bGU7XG5cbiAgICBwcml2YXRlIG92ZXJsYXk6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgbG9hZGVyTWVzc2FnZTogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBoaWRkZW46IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihkb3M6IERvc01vZHVsZSkge1xuICAgICAgICB0aGlzLmRvcyA9IGRvcztcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb3MuY2FudmFzO1xuXG4gICAgICAgIC8vICMjIyBIb3cgaXQgd29ya3NcbiAgICAgICAgLy8gVGhpcyB1aSByZXBsYWNlIGNhbnZhcyBlbGVtZW50IHdpdGggZGl2IC5kb3Nib3gtY29udGFpbmVyLFxuICAgICAgICAvLyB0aGF0IGNvbnRhaW5zIG9yaWdpbmFsIGNhbnZhcyBhbmQgLmRvc2JveC1vdmVybGF5IGFzIGNoaWxkcmVuXG4gICAgICAgIC8vIFlvdSBjYW4gY2hhbmdlIHN0eWxlIG9mIHVpIGJ5IGVkaXRpbmcgY3NzIGZvciB0aGlzIHR3byBjbGFzc2VzXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImpzLWRvcy11aS1jc3NcIikgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSBhcyBIVE1MU3R5bGVFbGVtZW50O1xuICAgICAgICAgICAgICAgIHN0eWxlLmlkID0gXCJqcy1kb3MtdWktY3NzXCI7XG4gICAgICAgICAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gdGhpcy5jc3M7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmNhbnZhcy5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSAhPT0gXCJkb3Nib3gtY29udGFpbmVyXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcImRvc2JveC1jb250YWluZXJcIjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuY2FudmFzLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChjb250YWluZXIsIHRoaXMuY2FudmFzKTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgb3ZlcmxheS5jbGFzc05hbWUgPSBcImRvc2JveC1vdmVybGF5XCI7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuXG4gICAgICAgICAgICAgICAgb3ZlcmxheS5pbm5lckhUTUwgPSB0aGlzLm92ZXJsYXlIdG1sO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNhbnZhcy5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5ID0gdGhpcy5jaGlsZEJ5SWQoY29udGFpbmVyLCBcImRvc2JveC1vdmVybGF5XCIpO1xuICAgICAgICAgICAgdGhpcy5sb2FkZXJNZXNzYWdlID0gdGhpcy5jaGlsZEJ5SWQodGhpcy5vdmVybGF5LCBcImRvc2JveC1sb2FkZXItbWVzc2FnZVwiKTtcblxuICAgICAgICAgICAgdGhpcy5oaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMub25wcm9ncmVzcyA9IHRoaXMub25wcm9ncmVzc0ZhbGxiYWNrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG9ucHJvZ3Jlc3Moc3RhZ2U6IHN0cmluZywgdG90YWw6IG51bWJlciwgbG9hZGVkOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHN0YWdlICsgXCIgXCIgKyBNYXRoLnJvdW5kKGxvYWRlZCAqIDEwMCAvIHRvdGFsICogMTApIC8gMTAgKyBcIiVcIjtcbiAgICAgICAgdGhpcy5sb2FkZXJNZXNzYWdlLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMuZG9zLmluZm8obWVzc2FnZSk7XG5cbiAgICAgICAgaWYgKGxvYWRlZCA+PSB0b3RhbCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBkZXRhY2goKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB0aGlzLm9ucHJvZ3Jlc3MgPSB0aGlzLm9ucHJvZ3Jlc3NGYWxsYmFjaztcbiAgICB9XG5cbiAgICBwdWJsaWMgaGlkZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGlkZGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oaWRkZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLm92ZXJsYXkuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBub25lXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzaG93KCkge1xuICAgICAgICBpZiAoIXRoaXMuaGlkZGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vdmVybGF5LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiZGlzcGxheTogYmxvY2tcIik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbnByb2dyZXNzRmFsbGJhY2soc3RhZ2U6IHN0cmluZywgdG90YWw6IG51bWJlciwgbG9hZGVkOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5kb3MuaW5mbyhzdGFnZSArIFwiIFwiICsgbG9hZGVkICogMTAwIC8gdG90YWwgKyBcIiVcIik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjaGlsZEJ5SWQocGFyZW50OiBFbGVtZW50LCBjbGFzc05hbWU6IHN0cmluZykge1xuICAgICAgICBpZiAocGFyZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyZW50LmNoaWxkRWxlbWVudENvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IHBhcmVudC5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5jbGFzc05hbWUgPT09IGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZCBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2hpbGQgPSB0aGlzLmNoaWxkQnlJZChjaGlsZCwgY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIGlmIChjaGlsZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZCBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vICMjIyBTdHlsZVxuICAgIC8qIHRzbGludDpkaXNhYmxlOm1lbWJlci1vcmRlcmluZyAqL1xuICAgIC8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuICAgIHByaXZhdGUgY3NzOiBzdHJpbmcgPSBgXG4gICAgLmRvc2JveC1jb250YWluZXIgeyBwb3NpdGlvbjogcmVsYXRpdmU7IG1pbi13aWR0aDogMzIwcHg7IG1pbi1oZWlnaHQ6IDIwMHB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IH1cbiAgICAuZG9zYm94LW92ZXJsYXksIC5kb3Nib3gtbG9hZGVyIHsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwOyByaWdodDogMDsgdG9wOiAwOyBib3R0b206IDA7IGJhY2tncm91bmQtY29sb3I6IHJnYmEoNTEsIDUxLCA1MSwgMC43KTsgfVxuICAgIC5kb3Nib3gtc3RhcnQgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogNTAlOyBjb2xvcjogI2Y4MDsgZm9udC1zaXplOiAxLjVlbTsgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IGN1cnNvcjogcG9pbnRlcjsgfVxuICAgIC5kb3Nib3gtb3ZlcmxheSBhIHsgY29sb3I6ICNmODA7IH1cbiAgICAuZG9zYm94LXBvd2VyZWQgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHJpZ2h0OiAxZW07IGJvdHRvbTogMWVtOyBmb250LXNpemU6IDAuOGVtOyBjb2xvcjogIzlDOUM5QzsgfVxuICAgIC5kb3Nib3gtbG9hZGVyLW1lc3NhZ2UgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogNTAlOyBtYXJnaW46IDAgMCAtM2VtIDA7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGNvbG9yOiAjZjgwOyBmb250LXNpemU6IDEuNWVtOyB9XG4gICAgQC1tb3ota2V5ZnJhbWVzIGxvYWRpbmcgeyAwJSB7IGxlZnQ6IDA7IH0gNTAlIHsgbGVmdDogOC4zMzMzM2VtOyB9IDEwMCUgeyBsZWZ0OiAwOyB9IH0gQC13ZWJraXQta2V5ZnJhbWVzIGxvYWRpbmcgeyAwJSB7IGxlZnQ6IDA7IH0gNTAlIHsgbGVmdDogOC4zMzMzM2VtOyB9IDEwMCUgeyBsZWZ0OiAwOyB9IH0gQGtleWZyYW1lcyBsb2FkaW5nIHsgMCUgeyBsZWZ0OiAwOyB9IDUwJSB7IGxlZnQ6IDguMzMzMzNlbTsgfSAxMDAlIHsgbGVmdDogMDsgfSB9IC5zdC1sb2FkZXIgeyB3aWR0aDogMTBlbTsgaGVpZ2h0OiAyLjVlbTsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDUwJTsgbGVmdDogNTAlOyBtYXJnaW46IC0xLjI1ZW0gMCAwIC01ZW07IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH1cbiAgICAuc3QtbG9hZGVyOmJlZm9yZSwgLnN0LWxvYWRlcjphZnRlciB7IGNvbnRlbnQ6IFwiXCI7IGRpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgYm90dG9tOiAwOyB3aWR0aDogMS4yNWVtOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBib3JkZXI6IDAuMjVlbSBzb2xpZCAjZjgwOyB9XG4gICAgLnN0LWxvYWRlcjpiZWZvcmUgeyBsZWZ0OiAtMC43NjkyM2VtOyBib3JkZXItcmlnaHQ6IDA7IH1cbiAgICAuc3QtbG9hZGVyOmFmdGVyIHsgcmlnaHQ6IC0wLjc2OTIzZW07IGJvcmRlci1sZWZ0OiAwOyB9XG4gICAgLnN0LWxvYWRlciAuZXF1YWwgeyBkaXNwbGF5OiBibG9jazsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDUwJTsgbWFyZ2luLXRvcDogLTAuNWVtOyBsZWZ0OiA0LjE2NjY3ZW07IGhlaWdodDogMWVtOyB3aWR0aDogMS42NjY2N2VtOyBib3JkZXI6IDAuMjVlbSBzb2xpZCAjZjgwOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBib3JkZXItd2lkdGg6IDAuMjVlbSAwOyAtbW96LWFuaW1hdGlvbjogbG9hZGluZyAxLjVzIGluZmluaXRlIGVhc2UtaW4tb3V0OyAtd2Via2l0LWFuaW1hdGlvbjogbG9hZGluZyAxLjVzIGluZmluaXRlIGVhc2UtaW4tb3V0OyBhbmltYXRpb246IGxvYWRpbmcgMS41cyBpbmZpbml0ZSBlYXNlLWluLW91dDsgYmFja2dyb3VuZDogI2Y4MDsgfVxuICAgIGA7XG5cbiAgICAvLyAjIyMgVGVtcGxhdGVcbiAgICAvKiB0c2xpbnQ6ZGlzYWJsZTptZW1iZXItb3JkZXJpbmcgKi9cbiAgICAvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbiAgICBwcml2YXRlIG92ZXJsYXlIdG1sOiBzdHJpbmcgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJkb3Nib3gtbG9hZGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3QtbG9hZGVyXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcXVhbFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRvc2JveC1sb2FkZXItbWVzc2FnZVwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRvc2JveC1wb3dlcmVkXCI+XG4gICAgICAgICAgICBQb3dlcmVkIGJ5ICZuYnNwOzxhIGhyZWY9XCJodHRwczovL2pzLWRvcy5jb21cIj5qcy1kb3MuY29tPC9hPiAoNi4yMilcbiAgICAgICAgPC9kaXY+XG4gICAgYDtcbn1cbiIsImltcG9ydCB7IElDYWNoZSB9IGZyb20gXCIuL2pzLWRvcy1jYWNoZVwiO1xuaW1wb3J0IENhY2hlTm9vcCBmcm9tIFwiLi9qcy1kb3MtY2FjaGUtbm9vcFwiO1xuXG4vLyAjIFhoclxuLy8gYFhocmAgaXMgc21hbGwgd3JhcHBlciBvdmVyIFhNTEh0dHBSZXF1ZXN0LCB0aGF0IHByb3ZpZGVzIHNvbWVcbi8vIGhhbmR5IG1ldGhvZHNcblxuLy8gWW91IGNhbiBjb25maWdyZSBYaHIgd2l0aCBYaHJPcHRpb25zIG9iamVjdDpcbmludGVyZmFjZSBYaHJPcHRpb25zIHtcbiAgICBjYWNoZTogSUNhY2hlO1xuICAgIG1ldGhvZD86IHN0cmluZztcbiAgICBzdWNjZXNzPzogKHJlc3BvbnNlOiBhbnkpID0+IHZvaWQ7XG4gICAgcHJvZ3Jlc3M/OiAodG90YWw6IG51bWJlciwgbG9hZGVkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgZmFpbD86ICh1cmw6IHN0cmluZywgc3RhdHVzOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZDtcbiAgICBkYXRhPzogc3RyaW5nO1xuICAgIHJlc3BvbnNlVHlwZT86IFhNTEh0dHBSZXF1ZXN0UmVzcG9uc2VUeXBlO1xufVxuLy8gKiBgbWV0aG9kYCAtIFwiR0VUXCIgfCBcIlBPU1RcIlxuLy8gKiBgc3VjY2Vzc2AgLSBjYWxsYmFjayB3aGVuIHJlc291cmNlIGlzIGRvd25sb2FkZWRcbi8vICogYHByb2dyZXNzYCAtIGNhbGxiYWNrIGZvciBwcm9ncmVzc1xuLy8gKiBgZmFpbGAgLSBmYWlsIGNhbGxiYWNrXG4vLyAqIGBkYXRhYCAtIGRhdGEgZm9yIFBPU1QgcmVxdWVzdCwgc2hvdWxkIHR5cGVvZiBgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkYFxuLy8gKiBgcmVzcG9uc2VUeXBlYCAtIFhNTEh0dHBSZXF1ZXN0UmVzcG9uc2VUeXBlXG5cbi8vIENsYXNzIFhociBkb2VzIG5vdCBoYXZlIGFueSBwdWJsaWMgbWV0aG9kc1xuZXhwb3J0IGNsYXNzIFhociB7XG4gICAgcHJpdmF0ZSBjYWNoZTogSUNhY2hlO1xuICAgIHByaXZhdGUgcmVzb3VyY2U6IHN0cmluZztcbiAgICBwcml2YXRlIG9wdGlvbnM6IFhock9wdGlvbnM7XG4gICAgcHJpdmF0ZSB4aHI6IFhNTEh0dHBSZXF1ZXN0O1xuICAgIHByaXZhdGUgdG90YWw6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBsb2FkZWQ6IG51bWJlciA9IDA7XG5cbiAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgb3B0aW9uczogWGhyT3B0aW9ucykge1xuICAgICAgICB0aGlzLnJlc291cmNlID0gdXJsO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLm9wdGlvbnMubWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgXCJHRVRcIjtcbiAgICAgICAgdGhpcy5jYWNoZSA9IG9wdGlvbnMuY2FjaGUgfHwgbmV3IENhY2hlTm9vcCgpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWV0aG9kICA9PT0gXCJHRVRcIikge1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5nZXQodGhpcy5yZXNvdXJjZSwgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuc3VjY2VzcyhkYXRhKTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1ha2VIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIG1ha2VIdHRwUmVxdWVzdCgpIHtcbiAgICAgICAgdGhpcy54aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgdGhpcy54aHIub3Blbih0aGlzLm9wdGlvbnMubWV0aG9kLCB0aGlzLnJlc291cmNlLCB0cnVlKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tZXRob2QgPT09IFwiUE9TVFwiKSB7XG4gICAgICAgICAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMueGhyLm92ZXJyaWRlTWltZVR5cGUoXCJ0ZXh0L3BsYWluOyBjaGFyc2V0PXgtdXNlci1kZWZpbmVkXCIpO1xuXG4gICAgICAgIGxldCBwcm9ncmVzc0xpc3RuZXI7XG4gICAgICAgIGlmICh0eXBlb2YgKHByb2dyZXNzTGlzdG5lciA9IHRoaXMueGhyKS5hZGRFdmVudExpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHByb2dyZXNzTGlzdG5lci5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSBldnQudG90YWw7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSBldnQubG9hZGVkO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5wcm9ncmVzcyhldnQudG90YWwsIGV2dC5sb2FkZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGVycm9yTGlzdGVuZXI7XG4gICAgICAgIGlmICh0eXBlb2YgKGVycm9yTGlzdGVuZXIgPSB0aGlzLnhocikuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBlcnJvckxpc3RlbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5mYWlsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5mYWlsKHRoaXMucmVzb3VyY2UsIHRoaXMueGhyLnN0YXR1cywgXCJjb25uZWN0aW9uIHByb2JsZW1cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGUgdGhpcy5vcHRpb25zLmZhaWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25SZWFkeVN0YXRlQ2hhbmdlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVzcG9uc2VUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLnhoci5yZXNwb25zZVR5cGUgPSB0aGlzLm9wdGlvbnMucmVzcG9uc2VUeXBlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMueGhyLnNlbmQodGhpcy5vcHRpb25zLmRhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25SZWFkeVN0YXRlQ2hhbmdlKCkge1xuICAgICAgICBpZiAodGhpcy54aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgaWYgKHRoaXMueGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsID0gTWF0aC5tYXgodGhpcy50b3RhbCwgdGhpcy5sb2FkZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMucHJvZ3Jlc3ModG90YWwsIHRvdGFsKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1ldGhvZCA9PT0gXCJHRVRcIiAmJiB0aGlzLnJlc291cmNlLmluZGV4T2YoXCI/XCIpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZS5wdXQodGhpcy5yZXNvdXJjZSwgdGhpcy54aHIucmVzcG9uc2UsICgpID0+IHsgLyoqLyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuc3VjY2Vzcyh0aGlzLnhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZmFpbCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5mYWlsKHRoaXMucmVzb3VyY2UsIHRoaXMueGhyLnN0YXR1cywgXCJjb25uZWN0aW9uIHByb2JsZW1cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZSB0aGlzLm9wdGlvbnMuZmFpbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxufVxuIiwiXG4vLyAjIEV4YW1wbGVcbi8vIGBgYGphdmFzY3JpcHRcbi8vIERvcyhjYW52YXMpLnJlYWR5KChmcywgbWFpbikgPT4ge1xuLy8gICAgIGZzLmV4dHJhY3QoXCJkaWdnZXIuemlwXCIpLnRoZW4oKCkgPT4ge1xuLy8gICAgICAgICBtYWluKFtcIi1jXCIsIFwiRElHR0VSLkNPTVwiXSlcbi8vICAgICB9KTtcbi8vIH0pO1xuLy8gYGBgXG4vLyBEb3MgZnVuY3Rpb24gaXMgZW50cnkgcG9pbnQgdGhhdCBwcm92aWRlcyBlbXVsYXRpb24gbGF5ZXIuXG4vLyBBcyBlbXVsYXRpb24gbGF5ZXIganMtZG9zIHVzZXMgW0Rvc0JveCBwb3J0ZWQgdG8gZW1zY3JpcHRlbl0oaHR0cHM6Ly9naXRodWIuY29tL2RyZWFtbGF5ZXJzL2VtLWRvc2JveC8jY29tcGlsaW5nKS5cblxuLy8gIyBEb3NcblxuaW1wb3J0IG9wZW5DYWNoZSBmcm9tIFwiLi9qcy1kb3MtY2FjaGVcIjtcbmltcG9ydCBDYWNoZURiIGZyb20gXCIuL2pzLWRvcy1jYWNoZS1kYlwiO1xuaW1wb3J0IENhY2hlTm9vcCBmcm9tIFwiLi9qcy1kb3MtY2FjaGUtbm9vcFwiO1xuaW1wb3J0IHsgRG9zQ29tbWFuZEludGVyZmFjZSB9IGZyb20gXCIuL2pzLWRvcy1jaVwiO1xuaW1wb3J0IHsgRG9zRlMgfSBmcm9tIFwiLi9qcy1kb3MtZnNcIjtcbmltcG9ydCB7IEhvc3QgfSBmcm9tIFwiLi9qcy1kb3MtaG9zdFwiO1xuaW1wb3J0IHsgRG9zTW9kdWxlIH0gZnJvbSBcIi4vanMtZG9zLW1vZHVsZVwiO1xuaW1wb3J0IHsgRG9zT3B0aW9ucyB9IGZyb20gXCIuL2pzLWRvcy1vcHRpb25zXCI7XG5cbi8vIFdoZW4geW91IGNhbGwgYERvcyhjYW52YXMsIG9wdGlvbnMpYCBqcy1kb3MgYmVoaW5kIHRoZSBzY2VuZSB3aWxsIGRvd25sb2FkXG4vLyBkb3Nib3ggYW5kIHByZXBhcmUgaXQgdG8gc3RhcnQuIFRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gYFByb21pc2U8RG9zUmVhZHlQcm9taXNlPmBcbi8vIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aGVuIGRvc2JveCBpcyByZWFkeS4gSW4gY2FzZSBvZiBlcnJvciBwcm9taXNlXG4vLyB3aWxsIGJlIHJlamVjdGVkLlxuLy9cbi8vICogYGNhbnZhc2A6IEhUTUxDYW52YXNFbGVtZW50IC0gdGhpcyBjYW52YXMgZWxlbWVudCBpcyB1c2VkIGFzIHdpbmRvdyBmb3IgZG9zYm94XG4vLyAqIGBvcHRpb25zYDogW0Rvc09wdGlvbnNdKGh0dHBzOi8vanMtZG9zLmNvbS82LjIyL2RvY3MvYXBpL2dlbmVyYXRlLmh0bWw/cGFnZT1qcy1kb3Mtb3B0aW9ucykgLVxuLy8gb3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3RcbmV4cG9ydCBmdW5jdGlvbiBEb3MoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgb3B0aW9ucz86IERvc09wdGlvbnMpIHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2U8RG9zUnVudGltZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBtb2R1bGUgPSBuZXcgRG9zTW9kdWxlKGNhbnZhcywgcmVzb2x2ZSk7XG5cbiAgICAgICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW9wdGlvbnMub25lcnJvcikge1xuICAgICAgICAgICAgb3B0aW9ucy5vbmVycm9yID0gKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWNvbnNvbGUgKi9cbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIC8qIHRzbGludDplbmFibGU6bm8tY29uc29sZSAqL1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5hc3NpZ24obW9kdWxlLCBvcHRpb25zKTtcblxuICAgICAgICAvLyAjIyMgRXJyb3IgaGFuZGxpbmdcbiAgICAgICAgLy8gRXJyb3IgaGFuZGxpbmcgc2hvdWxkIHN1cHBvcnQgYm90aCB3YXlzOlxuICAgICAgICAvL1xuICAgICAgICAvLyAqIFRocm91Z2ggcmVqZWN0aW5nIG9mIHByb21pc2VcbiAgICAgICAgLy8gKiBGaXJlIG9uZXJyb3IgZnVuY3Rpb24gb2YgRG9zT3B0aW9ucyBvYmplY3RcblxuICAgICAgICBjb25zdCBvbmVycm9yID0gbW9kdWxlLm9uZXJyb3I7XG4gICAgICAgIG1vZHVsZS5vbmVycm9yID0gKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICBjb25zdCBmbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob25lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBvbmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUub25lcnJvciA9IG9uZXJyb3I7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLm9uZXJyb3IgPSBtb2R1bGUuZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmbiwgMSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgbW9kdWxlLnJlc29sdmUoKTtcbiAgICAgICAgaWYgKCFtb2R1bGUuaXNWYWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgb3BlbkNhY2hlKG1vZHVsZSwgKGNhY2hlKSA9PiB7XG4gICAgICAgICAgICAvLyBTZWUgW0hvc3RdKGh0dHBzOi8vanMtZG9zLmNvbS82LjIyL2RvY3MvYXBpL2dlbmVyYXRlLmh0bWw/cGFnZT1qcy1kb3MtaG9zdClcbiAgICAgICAgICAgIC8vIHRvIHVuZGVyc3RhbmQgcmVzb2x2aW5nIG9mIGVtdWxhdGlvbiBsYXllciAoZG9zYm94KS5cbiAgICAgICAgICAgIEhvc3QucmVzb2x2ZURvc0JveChtb2R1bGUud2Rvc2JveFVybCwgY2FjaGUsIG1vZHVsZSk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbi8vICMjIyBEb3NSZWFkeVByb21pc2Vcbi8vIElzIGEgUHJvbWlzZSBvYmplY3Qgd2l0aCBhZGRpdGlvbmFsIG1ldGhvZCByZWFkeS5cbi8vIE1ldGhvZCBgcmVhZHlgIGlzIGp1c3QgYSB3cmFwcGVyIG92ZXIgYHRoZW5gIG1ldGhvZCB0aGF0XG4vLyBzcGxpdCByZXNvbHZlZCBvYmplY3QgaW50byBtZWFuaW5nZnVsIHBhcnRzLlxuXG4gICAgY29uc3QgZG9zUmVhZHlQcm9taXNlID0gKHByb21pc2UgYXMgdW5rbm93bikgYXMgRG9zUmVhZHlQcm9taXNlO1xuICAgIGRvc1JlYWR5UHJvbWlzZS5yZWFkeSA9IChvbnJlYWR5KSA9PiB7XG4gICAgICAgIGRvc1JlYWR5UHJvbWlzZS50aGVuKChydW50aW1lOiBEb3NSdW50aW1lKSA9PiB7XG4gICAgICAgICAgICBvbnJlYWR5KHJ1bnRpbWUuZnMsIHJ1bnRpbWUubWFpbik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZG9zUmVhZHlQcm9taXNlO1xuICAgIH07XG4gICAgcmV0dXJuIGRvc1JlYWR5UHJvbWlzZTtcbn1cblxuZXhwb3J0IHR5cGUgRG9zTWFpbkZuID0gKGFyZ3M/OiBzdHJpbmdbXSkgPT4gUHJvbWlzZTxEb3NDb21tYW5kSW50ZXJmYWNlPjtcblxuLy8gUGxhaW4gcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGggYERvc1J1bnRpbWVgIGludGVyZmFjZSwgdGhhdFxuLy8gaW5jbHVkZXM6XG4vL1xuLy8gKiBgZnNgOiBbRG9zRlNdKGh0dHBzOi8vanMtZG9zLmNvbS82LjIyL2RvY3MvYXBpL2dlbmVyYXRlLmh0bWw/cGFnZT1qcy1kb3MtZnMpIC1cbi8vIEFQSSBmb3Igd29ya2luZyB3aXRoIGRvc2JveCBmaWxlc3lzdGVtXG4vLyAqIGBtYWluYDogRG9zTWFpbkZuIC0gYSBmdW5jdGlvbiB0aGF0IHlvdSBzaG91bGQgY2FsbCB0byBhY3R1YWxsIHN0YXJ0XG4vLyBkb3Nib3guIEl0J3MgbGlrZSBhIG1haW4gZnVuY3Rpb24gaW4gQysrLCBvciBzaGVsbCBjb21tYW5kIGxpbmUuIFRoaXMgZnVuY3Rpb25cbi8vIHdpbGwgcmV0dXJuIFByb21pc2Ugb2YgW0Rvc0NvbW1hbmRJbnRlcmZhY2VdKGh0dHBzOi8vanMtZG9zLmNvbS82LjIyL2RvY3MvYXBpL2dlbmVyYXRlLmh0bWw/cGFnZT1qcy1kb3MtY2kpLlxuLy8gWW91IGNhbiB1c2UgaXQgdG8gY29udHJvbCBydW5uZWQgZG9zYm94LlxuZXhwb3J0IGludGVyZmFjZSBEb3NSdW50aW1lIHtcbiAgICBmczogRG9zRlM7XG4gICAgbWFpbjogRG9zTWFpbkZuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERvc1JlYWR5UHJvbWlzZSBleHRlbmRzIFByb21pc2U8RG9zUnVudGltZT4ge1xuICAgIC8vIGBvbnJlYWR5YCAtIGNhbGxiYWNrIHRoYXQgcmVjZWl2ZSBEb3NSdW50aW1lIHNwbGl0dGVkIGJ5IGZpZWxkc1xuICAgIHJlYWR5OiAob25yZWFkeTogKGZzOiBEb3NGUywgbWFpbjogRG9zTWFpbkZuKSA9PiB2b2lkKSA9PiBQcm9taXNlPERvc1J1bnRpbWU+O1xufVxuXG4od2luZG93IGFzIGFueSkuRG9zID0gRG9zO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBjb21wYXJlIGFuZCBpc0J1ZmZlciB0YWtlbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL2Jsb2IvNjgwZTllNWU0ODhmMjJhYWMyNzU5OWE1N2RjODQ0YTYzMTU5MjhkZC9pbmRleC5qc1xuLy8gb3JpZ2luYWwgbm90aWNlOlxuXG4vKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG5mdW5jdGlvbiBjb21wYXJlKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHZhciB4ID0gYS5sZW5ndGg7XG4gIHZhciB5ID0gYi5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgeCA9IGFbaV07XG4gICAgICB5ID0gYltpXTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICBpZiAoeSA8IHgpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuICByZXR1cm4gMDtcbn1cbmZ1bmN0aW9uIGlzQnVmZmVyKGIpIHtcbiAgaWYgKGdsb2JhbC5CdWZmZXIgJiYgdHlwZW9mIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihiKTtcbiAgfVxuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKTtcbn1cblxuLy8gYmFzZWQgb24gbm9kZSBhc3NlcnQsIG9yaWdpbmFsIG5vdGljZTpcblxuLy8gaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvVW5pdF9UZXN0aW5nLzEuMFxuLy9cbi8vIFRISVMgSVMgTk9UIFRFU1RFRCBOT1IgTElLRUxZIFRPIFdPUksgT1VUU0lERSBWOCFcbi8vXG4vLyBPcmlnaW5hbGx5IGZyb20gbmFyd2hhbC5qcyAoaHR0cDovL25hcndoYWxqcy5vcmcpXG4vLyBDb3B5cmlnaHQgKGMpIDIwMDkgVGhvbWFzIFJvYmluc29uIDwyODBub3J0aC5jb20+XG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvXG4vLyBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZVxuLy8gcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yXG4vLyBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTlxuLy8gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTlxuLy8gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbC8nKTtcbnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIHBTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbnZhciBmdW5jdGlvbnNIYXZlTmFtZXMgPSAoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24gZm9vKCkge30ubmFtZSA9PT0gJ2Zvbyc7XG59KCkpO1xuZnVuY3Rpb24gcFRvU3RyaW5nIChvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopO1xufVxuZnVuY3Rpb24gaXNWaWV3KGFycmJ1Zikge1xuICBpZiAoaXNCdWZmZXIoYXJyYnVmKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAodHlwZW9mIGdsb2JhbC5BcnJheUJ1ZmZlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcoYXJyYnVmKTtcbiAgfVxuICBpZiAoIWFycmJ1Zikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoYXJyYnVmIGluc3RhbmNlb2YgRGF0YVZpZXcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoYXJyYnVmLmJ1ZmZlciAmJiBhcnJidWYuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG4vLyAxLiBUaGUgYXNzZXJ0IG1vZHVsZSBwcm92aWRlcyBmdW5jdGlvbnMgdGhhdCB0aHJvd1xuLy8gQXNzZXJ0aW9uRXJyb3IncyB3aGVuIHBhcnRpY3VsYXIgY29uZGl0aW9ucyBhcmUgbm90IG1ldC4gVGhlXG4vLyBhc3NlcnQgbW9kdWxlIG11c3QgY29uZm9ybSB0byB0aGUgZm9sbG93aW5nIGludGVyZmFjZS5cblxudmFyIGFzc2VydCA9IG1vZHVsZS5leHBvcnRzID0gb2s7XG5cbi8vIDIuIFRoZSBBc3NlcnRpb25FcnJvciBpcyBkZWZpbmVkIGluIGFzc2VydC5cbi8vIG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IoeyBtZXNzYWdlOiBtZXNzYWdlLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbDogYWN0dWFsLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZCB9KVxuXG52YXIgcmVnZXggPSAvXFxzKmZ1bmN0aW9uXFxzKyhbXlxcKFxcc10qKVxccyovO1xuLy8gYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2xqaGFyYi9mdW5jdGlvbi5wcm90b3R5cGUubmFtZS9ibG9iL2FkZWVlZWM4YmZjYzYwNjhiMTg3ZDdkOWZiM2Q1YmIxZDNhMzA4OTkvaW1wbGVtZW50YXRpb24uanNcbmZ1bmN0aW9uIGdldE5hbWUoZnVuYykge1xuICBpZiAoIXV0aWwuaXNGdW5jdGlvbihmdW5jKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoZnVuY3Rpb25zSGF2ZU5hbWVzKSB7XG4gICAgcmV0dXJuIGZ1bmMubmFtZTtcbiAgfVxuICB2YXIgc3RyID0gZnVuYy50b1N0cmluZygpO1xuICB2YXIgbWF0Y2ggPSBzdHIubWF0Y2gocmVnZXgpO1xuICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2hbMV07XG59XG5hc3NlcnQuQXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiBBc3NlcnRpb25FcnJvcihvcHRpb25zKSB7XG4gIHRoaXMubmFtZSA9ICdBc3NlcnRpb25FcnJvcic7XG4gIHRoaXMuYWN0dWFsID0gb3B0aW9ucy5hY3R1YWw7XG4gIHRoaXMuZXhwZWN0ZWQgPSBvcHRpb25zLmV4cGVjdGVkO1xuICB0aGlzLm9wZXJhdG9yID0gb3B0aW9ucy5vcGVyYXRvcjtcbiAgaWYgKG9wdGlvbnMubWVzc2FnZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTtcbiAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBnZXRNZXNzYWdlKHRoaXMpO1xuICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IHRydWU7XG4gIH1cbiAgdmFyIHN0YWNrU3RhcnRGdW5jdGlvbiA9IG9wdGlvbnMuc3RhY2tTdGFydEZ1bmN0aW9uIHx8IGZhaWw7XG4gIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHN0YWNrU3RhcnRGdW5jdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgLy8gbm9uIHY4IGJyb3dzZXJzIHNvIHdlIGNhbiBoYXZlIGEgc3RhY2t0cmFjZVxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoKTtcbiAgICBpZiAoZXJyLnN0YWNrKSB7XG4gICAgICB2YXIgb3V0ID0gZXJyLnN0YWNrO1xuXG4gICAgICAvLyB0cnkgdG8gc3RyaXAgdXNlbGVzcyBmcmFtZXNcbiAgICAgIHZhciBmbl9uYW1lID0gZ2V0TmFtZShzdGFja1N0YXJ0RnVuY3Rpb24pO1xuICAgICAgdmFyIGlkeCA9IG91dC5pbmRleE9mKCdcXG4nICsgZm5fbmFtZSk7XG4gICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgLy8gb25jZSB3ZSBoYXZlIGxvY2F0ZWQgdGhlIGZ1bmN0aW9uIGZyYW1lXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYmVmb3JlIGl0IChhbmQgaXRzIGxpbmUpXG4gICAgICAgIHZhciBuZXh0X2xpbmUgPSBvdXQuaW5kZXhPZignXFxuJywgaWR4ICsgMSk7XG4gICAgICAgIG91dCA9IG91dC5zdWJzdHJpbmcobmV4dF9saW5lICsgMSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhY2sgPSBvdXQ7XG4gICAgfVxuICB9XG59O1xuXG4vLyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxudXRpbC5pbmhlcml0cyhhc3NlcnQuQXNzZXJ0aW9uRXJyb3IsIEVycm9yKTtcblxuZnVuY3Rpb24gdHJ1bmNhdGUocywgbikge1xuICBpZiAodHlwZW9mIHMgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHMubGVuZ3RoIDwgbiA/IHMgOiBzLnNsaWNlKDAsIG4pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzO1xuICB9XG59XG5mdW5jdGlvbiBpbnNwZWN0KHNvbWV0aGluZykge1xuICBpZiAoZnVuY3Rpb25zSGF2ZU5hbWVzIHx8ICF1dGlsLmlzRnVuY3Rpb24oc29tZXRoaW5nKSkge1xuICAgIHJldHVybiB1dGlsLmluc3BlY3Qoc29tZXRoaW5nKTtcbiAgfVxuICB2YXIgcmF3bmFtZSA9IGdldE5hbWUoc29tZXRoaW5nKTtcbiAgdmFyIG5hbWUgPSByYXduYW1lID8gJzogJyArIHJhd25hbWUgOiAnJztcbiAgcmV0dXJuICdbRnVuY3Rpb24nICsgIG5hbWUgKyAnXSc7XG59XG5mdW5jdGlvbiBnZXRNZXNzYWdlKHNlbGYpIHtcbiAgcmV0dXJuIHRydW5jYXRlKGluc3BlY3Qoc2VsZi5hY3R1YWwpLCAxMjgpICsgJyAnICtcbiAgICAgICAgIHNlbGYub3BlcmF0b3IgKyAnICcgK1xuICAgICAgICAgdHJ1bmNhdGUoaW5zcGVjdChzZWxmLmV4cGVjdGVkKSwgMTI4KTtcbn1cblxuLy8gQXQgcHJlc2VudCBvbmx5IHRoZSB0aHJlZSBrZXlzIG1lbnRpb25lZCBhYm92ZSBhcmUgdXNlZCBhbmRcbi8vIHVuZGVyc3Rvb2QgYnkgdGhlIHNwZWMuIEltcGxlbWVudGF0aW9ucyBvciBzdWIgbW9kdWxlcyBjYW4gcGFzc1xuLy8gb3RoZXIga2V5cyB0byB0aGUgQXNzZXJ0aW9uRXJyb3IncyBjb25zdHJ1Y3RvciAtIHRoZXkgd2lsbCBiZVxuLy8gaWdub3JlZC5cblxuLy8gMy4gQWxsIG9mIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIG11c3QgdGhyb3cgYW4gQXNzZXJ0aW9uRXJyb3Jcbi8vIHdoZW4gYSBjb3JyZXNwb25kaW5nIGNvbmRpdGlvbiBpcyBub3QgbWV0LCB3aXRoIGEgbWVzc2FnZSB0aGF0XG4vLyBtYXkgYmUgdW5kZWZpbmVkIGlmIG5vdCBwcm92aWRlZC4gIEFsbCBhc3NlcnRpb24gbWV0aG9kcyBwcm92aWRlXG4vLyBib3RoIHRoZSBhY3R1YWwgYW5kIGV4cGVjdGVkIHZhbHVlcyB0byB0aGUgYXNzZXJ0aW9uIGVycm9yIGZvclxuLy8gZGlzcGxheSBwdXJwb3Nlcy5cblxuZnVuY3Rpb24gZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCBvcGVyYXRvciwgc3RhY2tTdGFydEZ1bmN0aW9uKSB7XG4gIHRocm93IG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3Ioe1xuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgYWN0dWFsOiBhY3R1YWwsXG4gICAgZXhwZWN0ZWQ6IGV4cGVjdGVkLFxuICAgIG9wZXJhdG9yOiBvcGVyYXRvcixcbiAgICBzdGFja1N0YXJ0RnVuY3Rpb246IHN0YWNrU3RhcnRGdW5jdGlvblxuICB9KTtcbn1cblxuLy8gRVhURU5TSU9OISBhbGxvd3MgZm9yIHdlbGwgYmVoYXZlZCBlcnJvcnMgZGVmaW5lZCBlbHNld2hlcmUuXG5hc3NlcnQuZmFpbCA9IGZhaWw7XG5cbi8vIDQuIFB1cmUgYXNzZXJ0aW9uIHRlc3RzIHdoZXRoZXIgYSB2YWx1ZSBpcyB0cnV0aHksIGFzIGRldGVybWluZWRcbi8vIGJ5ICEhZ3VhcmQuXG4vLyBhc3NlcnQub2soZ3VhcmQsIG1lc3NhZ2Vfb3B0KTtcbi8vIFRoaXMgc3RhdGVtZW50IGlzIGVxdWl2YWxlbnQgdG8gYXNzZXJ0LmVxdWFsKHRydWUsICEhZ3VhcmQsXG4vLyBtZXNzYWdlX29wdCk7LiBUbyB0ZXN0IHN0cmljdGx5IGZvciB0aGUgdmFsdWUgdHJ1ZSwgdXNlXG4vLyBhc3NlcnQuc3RyaWN0RXF1YWwodHJ1ZSwgZ3VhcmQsIG1lc3NhZ2Vfb3B0KTsuXG5cbmZ1bmN0aW9uIG9rKHZhbHVlLCBtZXNzYWdlKSB7XG4gIGlmICghdmFsdWUpIGZhaWwodmFsdWUsIHRydWUsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5vayk7XG59XG5hc3NlcnQub2sgPSBvaztcblxuLy8gNS4gVGhlIGVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBzaGFsbG93LCBjb2VyY2l2ZSBlcXVhbGl0eSB3aXRoXG4vLyA9PS5cbi8vIGFzc2VydC5lcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5lcXVhbCA9IGZ1bmN0aW9uIGVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCAhPSBleHBlY3RlZCkgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQuZXF1YWwpO1xufTtcblxuLy8gNi4gVGhlIG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHdoZXRoZXIgdHdvIG9iamVjdHMgYXJlIG5vdCBlcXVhbFxuLy8gd2l0aCAhPSBhc3NlcnQubm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90RXF1YWwgPSBmdW5jdGlvbiBub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgPT0gZXhwZWN0ZWQpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICchPScsIGFzc2VydC5ub3RFcXVhbCk7XG4gIH1cbn07XG5cbi8vIDcuIFRoZSBlcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgYSBkZWVwIGVxdWFsaXR5IHJlbGF0aW9uLlxuLy8gYXNzZXJ0LmRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5kZWVwRXF1YWwgPSBmdW5jdGlvbiBkZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoIV9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgZmFsc2UpKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnZGVlcEVxdWFsJywgYXNzZXJ0LmRlZXBFcXVhbCk7XG4gIH1cbn07XG5cbmFzc2VydC5kZWVwU3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBkZWVwU3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoIV9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgdHJ1ZSkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdkZWVwU3RyaWN0RXF1YWwnLCBhc3NlcnQuZGVlcFN0cmljdEVxdWFsKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBzdHJpY3QsIG1lbW9zKSB7XG4gIC8vIDcuMS4gQWxsIGlkZW50aWNhbCB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGFzIGRldGVybWluZWQgYnkgPT09LlxuICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGlzQnVmZmVyKGFjdHVhbCkgJiYgaXNCdWZmZXIoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGNvbXBhcmUoYWN0dWFsLCBleHBlY3RlZCkgPT09IDA7XG5cbiAgLy8gNy4yLiBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBEYXRlIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBEYXRlIG9iamVjdCB0aGF0IHJlZmVycyB0byB0aGUgc2FtZSB0aW1lLlxuICB9IGVsc2UgaWYgKHV0aWwuaXNEYXRlKGFjdHVhbCkgJiYgdXRpbC5pc0RhdGUoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGFjdHVhbC5nZXRUaW1lKCkgPT09IGV4cGVjdGVkLmdldFRpbWUoKTtcblxuICAvLyA3LjMgSWYgdGhlIGV4cGVjdGVkIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBSZWdFeHAgb2JqZWN0IHdpdGggdGhlIHNhbWUgc291cmNlIGFuZFxuICAvLyBwcm9wZXJ0aWVzIChgZ2xvYmFsYCwgYG11bHRpbGluZWAsIGBsYXN0SW5kZXhgLCBgaWdub3JlQ2FzZWApLlxuICB9IGVsc2UgaWYgKHV0aWwuaXNSZWdFeHAoYWN0dWFsKSAmJiB1dGlsLmlzUmVnRXhwKGV4cGVjdGVkKSkge1xuICAgIHJldHVybiBhY3R1YWwuc291cmNlID09PSBleHBlY3RlZC5zb3VyY2UgJiZcbiAgICAgICAgICAgYWN0dWFsLmdsb2JhbCA9PT0gZXhwZWN0ZWQuZ2xvYmFsICYmXG4gICAgICAgICAgIGFjdHVhbC5tdWx0aWxpbmUgPT09IGV4cGVjdGVkLm11bHRpbGluZSAmJlxuICAgICAgICAgICBhY3R1YWwubGFzdEluZGV4ID09PSBleHBlY3RlZC5sYXN0SW5kZXggJiZcbiAgICAgICAgICAgYWN0dWFsLmlnbm9yZUNhc2UgPT09IGV4cGVjdGVkLmlnbm9yZUNhc2U7XG5cbiAgLy8gNy40LiBPdGhlciBwYWlycyB0aGF0IGRvIG5vdCBib3RoIHBhc3MgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnLFxuICAvLyBlcXVpdmFsZW5jZSBpcyBkZXRlcm1pbmVkIGJ5ID09LlxuICB9IGVsc2UgaWYgKChhY3R1YWwgPT09IG51bGwgfHwgdHlwZW9mIGFjdHVhbCAhPT0gJ29iamVjdCcpICYmXG4gICAgICAgICAgICAgKGV4cGVjdGVkID09PSBudWxsIHx8IHR5cGVvZiBleHBlY3RlZCAhPT0gJ29iamVjdCcpKSB7XG4gICAgcmV0dXJuIHN0cmljdCA/IGFjdHVhbCA9PT0gZXhwZWN0ZWQgOiBhY3R1YWwgPT0gZXhwZWN0ZWQ7XG5cbiAgLy8gSWYgYm90aCB2YWx1ZXMgYXJlIGluc3RhbmNlcyBvZiB0eXBlZCBhcnJheXMsIHdyYXAgdGhlaXIgdW5kZXJseWluZ1xuICAvLyBBcnJheUJ1ZmZlcnMgaW4gYSBCdWZmZXIgZWFjaCB0byBpbmNyZWFzZSBwZXJmb3JtYW5jZVxuICAvLyBUaGlzIG9wdGltaXphdGlvbiByZXF1aXJlcyB0aGUgYXJyYXlzIHRvIGhhdmUgdGhlIHNhbWUgdHlwZSBhcyBjaGVja2VkIGJ5XG4gIC8vIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgKGFrYSBwVG9TdHJpbmcpLiBOZXZlciBwZXJmb3JtIGJpbmFyeVxuICAvLyBjb21wYXJpc29ucyBmb3IgRmxvYXQqQXJyYXlzLCB0aG91Z2gsIHNpbmNlIGUuZy4gKzAgPT09IC0wIGJ1dCB0aGVpclxuICAvLyBiaXQgcGF0dGVybnMgYXJlIG5vdCBpZGVudGljYWwuXG4gIH0gZWxzZSBpZiAoaXNWaWV3KGFjdHVhbCkgJiYgaXNWaWV3KGV4cGVjdGVkKSAmJlxuICAgICAgICAgICAgIHBUb1N0cmluZyhhY3R1YWwpID09PSBwVG9TdHJpbmcoZXhwZWN0ZWQpICYmXG4gICAgICAgICAgICAgIShhY3R1YWwgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgfHxcbiAgICAgICAgICAgICAgIGFjdHVhbCBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkpIHtcbiAgICByZXR1cm4gY29tcGFyZShuZXcgVWludDhBcnJheShhY3R1YWwuYnVmZmVyKSxcbiAgICAgICAgICAgICAgICAgICBuZXcgVWludDhBcnJheShleHBlY3RlZC5idWZmZXIpKSA9PT0gMDtcblxuICAvLyA3LjUgRm9yIGFsbCBvdGhlciBPYmplY3QgcGFpcnMsIGluY2x1ZGluZyBBcnJheSBvYmplY3RzLCBlcXVpdmFsZW5jZSBpc1xuICAvLyBkZXRlcm1pbmVkIGJ5IGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoYXMgdmVyaWZpZWRcbiAgLy8gd2l0aCBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwpLCB0aGUgc2FtZSBzZXQgb2Yga2V5c1xuICAvLyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwgZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5XG4gIC8vIGNvcnJlc3BvbmRpbmcga2V5LCBhbmQgYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LiBOb3RlOiB0aGlzXG4gIC8vIGFjY291bnRzIGZvciBib3RoIG5hbWVkIGFuZCBpbmRleGVkIHByb3BlcnRpZXMgb24gQXJyYXlzLlxuICB9IGVsc2UgaWYgKGlzQnVmZmVyKGFjdHVhbCkgIT09IGlzQnVmZmVyKGV4cGVjdGVkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBtZW1vcyA9IG1lbW9zIHx8IHthY3R1YWw6IFtdLCBleHBlY3RlZDogW119O1xuXG4gICAgdmFyIGFjdHVhbEluZGV4ID0gbWVtb3MuYWN0dWFsLmluZGV4T2YoYWN0dWFsKTtcbiAgICBpZiAoYWN0dWFsSW5kZXggIT09IC0xKSB7XG4gICAgICBpZiAoYWN0dWFsSW5kZXggPT09IG1lbW9zLmV4cGVjdGVkLmluZGV4T2YoZXhwZWN0ZWQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1lbW9zLmFjdHVhbC5wdXNoKGFjdHVhbCk7XG4gICAgbWVtb3MuZXhwZWN0ZWQucHVzaChleHBlY3RlZCk7XG5cbiAgICByZXR1cm4gb2JqRXF1aXYoYWN0dWFsLCBleHBlY3RlZCwgc3RyaWN0LCBtZW1vcyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNBcmd1bWVudHMob2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJztcbn1cblxuZnVuY3Rpb24gb2JqRXF1aXYoYSwgYiwgc3RyaWN0LCBhY3R1YWxWaXNpdGVkT2JqZWN0cykge1xuICBpZiAoYSA9PT0gbnVsbCB8fCBhID09PSB1bmRlZmluZWQgfHwgYiA9PT0gbnVsbCB8fCBiID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvLyBpZiBvbmUgaXMgYSBwcmltaXRpdmUsIHRoZSBvdGhlciBtdXN0IGJlIHNhbWVcbiAgaWYgKHV0aWwuaXNQcmltaXRpdmUoYSkgfHwgdXRpbC5pc1ByaW1pdGl2ZShiKSlcbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgaWYgKHN0cmljdCAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSkgIT09IE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIHZhciBhSXNBcmdzID0gaXNBcmd1bWVudHMoYSk7XG4gIHZhciBiSXNBcmdzID0gaXNBcmd1bWVudHMoYik7XG4gIGlmICgoYUlzQXJncyAmJiAhYklzQXJncykgfHwgKCFhSXNBcmdzICYmIGJJc0FyZ3MpKVxuICAgIHJldHVybiBmYWxzZTtcbiAgaWYgKGFJc0FyZ3MpIHtcbiAgICBhID0gcFNsaWNlLmNhbGwoYSk7XG4gICAgYiA9IHBTbGljZS5jYWxsKGIpO1xuICAgIHJldHVybiBfZGVlcEVxdWFsKGEsIGIsIHN0cmljdCk7XG4gIH1cbiAgdmFyIGthID0gb2JqZWN0S2V5cyhhKTtcbiAgdmFyIGtiID0gb2JqZWN0S2V5cyhiKTtcbiAgdmFyIGtleSwgaTtcbiAgLy8gaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChrZXlzIGluY29ycG9yYXRlc1xuICAvLyBoYXNPd25Qcm9wZXJ0eSlcbiAgaWYgKGthLmxlbmd0aCAhPT0ga2IubGVuZ3RoKVxuICAgIHJldHVybiBmYWxzZTtcbiAgLy90aGUgc2FtZSBzZXQgb2Yga2V5cyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSxcbiAga2Euc29ydCgpO1xuICBrYi5zb3J0KCk7XG4gIC8vfn5+Y2hlYXAga2V5IHRlc3RcbiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAoa2FbaV0gIT09IGtiW2ldKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5IGNvcnJlc3BvbmRpbmcga2V5LCBhbmRcbiAgLy9+fn5wb3NzaWJseSBleHBlbnNpdmUgZGVlcCB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAga2V5ID0ga2FbaV07XG4gICAgaWYgKCFfZGVlcEVxdWFsKGFba2V5XSwgYltrZXldLCBzdHJpY3QsIGFjdHVhbFZpc2l0ZWRPYmplY3RzKSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gOC4gVGhlIG5vbi1lcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgZm9yIGFueSBkZWVwIGluZXF1YWxpdHkuXG4vLyBhc3NlcnQubm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0Lm5vdERlZXBFcXVhbCA9IGZ1bmN0aW9uIG5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIGZhbHNlKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBFcXVhbCcsIGFzc2VydC5ub3REZWVwRXF1YWwpO1xuICB9XG59O1xuXG5hc3NlcnQubm90RGVlcFN0cmljdEVxdWFsID0gbm90RGVlcFN0cmljdEVxdWFsO1xuZnVuY3Rpb24gbm90RGVlcFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgdHJ1ZSkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdub3REZWVwU3RyaWN0RXF1YWwnLCBub3REZWVwU3RyaWN0RXF1YWwpO1xuICB9XG59XG5cblxuLy8gOS4gVGhlIHN0cmljdCBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc3RyaWN0IGVxdWFsaXR5LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cbi8vIGFzc2VydC5zdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5zdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIHN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PT0nLCBhc3NlcnQuc3RyaWN0RXF1YWwpO1xuICB9XG59O1xuXG4vLyAxMC4gVGhlIHN0cmljdCBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciBzdHJpY3QgaW5lcXVhbGl0eSwgYXNcbi8vIGRldGVybWluZWQgYnkgIT09LiAgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0Lm5vdFN0cmljdEVxdWFsID0gZnVuY3Rpb24gbm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJyE9PScsIGFzc2VydC5ub3RTdHJpY3RFcXVhbCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHtcbiAgaWYgKCFhY3R1YWwgfHwgIWV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChleHBlY3RlZCkgPT0gJ1tvYmplY3QgUmVnRXhwXScpIHtcbiAgICByZXR1cm4gZXhwZWN0ZWQudGVzdChhY3R1YWwpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBpZiAoYWN0dWFsIGluc3RhbmNlb2YgZXhwZWN0ZWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElnbm9yZS4gIFRoZSBpbnN0YW5jZW9mIGNoZWNrIGRvZXNuJ3Qgd29yayBmb3IgYXJyb3cgZnVuY3Rpb25zLlxuICB9XG5cbiAgaWYgKEVycm9yLmlzUHJvdG90eXBlT2YoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGV4cGVjdGVkLmNhbGwoe30sIGFjdHVhbCkgPT09IHRydWU7XG59XG5cbmZ1bmN0aW9uIF90cnlCbG9jayhibG9jaykge1xuICB2YXIgZXJyb3I7XG4gIHRyeSB7XG4gICAgYmxvY2soKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGVycm9yID0gZTtcbiAgfVxuICByZXR1cm4gZXJyb3I7XG59XG5cbmZ1bmN0aW9uIF90aHJvd3Moc2hvdWxkVGhyb3csIGJsb2NrLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICB2YXIgYWN0dWFsO1xuXG4gIGlmICh0eXBlb2YgYmxvY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJsb2NrXCIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIGV4cGVjdGVkID09PSAnc3RyaW5nJykge1xuICAgIG1lc3NhZ2UgPSBleHBlY3RlZDtcbiAgICBleHBlY3RlZCA9IG51bGw7XG4gIH1cblxuICBhY3R1YWwgPSBfdHJ5QmxvY2soYmxvY2spO1xuXG4gIG1lc3NhZ2UgPSAoZXhwZWN0ZWQgJiYgZXhwZWN0ZWQubmFtZSA/ICcgKCcgKyBleHBlY3RlZC5uYW1lICsgJykuJyA6ICcuJykgK1xuICAgICAgICAgICAgKG1lc3NhZ2UgPyAnICcgKyBtZXNzYWdlIDogJy4nKTtcblxuICBpZiAoc2hvdWxkVGhyb3cgJiYgIWFjdHVhbCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ01pc3NpbmcgZXhwZWN0ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpO1xuICB9XG5cbiAgdmFyIHVzZXJQcm92aWRlZE1lc3NhZ2UgPSB0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZyc7XG4gIHZhciBpc1Vud2FudGVkRXhjZXB0aW9uID0gIXNob3VsZFRocm93ICYmIHV0aWwuaXNFcnJvcihhY3R1YWwpO1xuICB2YXIgaXNVbmV4cGVjdGVkRXhjZXB0aW9uID0gIXNob3VsZFRocm93ICYmIGFjdHVhbCAmJiAhZXhwZWN0ZWQ7XG5cbiAgaWYgKChpc1Vud2FudGVkRXhjZXB0aW9uICYmXG4gICAgICB1c2VyUHJvdmlkZWRNZXNzYWdlICYmXG4gICAgICBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkgfHxcbiAgICAgIGlzVW5leHBlY3RlZEV4Y2VwdGlvbikge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ0dvdCB1bndhbnRlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7XG4gIH1cblxuICBpZiAoKHNob3VsZFRocm93ICYmIGFjdHVhbCAmJiBleHBlY3RlZCAmJlxuICAgICAgIWV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fCAoIXNob3VsZFRocm93ICYmIGFjdHVhbCkpIHtcbiAgICB0aHJvdyBhY3R1YWw7XG4gIH1cbn1cblxuLy8gMTEuIEV4cGVjdGVkIHRvIHRocm93IGFuIGVycm9yOlxuLy8gYXNzZXJ0LnRocm93cyhibG9jaywgRXJyb3Jfb3B0LCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC50aHJvd3MgPSBmdW5jdGlvbihibG9jaywgLypvcHRpb25hbCovZXJyb3IsIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHtcbiAgX3Rocm93cyh0cnVlLCBibG9jaywgZXJyb3IsIG1lc3NhZ2UpO1xufTtcblxuLy8gRVhURU5TSU9OISBUaGlzIGlzIGFubm95aW5nIHRvIHdyaXRlIG91dHNpZGUgdGhpcyBtb2R1bGUuXG5hc3NlcnQuZG9lc05vdFRocm93ID0gZnVuY3Rpb24oYmxvY2ssIC8qb3B0aW9uYWwqL2Vycm9yLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7XG4gIF90aHJvd3MoZmFsc2UsIGJsb2NrLCBlcnJvciwgbWVzc2FnZSk7XG59O1xuXG5hc3NlcnQuaWZFcnJvciA9IGZ1bmN0aW9uKGVycikgeyBpZiAoZXJyKSB0aHJvdyBlcnI7IH07XG5cbnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGhhc093bi5jYWxsKG9iaiwga2V5KSkga2V5cy5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIGtleXM7XG59O1xuIiwiaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IGN0b3IsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59IGVsc2Uge1xuICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cbiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQnVmZmVyKGFyZykge1xuICByZXR1cm4gYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnXG4gICAgJiYgdHlwZW9mIGFyZy5jb3B5ID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIGFyZy5maWxsID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIGFyZy5yZWFkVUludDggPT09ICdmdW5jdGlvbic7XG59IiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbnZhciBmb3JtYXRSZWdFeHAgPSAvJVtzZGolXS9nO1xuZXhwb3J0cy5mb3JtYXQgPSBmdW5jdGlvbihmKSB7XG4gIGlmICghaXNTdHJpbmcoZikpIHtcbiAgICB2YXIgb2JqZWN0cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBvYmplY3RzLnB1c2goaW5zcGVjdChhcmd1bWVudHNbaV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdHMuam9pbignICcpO1xuICB9XG5cbiAgdmFyIGkgPSAxO1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuICB2YXIgc3RyID0gU3RyaW5nKGYpLnJlcGxhY2UoZm9ybWF0UmVnRXhwLCBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPT09ICclJScpIHJldHVybiAnJSc7XG4gICAgaWYgKGkgPj0gbGVuKSByZXR1cm4geDtcbiAgICBzd2l0Y2ggKHgpIHtcbiAgICAgIGNhc2UgJyVzJzogcmV0dXJuIFN0cmluZyhhcmdzW2krK10pO1xuICAgICAgY2FzZSAnJWQnOiByZXR1cm4gTnVtYmVyKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclaic6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZ3NbaSsrXSk7XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICByZXR1cm4gJ1tDaXJjdWxhcl0nO1xuICAgICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4geDtcbiAgICB9XG4gIH0pO1xuICBmb3IgKHZhciB4ID0gYXJnc1tpXTsgaSA8IGxlbjsgeCA9IGFyZ3NbKytpXSkge1xuICAgIGlmIChpc051bGwoeCkgfHwgIWlzT2JqZWN0KHgpKSB7XG4gICAgICBzdHIgKz0gJyAnICsgeDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RyICs9ICcgJyArIGluc3BlY3QoeCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHI7XG59O1xuXG5cbi8vIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuXG4vLyBSZXR1cm5zIGEgbW9kaWZpZWQgZnVuY3Rpb24gd2hpY2ggd2FybnMgb25jZSBieSBkZWZhdWx0LlxuLy8gSWYgLS1uby1kZXByZWNhdGlvbiBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC5cbmV4cG9ydHMuZGVwcmVjYXRlID0gZnVuY3Rpb24oZm4sIG1zZykge1xuICAvLyBBbGxvdyBmb3IgZGVwcmVjYXRpbmcgdGhpbmdzIGluIHRoZSBwcm9jZXNzIG9mIHN0YXJ0aW5nIHVwLlxuICBpZiAoaXNVbmRlZmluZWQoZ2xvYmFsLnByb2Nlc3MpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV4cG9ydHMuZGVwcmVjYXRlKGZuLCBtc2cpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLm5vRGVwcmVjYXRpb24gPT09IHRydWUpIHtcbiAgICByZXR1cm4gZm47XG4gIH1cblxuICB2YXIgd2FybmVkID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGRlcHJlY2F0ZWQoKSB7XG4gICAgaWYgKCF3YXJuZWQpIHtcbiAgICAgIGlmIChwcm9jZXNzLnRocm93RGVwcmVjYXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MudHJhY2VEZXByZWNhdGlvbikge1xuICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1zZyk7XG4gICAgICB9XG4gICAgICB3YXJuZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIHJldHVybiBkZXByZWNhdGVkO1xufTtcblxuXG52YXIgZGVidWdzID0ge307XG52YXIgZGVidWdFbnZpcm9uO1xuZXhwb3J0cy5kZWJ1Z2xvZyA9IGZ1bmN0aW9uKHNldCkge1xuICBpZiAoaXNVbmRlZmluZWQoZGVidWdFbnZpcm9uKSlcbiAgICBkZWJ1Z0Vudmlyb24gPSBwcm9jZXNzLmVudi5OT0RFX0RFQlVHIHx8ICcnO1xuICBzZXQgPSBzZXQudG9VcHBlckNhc2UoKTtcbiAgaWYgKCFkZWJ1Z3Nbc2V0XSkge1xuICAgIGlmIChuZXcgUmVnRXhwKCdcXFxcYicgKyBzZXQgKyAnXFxcXGInLCAnaScpLnRlc3QoZGVidWdFbnZpcm9uKSkge1xuICAgICAgdmFyIHBpZCA9IHByb2Nlc3MucGlkO1xuICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1zZyA9IGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJyVzICVkOiAlcycsIHNldCwgcGlkLCBtc2cpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHt9O1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGVidWdzW3NldF07XG59O1xuXG5cbi8qKlxuICogRWNob3MgdGhlIHZhbHVlIG9mIGEgdmFsdWUuIFRyeXMgdG8gcHJpbnQgdGhlIHZhbHVlIG91dFxuICogaW4gdGhlIGJlc3Qgd2F5IHBvc3NpYmxlIGdpdmVuIHRoZSBkaWZmZXJlbnQgdHlwZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHByaW50IG91dC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIE9wdGlvbmFsIG9wdGlvbnMgb2JqZWN0IHRoYXQgYWx0ZXJzIHRoZSBvdXRwdXQuXG4gKi9cbi8qIGxlZ2FjeTogb2JqLCBzaG93SGlkZGVuLCBkZXB0aCwgY29sb3JzKi9cbmZ1bmN0aW9uIGluc3BlY3Qob2JqLCBvcHRzKSB7XG4gIC8vIGRlZmF1bHQgb3B0aW9uc1xuICB2YXIgY3R4ID0ge1xuICAgIHNlZW46IFtdLFxuICAgIHN0eWxpemU6IHN0eWxpemVOb0NvbG9yXG4gIH07XG4gIC8vIGxlZ2FjeS4uLlxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAzKSBjdHguZGVwdGggPSBhcmd1bWVudHNbMl07XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIGN0eC5jb2xvcnMgPSBhcmd1bWVudHNbM107XG4gIGlmIChpc0Jvb2xlYW4ob3B0cykpIHtcbiAgICAvLyBsZWdhY3kuLi5cbiAgICBjdHguc2hvd0hpZGRlbiA9IG9wdHM7XG4gIH0gZWxzZSBpZiAob3B0cykge1xuICAgIC8vIGdvdCBhbiBcIm9wdGlvbnNcIiBvYmplY3RcbiAgICBleHBvcnRzLl9leHRlbmQoY3R4LCBvcHRzKTtcbiAgfVxuICAvLyBzZXQgZGVmYXVsdCBvcHRpb25zXG4gIGlmIChpc1VuZGVmaW5lZChjdHguc2hvd0hpZGRlbikpIGN0eC5zaG93SGlkZGVuID0gZmFsc2U7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguZGVwdGgpKSBjdHguZGVwdGggPSAyO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmNvbG9ycykpIGN0eC5jb2xvcnMgPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jdXN0b21JbnNwZWN0KSkgY3R4LmN1c3RvbUluc3BlY3QgPSB0cnVlO1xuICBpZiAoY3R4LmNvbG9ycykgY3R4LnN0eWxpemUgPSBzdHlsaXplV2l0aENvbG9yO1xuICByZXR1cm4gZm9ybWF0VmFsdWUoY3R4LCBvYmosIGN0eC5kZXB0aCk7XG59XG5leHBvcnRzLmluc3BlY3QgPSBpbnNwZWN0O1xuXG5cbi8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQU5TSV9lc2NhcGVfY29kZSNncmFwaGljc1xuaW5zcGVjdC5jb2xvcnMgPSB7XG4gICdib2xkJyA6IFsxLCAyMl0sXG4gICdpdGFsaWMnIDogWzMsIDIzXSxcbiAgJ3VuZGVybGluZScgOiBbNCwgMjRdLFxuICAnaW52ZXJzZScgOiBbNywgMjddLFxuICAnd2hpdGUnIDogWzM3LCAzOV0sXG4gICdncmV5JyA6IFs5MCwgMzldLFxuICAnYmxhY2snIDogWzMwLCAzOV0sXG4gICdibHVlJyA6IFszNCwgMzldLFxuICAnY3lhbicgOiBbMzYsIDM5XSxcbiAgJ2dyZWVuJyA6IFszMiwgMzldLFxuICAnbWFnZW50YScgOiBbMzUsIDM5XSxcbiAgJ3JlZCcgOiBbMzEsIDM5XSxcbiAgJ3llbGxvdycgOiBbMzMsIDM5XVxufTtcblxuLy8gRG9uJ3QgdXNlICdibHVlJyBub3QgdmlzaWJsZSBvbiBjbWQuZXhlXG5pbnNwZWN0LnN0eWxlcyA9IHtcbiAgJ3NwZWNpYWwnOiAnY3lhbicsXG4gICdudW1iZXInOiAneWVsbG93JyxcbiAgJ2Jvb2xlYW4nOiAneWVsbG93JyxcbiAgJ3VuZGVmaW5lZCc6ICdncmV5JyxcbiAgJ251bGwnOiAnYm9sZCcsXG4gICdzdHJpbmcnOiAnZ3JlZW4nLFxuICAnZGF0ZSc6ICdtYWdlbnRhJyxcbiAgLy8gXCJuYW1lXCI6IGludGVudGlvbmFsbHkgbm90IHN0eWxpbmdcbiAgJ3JlZ2V4cCc6ICdyZWQnXG59O1xuXG5cbmZ1bmN0aW9uIHN0eWxpemVXaXRoQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgdmFyIHN0eWxlID0gaW5zcGVjdC5zdHlsZXNbc3R5bGVUeXBlXTtcblxuICBpZiAoc3R5bGUpIHtcbiAgICByZXR1cm4gJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVswXSArICdtJyArIHN0ciArXG4gICAgICAgICAgICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMV0gKyAnbSc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIHN0eWxpemVOb0NvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG4gIHJldHVybiBzdHI7XG59XG5cblxuZnVuY3Rpb24gYXJyYXlUb0hhc2goYXJyYXkpIHtcbiAgdmFyIGhhc2ggPSB7fTtcblxuICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCwgaWR4KSB7XG4gICAgaGFzaFt2YWxdID0gdHJ1ZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGhhc2g7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7XG4gIC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy5cbiAgLy8gQ2hlY2sgdGhhdCB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhbiBpbnNwZWN0IGZ1bmN0aW9uIG9uIGl0XG4gIGlmIChjdHguY3VzdG9tSW5zcGVjdCAmJlxuICAgICAgdmFsdWUgJiZcbiAgICAgIGlzRnVuY3Rpb24odmFsdWUuaW5zcGVjdCkgJiZcbiAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbFxuICAgICAgdmFsdWUuaW5zcGVjdCAhPT0gZXhwb3J0cy5pbnNwZWN0ICYmXG4gICAgICAvLyBBbHNvIGZpbHRlciBvdXQgYW55IHByb3RvdHlwZSBvYmplY3RzIHVzaW5nIHRoZSBjaXJjdWxhciBjaGVjay5cbiAgICAgICEodmFsdWUuY29uc3RydWN0b3IgJiYgdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlID09PSB2YWx1ZSkpIHtcbiAgICB2YXIgcmV0ID0gdmFsdWUuaW5zcGVjdChyZWN1cnNlVGltZXMsIGN0eCk7XG4gICAgaWYgKCFpc1N0cmluZyhyZXQpKSB7XG4gICAgICByZXQgPSBmb3JtYXRWYWx1ZShjdHgsIHJldCwgcmVjdXJzZVRpbWVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8vIFByaW1pdGl2ZSB0eXBlcyBjYW5ub3QgaGF2ZSBwcm9wZXJ0aWVzXG4gIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7XG4gIGlmIChwcmltaXRpdmUpIHtcbiAgICByZXR1cm4gcHJpbWl0aXZlO1xuICB9XG5cbiAgLy8gTG9vayB1cCB0aGUga2V5cyBvZiB0aGUgb2JqZWN0LlxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgdmFyIHZpc2libGVLZXlzID0gYXJyYXlUb0hhc2goa2V5cyk7XG5cbiAgaWYgKGN0eC5zaG93SGlkZGVuKSB7XG4gICAga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcbiAgfVxuXG4gIC8vIElFIGRvZXNuJ3QgbWFrZSBlcnJvciBmaWVsZHMgbm9uLWVudW1lcmFibGVcbiAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2R3dzUyc2J0KHY9dnMuOTQpLmFzcHhcbiAgaWYgKGlzRXJyb3IodmFsdWUpXG4gICAgICAmJiAoa2V5cy5pbmRleE9mKCdtZXNzYWdlJykgPj0gMCB8fCBrZXlzLmluZGV4T2YoJ2Rlc2NyaXB0aW9uJykgPj0gMCkpIHtcbiAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuICB9XG5cbiAgLy8gU29tZSB0eXBlIG9mIG9iamVjdCB3aXRob3V0IHByb3BlcnRpZXMgY2FuIGJlIHNob3J0Y3V0dGVkLlxuICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcbiAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgIHZhciBuYW1lID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tGdW5jdGlvbicgKyBuYW1lICsgJ10nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH1cbiAgICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAnZGF0ZScpO1xuICAgIH1cbiAgICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGJhc2UgPSAnJywgYXJyYXkgPSBmYWxzZSwgYnJhY2VzID0gWyd7JywgJ30nXTtcblxuICAvLyBNYWtlIEFycmF5IHNheSB0aGF0IHRoZXkgYXJlIEFycmF5XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGFycmF5ID0gdHJ1ZTtcbiAgICBicmFjZXMgPSBbJ1snLCAnXSddO1xuICB9XG5cbiAgLy8gTWFrZSBmdW5jdGlvbnMgc2F5IHRoYXQgdGhleSBhcmUgZnVuY3Rpb25zXG4gIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgIHZhciBuID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7XG4gICAgYmFzZSA9ICcgW0Z1bmN0aW9uJyArIG4gKyAnXSc7XG4gIH1cblxuICAvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwc1xuICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIH1cblxuICAvLyBNYWtlIGRhdGVzIHdpdGggcHJvcGVydGllcyBmaXJzdCBzYXkgdGhlIGRhdGVcbiAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIH1cblxuICAvLyBNYWtlIGVycm9yIHdpdGggbWVzc2FnZSBmaXJzdCBzYXkgdGhlIGVycm9yXG4gIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICBpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArIGJyYWNlc1sxXTtcbiAgfVxuXG4gIGlmIChyZWN1cnNlVGltZXMgPCAwKSB7XG4gICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbT2JqZWN0XScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG5cbiAgY3R4LnNlZW4ucHVzaCh2YWx1ZSk7XG5cbiAgdmFyIG91dHB1dDtcbiAgaWYgKGFycmF5KSB7XG4gICAgb3V0cHV0ID0gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cyk7XG4gIH0gZWxzZSB7XG4gICAgb3V0cHV0ID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICByZXR1cm4gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSk7XG4gICAgfSk7XG4gIH1cblxuICBjdHguc2Vlbi5wb3AoKTtcblxuICByZXR1cm4gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKSB7XG4gIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCd1bmRlZmluZWQnLCAndW5kZWZpbmVkJyk7XG4gIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICB2YXIgc2ltcGxlID0gJ1xcJycgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkucmVwbGFjZSgvXlwifFwiJC9nLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJykgKyAnXFwnJztcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCAnc3RyaW5nJyk7XG4gIH1cbiAgaWYgKGlzTnVtYmVyKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ251bWJlcicpO1xuICBpZiAoaXNCb29sZWFuKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ2Jvb2xlYW4nKTtcbiAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzIFwib2JqZWN0XCIsIHNvIHNwZWNpYWwgY2FzZSBoZXJlLlxuICBpZiAoaXNOdWxsKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ251bGwnLCAnbnVsbCcpO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdEVycm9yKHZhbHVlKSB7XG4gIHJldHVybiAnWycgKyBFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgKyAnXSc7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cykge1xuICB2YXIgb3V0cHV0ID0gW107XG4gIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5KHZhbHVlLCBTdHJpbmcoaSkpKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIFN0cmluZyhpKSwgdHJ1ZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXRwdXQucHVzaCgnJyk7XG4gICAgfVxuICB9XG4gIGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBpZiAoIWtleS5tYXRjaCgvXlxcZCskLykpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAga2V5LCB0cnVlKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KSB7XG4gIHZhciBuYW1lLCBzdHIsIGRlc2M7XG4gIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpIHx8IHsgdmFsdWU6IHZhbHVlW2tleV0gfTtcbiAgaWYgKGRlc2MuZ2V0KSB7XG4gICAgaWYgKGRlc2Muc2V0KSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlci9TZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGRlc2Muc2V0KSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoIWhhc093blByb3BlcnR5KHZpc2libGVLZXlzLCBrZXkpKSB7XG4gICAgbmFtZSA9ICdbJyArIGtleSArICddJztcbiAgfVxuICBpZiAoIXN0cikge1xuICAgIGlmIChjdHguc2Vlbi5pbmRleE9mKGRlc2MudmFsdWUpIDwgMCkge1xuICAgICAgaWYgKGlzTnVsbChyZWN1cnNlVGltZXMpKSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIHJlY3Vyc2VUaW1lcyAtIDEpO1xuICAgICAgfVxuICAgICAgaWYgKHN0ci5pbmRleE9mKCdcXG4nKSA+IC0xKSB7XG4gICAgICAgIGlmIChhcnJheSkge1xuICAgICAgICAgIHN0ciA9IHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKS5zdWJzdHIoMik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyID0gJ1xcbicgKyBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbQ2lyY3VsYXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzVW5kZWZpbmVkKG5hbWUpKSB7XG4gICAgaWYgKGFycmF5ICYmIGtleS5tYXRjaCgvXlxcZCskLykpIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICAgIG5hbWUgPSBKU09OLnN0cmluZ2lmeSgnJyArIGtleSk7XG4gICAgaWYgKG5hbWUubWF0Y2goL15cIihbYS16QS1aX11bYS16QS1aXzAtOV0qKVwiJC8pKSB7XG4gICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMSwgbmFtZS5sZW5ndGggLSAyKTtcbiAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnbmFtZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIilcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKF5cInxcIiQpL2csIFwiJ1wiKTtcbiAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnc3RyaW5nJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5hbWUgKyAnOiAnICsgc3RyO1xufVxuXG5cbmZ1bmN0aW9uIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKSB7XG4gIHZhciBudW1MaW5lc0VzdCA9IDA7XG4gIHZhciBsZW5ndGggPSBvdXRwdXQucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cikge1xuICAgIG51bUxpbmVzRXN0Kys7XG4gICAgaWYgKGN1ci5pbmRleE9mKCdcXG4nKSA+PSAwKSBudW1MaW5lc0VzdCsrO1xuICAgIHJldHVybiBwcmV2ICsgY3VyLnJlcGxhY2UoL1xcdTAwMWJcXFtcXGRcXGQ/bS9nLCAnJykubGVuZ3RoICsgMTtcbiAgfSwgMCk7XG5cbiAgaWYgKGxlbmd0aCA+IDYwKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArXG4gICAgICAgICAgIChiYXNlID09PSAnJyA/ICcnIDogYmFzZSArICdcXG4gJykgK1xuICAgICAgICAgICAnICcgK1xuICAgICAgICAgICBvdXRwdXQuam9pbignLFxcbiAgJykgK1xuICAgICAgICAgICAnICcgK1xuICAgICAgICAgICBicmFjZXNbMV07XG4gIH1cblxuICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArICcgJyArIG91dHB1dC5qb2luKCcsICcpICsgJyAnICsgYnJhY2VzWzFdO1xufVxuXG5cbi8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYFxuLy8gYmVjYXVzZSBpdCBpcyBmcmFnaWxlIGFuZCBjYW4gYmUgZWFzaWx5IGZha2VkIHdpdGggYE9iamVjdC5jcmVhdGUoKWAuXG5mdW5jdGlvbiBpc0FycmF5KGFyKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGFyKTtcbn1cbmV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7XG5cbmZ1bmN0aW9uIGlzQm9vbGVhbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJztcbn1cbmV4cG9ydHMuaXNCb29sZWFuID0gaXNCb29sZWFuO1xuXG5mdW5jdGlvbiBpc051bGwoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbCA9IGlzTnVsbDtcblxuZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsT3JVbmRlZmluZWQgPSBpc051bGxPclVuZGVmaW5lZDtcblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cbmV4cG9ydHMuaXNOdW1iZXIgPSBpc051bWJlcjtcblxuZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJztcbn1cbmV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZztcblxuZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJztcbn1cbmV4cG9ydHMuaXNTeW1ib2wgPSBpc1N5bWJvbDtcblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cbmV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcblxuZnVuY3Rpb24gaXNSZWdFeHAocmUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHJlKSAmJiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblxuZnVuY3Rpb24gaXNEYXRlKGQpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGQpICYmIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5leHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblxuZnVuY3Rpb24gaXNFcnJvcihlKSB7XG4gIHJldHVybiBpc09iamVjdChlKSAmJlxuICAgICAgKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG59XG5leHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXG5leHBvcnRzLmlzQnVmZmVyID0gcmVxdWlyZSgnLi9zdXBwb3J0L2lzQnVmZmVyJyk7XG5cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbn1cblxuXG5mdW5jdGlvbiBwYWQobikge1xuICByZXR1cm4gbiA8IDEwID8gJzAnICsgbi50b1N0cmluZygxMCkgOiBuLnRvU3RyaW5nKDEwKTtcbn1cblxuXG52YXIgbW9udGhzID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsXG4gICAgICAgICAgICAgICdPY3QnLCAnTm92JywgJ0RlYyddO1xuXG4vLyAyNiBGZWIgMTY6MTk6MzRcbmZ1bmN0aW9uIHRpbWVzdGFtcCgpIHtcbiAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICB2YXIgdGltZSA9IFtwYWQoZC5nZXRIb3VycygpKSxcbiAgICAgICAgICAgICAgcGFkKGQuZ2V0TWludXRlcygpKSxcbiAgICAgICAgICAgICAgcGFkKGQuZ2V0U2Vjb25kcygpKV0uam9pbignOicpO1xuICByZXR1cm4gW2QuZ2V0RGF0ZSgpLCBtb250aHNbZC5nZXRNb250aCgpXSwgdGltZV0uam9pbignICcpO1xufVxuXG5cbi8vIGxvZyBpcyBqdXN0IGEgdGhpbiB3cmFwcGVyIHRvIGNvbnNvbGUubG9nIHRoYXQgcHJlcGVuZHMgYSB0aW1lc3RhbXBcbmV4cG9ydHMubG9nID0gZnVuY3Rpb24oKSB7XG4gIGNvbnNvbGUubG9nKCclcyAtICVzJywgdGltZXN0YW1wKCksIGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cykpO1xufTtcblxuXG4vKipcbiAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlci5cbiAqXG4gKiBUaGUgRnVuY3Rpb24ucHJvdG90eXBlLmluaGVyaXRzIGZyb20gbGFuZy5qcyByZXdyaXR0ZW4gYXMgYSBzdGFuZGFsb25lXG4gKiBmdW5jdGlvbiAobm90IG9uIEZ1bmN0aW9uLnByb3RvdHlwZSkuIE5PVEU6IElmIHRoaXMgZmlsZSBpcyB0byBiZSBsb2FkZWRcbiAqIGR1cmluZyBib290c3RyYXBwaW5nIHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmV3cml0dGVuIHVzaW5nIHNvbWUgbmF0aXZlXG4gKiBmdW5jdGlvbnMgYXMgcHJvdG90eXBlIHNldHVwIHVzaW5nIG5vcm1hbCBKYXZhU2NyaXB0IGRvZXMgbm90IHdvcmsgYXNcbiAqIGV4cGVjdGVkIGR1cmluZyBib290c3RyYXBwaW5nIChzZWUgbWlycm9yLmpzIGluIHIxMTQ5MDMpLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gaW5oZXJpdCB0aGVcbiAqICAgICBwcm90b3R5cGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdXBlckN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gaW5oZXJpdCBwcm90b3R5cGUgZnJvbS5cbiAqL1xuZXhwb3J0cy5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG5cbmV4cG9ydHMuX2V4dGVuZCA9IGZ1bmN0aW9uKG9yaWdpbiwgYWRkKSB7XG4gIC8vIERvbid0IGRvIGFueXRoaW5nIGlmIGFkZCBpc24ndCBhbiBvYmplY3RcbiAgaWYgKCFhZGQgfHwgIWlzT2JqZWN0KGFkZCkpIHJldHVybiBvcmlnaW47XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhZGQpO1xuICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgb3JpZ2luW2tleXNbaV1dID0gYWRkW2tleXNbaV1dO1xuICB9XG4gIHJldHVybiBvcmlnaW47XG59O1xuXG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xufVxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsImltcG9ydCAqIGFzIGFzc2VydCBmcm9tIFwiYXNzZXJ0XCI7XG5pbXBvcnQgeyBEb3NDb21tYW5kSW50ZXJmYWNlIH0gZnJvbSBcIi4uL2pzLWRvcy10cy9qcy1kb3MtY2lcIjtcbmltcG9ydCB7IGRvVGhlbiB9IGZyb20gXCIuL2RvXCI7XG5cbi8vIENvbXBhcmVcbi8vID09PT09PT1cbi8vIENvbXBhcmUgaW1hZ2UgZnJvbSB1cmwsIGFuZCBzY3JlZW5zaG90IGZyb20gRG9zQm94XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlQW5kRXhpdChpbWFnZVVybDogc3RyaW5nLCBjaTogRG9zQ29tbWFuZEludGVyZmFjZSwgZG9uZTogKCkgPT4gdm9pZCkge1xuICAgIGNvbXBhcmUoaW1hZ2VVcmwsIGNpLCAod3JvbmcpID0+IHtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKDAsIHdyb25nKTtcbiAgICAgICAgY2kuZXhpdCgpO1xuICAgICAgICBkb25lKCk7XG4gICAgfSk7XG59XG5cbmNvbnN0IGNvbXBhcmUgPSAoaW1hZ2VVcmw6IHN0cmluZywgY2k6IERvc0NvbW1hbmRJbnRlcmZhY2UsIGNhbGxiYWNrOiAod3Jvbmc6IG51bWJlcikgPT4gdm9pZCkgPT4ge1xuICAgIGRvVGhlbihjaS5zY3JlZW5zaG90KCksIChhY3R1YWxVcmw6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGFzc2VydChpbWcud2lkdGggPT09IGNpLndpZHRoKCksIFwiSW52YWxpZCB3aWR0aDogXCIgKyBjaS53aWR0aCgpICsgXCIsIHNob3VsZCBiZSBcIiArIGltZy53aWR0aCk7XG4gICAgICAgICAgICBhc3NlcnQoaW1nLmhlaWdodCA9PT0gY2kuaGVpZ2h0KCksIFwiSW52YWxpZCBoZWlnaHQ6IFwiICsgY2kuaGVpZ2h0KCkgKyBcIiwgc2hvdWxkIGJlIFwiICsgaW1nLmhlaWdodCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSBpbWcud2lkdGg7XG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1nLmhlaWdodDtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZCA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgaW1nLndpZHRoLCBpbWcuaGVpZ2h0KS5kYXRhO1xuXG4gICAgICAgICAgICBjb25zdCBhY3R1YWxJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgYWN0dWFsSW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbWcpOyAvLyBmb3IgY29tcGFyaXNvbnNcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICdePWV4cGVjdGVkLCB2PWFjdHVhbCc7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYWN0dWFsSW1hZ2UpOyAvLyB0byBncmFiIGl0IGZvciBjcmVhdGluZyB0aGUgdGVzdCByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgICAgICAgICBhY3R1YWxDYW52YXMud2lkdGggPSBhY3R1YWxJbWFnZS53aWR0aDtcbiAgICAgICAgICAgICAgICBhY3R1YWxDYW52YXMuaGVpZ2h0ID0gYWN0dWFsSW1hZ2UuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbEN0eCA9IGFjdHVhbENhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgICAgICAgICAgYWN0dWFsQ3R4LmRyYXdJbWFnZShhY3R1YWxJbWFnZSwgMCwgMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsID0gYWN0dWFsQ3R4LmdldEltYWdlRGF0YSgwLCAwLCBhY3R1YWxJbWFnZS53aWR0aCwgYWN0dWFsSW1hZ2UuaGVpZ2h0KS5kYXRhO1xuXG4gICAgICAgICAgICAgICAgbGV0IHRvdGFsID0gMDtcbiAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9IGltZy53aWR0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCArPSBNYXRoLmFicyhleHBlY3RlZFt5ICogd2lkdGggKiA0ICsgeCAqIDQgKyAwXSAtIGFjdHVhbFt5ICogd2lkdGggKiA0ICsgeCAqIDQgKyAwXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCArPSBNYXRoLmFicyhleHBlY3RlZFt5ICogd2lkdGggKiA0ICsgeCAqIDQgKyAxXSAtIGFjdHVhbFt5ICogd2lkdGggKiA0ICsgeCAqIDQgKyAxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCArPSBNYXRoLmFicyhleHBlY3RlZFt5ICogd2lkdGggKiA0ICsgeCAqIDQgKyAyXSAtIGFjdHVhbFt5ICogd2lkdGggKiA0ICsgeCAqIDQgKyAyXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBmbG9vciwgdG8gYWxsb3cgc29tZSBtYXJnaW4gb2YgZXJyb3IgZm9yIGFudGlhbGlhc2luZ1xuICAgICAgICAgICAgICAgIGNvbnN0IHdyb25nID0gTWF0aC5mbG9vcih0b3RhbCAvIChpbWcud2lkdGggKiBpbWcuaGVpZ2h0ICogMykpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHdyb25nKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhY3R1YWxJbWFnZS5zcmMgPSBhY3R1YWxVcmw7XG4gICAgICAgIH07XG4gICAgICAgIGltZy5zcmMgPSBpbWFnZVVybDtcbiAgICB9KTtcbn07XG4iLCJpbXBvcnQgYXNzZXJ0ID0gcmVxdWlyZShcImFzc2VydFwiKTtcbmltcG9ydCB7IERvc01haW5GbiwgRG9zUmVhZHlQcm9taXNlIH0gZnJvbSBcIi4uL2pzLWRvcy10cy9qcy1kb3NcIjtcbmltcG9ydCB7IERvc0ZTIH0gZnJvbSBcIi4uL2pzLWRvcy10cy9qcy1kb3MtZnNcIjtcblxuLy8gRG9cbi8vID09XG4vLyBXZSB1c2UgdGhpcyBmdW5jdGlvbnMgdG8gYXZvaWQgcHJvYmxlbSBvZiB0aHJvd2luZyxcbi8vIGV4Y2VwdGlvbnMgaW5zaWRlIHByb21pc2UuXG4vLyBNb2NoYSBjYW4ndCBoYW5kbGUgZXhjZXB0aW9ucyBpZiB0aGV5IGFyZSB0aHJvd2VkIGluIHByb21pc2VcblxuZXhwb3J0IGZ1bmN0aW9uIGRvVGhlbjxUPihwcm9taXNlOiBQcm9taXNlPFQ+LCBmbjogKHY6IFQpID0+IHZvaWQpIHtcbiAgICBwcm9taXNlLnRoZW4oKHY6IFQpID0+IHtcbiAgICAgICAgY29uc3QgdG9wRm4gPSAoKSA9PiB7XG4gICAgICAgICAgICBmbih2KTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZXRUaW1lb3V0KHRvcEZuLCAxKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvQ2F0Y2g8VD4ocHJvbWlzZTogUHJvbWlzZTxUPiwgZm46ICh2OiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICBwcm9taXNlLmNhdGNoKCh2OiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgdG9wRm4gPSAoKSA9PiB7XG4gICAgICAgICAgICBmbih2KTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZXRUaW1lb3V0KHRvcEZuLCAxKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvTmV4dDxUPihwcm9taXNlOiBQcm9taXNlPFQ+LCBmbjogKHY6IFQpID0+IHZvaWQpIHtcbiAgICBkb1RoZW4ocHJvbWlzZSwgZm4pO1xuICAgIGRvQ2F0Y2gocHJvbWlzZSwgKG1zZzogc3RyaW5nKSA9PiBhc3NlcnQuZmFpbChtc2cpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvUmVhZHkocHJvbWlzZTogRG9zUmVhZHlQcm9taXNlLCBmbjogKGZzOiBEb3NGUywgbWFpbjogRG9zTWFpbkZuKSA9PiB2b2lkKSB7XG4gICAgZG9UaGVuKHByb21pc2UsIChydW50aW1lKSA9PiB7XG4gICAgICAgIGZuKHJ1bnRpbWUuZnMsIHJ1bnRpbWUubWFpbik7XG4gICAgfSk7XG4gICAgZG9DYXRjaChwcm9taXNlLCAobXNnOiBzdHJpbmcpID0+IGFzc2VydC5mYWlsKG1zZykpO1xufVxuIiwiLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1jb25zb2xlICovXG5cbmltcG9ydCAqIGFzIGFzc2VydCBmcm9tIFwiYXNzZXJ0XCI7XG5pbXBvcnQgeyBEb3MgfSBmcm9tIFwiLi4vanMtZG9zLXRzL2pzLWRvc1wiO1xuaW1wb3J0IHsgSUNhY2hlIH0gZnJvbSBcIi4uL2pzLWRvcy10cy9qcy1kb3MtY2FjaGVcIjtcbmltcG9ydCBDYWNoZURiIGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLWNhY2hlLWRiXCI7XG5pbXBvcnQgQ2FjaGVOb29wIGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLWNhY2hlLW5vb3BcIjtcbmltcG9ydCB7IERvc0NvbW1hbmRJbnRlcmZhY2UgfSBmcm9tIFwiLi4vanMtZG9zLXRzL2pzLWRvcy1jaVwiO1xuaW1wb3J0IHsgSG9zdCB9IGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLWhvc3RcIjtcbmltcG9ydCB7IERvc01vZHVsZSB9IGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLW1vZHVsZVwiO1xuaW1wb3J0IHsgRG9zT3B0aW9ucyB9IGZyb20gXCIuLi9qcy1kb3MtdHMvanMtZG9zLW9wdGlvbnNcIjtcbmltcG9ydCB7IGNvbXBhcmVBbmRFeGl0IH0gZnJvbSBcIi4vY29tcGFyZVwiO1xuaW1wb3J0IHsgZG9DYXRjaCwgZG9OZXh0LCBkb1JlYWR5LCBkb1RoZW4gfSBmcm9tIFwiLi9kb1wiO1xuXG5zdWl0ZShcImpzLWRvcy1ob3N0XCIpO1xuXG50ZXN0KFwibG9hZGVyIHNob3VsZCBub3RpZnkgYWJvdXQgZXJyb3IgaWYgd2FzbSBpcyBub3Qgc3VwcG9ydGVkXCIsIChkb25lKSA9PiB7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSBIb3N0Lndhc21TdXBwb3J0ZWQ7XG4gICAgSG9zdC53YXNtU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgSG9zdC5yZXNvbHZlRG9zQm94KFwid3Jvbmd1cmwuanNcIiwgbmV3IENhY2hlTm9vcCgpLCB7XG4gICAgICAgIG9uZXJyb3I6IChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIEhvc3Qud2FzbVN1cHBvcnRlZCA9IG9sZFZhbHVlO1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKFwiV2ViQXNzZW1ibHkgaXMgbm90IHN1cHBvcnRlZCwgY2FuJ3QgcmVzb2x2ZSB3ZG9zYm94XCIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9LFxuICAgIH0gYXMgRG9zTW9kdWxlKTtcbn0pO1xuXG50ZXN0KFwibG9hZGVyIHNob3VsZCBub3RpZnkgYWJvdXQgZXJyb3IsIGlmIGl0IGNhbid0IGRvd25sb2FkIHdkb3Nib3hcIiwgKGRvbmUpID0+IHtcbiAgICBIb3N0LnJlc29sdmVEb3NCb3goXCJ3cm9uZ3VybC5qc1wiLCBuZXcgQ2FjaGVOb29wKCksIHtcbiAgICAgICAgb25lcnJvcjogKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKFwiQ2FuJ3QgZG93bmxvYWQgd2FzbSwgY29kZTogNDA0LCBtZXNzYWdlOiBjb25uZWN0aW9uIHByb2JsZW0sIHVybDogd3Jvbmd1cmwud2FzbS5qc1wiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSxcbiAgICB9IGFzIERvc01vZHVsZSk7XG59KTtcblxudGVzdChcImxvYWRlciBzaG91bGQgc2hvdyBwcm9ncmVzcyBsb2FkaW5nIGFuZCB1c2UgY2FjaGVcIiwgKGRvbmUpID0+IHtcbiAgICBsZXQgaXNHRVQgPSBmYWxzZTtcbiAgICBsZXQgaXNQVVQgPSBmYWxzZTtcbiAgICBjbGFzcyBUZXN0Q2FjaGUgaW1wbGVtZW50cyBJQ2FjaGUge1xuICAgICAgICBwdWJsaWMgcHV0KGtleTogc3RyaW5nLCBkYXRhOiBhbnksIG9uZmx1c2g6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgICAgIGlzUFVUID0gaXNQVVQgfHwgKGtleSA9PT0gXCIvd2Rvc2JveC53YXNtLmpzXCIgJiYgZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyICYmIChkYXRhIGFzIEFycmF5QnVmZmVyKS5ieXRlTGVuZ3RoID4gMCk7XG4gICAgICAgICAgICBvbmZsdXNoKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgZ2V0KGtleTogc3RyaW5nLCBvbmRhdGE6IChkYXRhOiBhbnkpID0+IHZvaWQsIG9uZXJyb3I6IChtc2c6IHN0cmluZykgPT4gdm9pZCkge1xuICAgICAgICAgICAgaXNHRVQgPSBpc0dFVCB8fCBrZXkgPT09IFwiL3dkb3Nib3gud2FzbS5qc1wiO1xuICAgICAgICAgICAgb25lcnJvcihcIm5vdCBpbiBjYWNoZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBmb3JFYWNoKGVhY2g6IChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4gdm9pZCwgb25lbmQ6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgICAgIG9uZW5kKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgbGFzdExvYWRlZCA9IC0xO1xuICAgIEhvc3QucmVzb2x2ZURvc0JveChcIi93ZG9zYm94LmpzXCIsIG5ldyBUZXN0Q2FjaGUoKSwge1xuICAgICAgICBvbnByb2dyZXNzOiAoc3RhZ2U6IHN0cmluZywgdG90YWw6IG51bWJlciwgbG9hZGVkOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YWdlLCB0b3RhbCwgbG9hZGVkKTtcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbCh0cnVlLCBsb2FkZWQgPD0gdG90YWwsIGxvYWRlZCArIFwiPD1cIiArIHRvdGFsKTtcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbCh0cnVlLCBsYXN0TG9hZGVkIDw9IGxvYWRlZCwgbGFzdExvYWRlZCArIFwiPD1cIiArIGxvYWRlZCk7XG4gICAgICAgICAgICBsYXN0TG9hZGVkID0gbG9hZGVkO1xuICAgICAgICB9LFxuICAgICAgICBvbmRvc2JveDogKGRvc2JveDogYW55LCBpbnN0YW50aWF0ZVdhc206IGFueSkgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0Lm9rKGlzR0VUKTtcbiAgICAgICAgICAgIGFzc2VydC5vayhpc1BVVCk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uZXJyb3I6IChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgfSBhcyBEb3NNb2R1bGUpO1xufSk7XG5cbnRlc3QoXCJsb2FkZXIgc2hvdWxkIG5ldmVyIGxvYWQgdHdpY2Ugd2Rvc2JveFwiLCAoZG9uZSkgPT4ge1xuICAgIEhvc3QucmVzb2x2ZURvc0JveChcIi93ZG9zYm94LmpzXCIsIG5ldyBDYWNoZU5vb3AoKSwge1xuICAgICAgICBvbnByb2dyZXNzOiAoc3RhZ2U6IHN0cmluZywgdG90YWw6IG51bWJlciwgbG9hZGVkOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uZG9zYm94OiAoZG9zYm94OiBhbnksIGluc3RhbnRpYXRlV2FzbTogYW55KSA9PiB7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uZXJyb3I6IChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgfSBhcyBEb3NNb2R1bGUpO1xufSk7XG5cbnRlc3QoXCJsb2FkZXIgc2hvdWxkIGZpcmUgZXZlbnQgd2hlbiB3ZG9zYm94IGlzIGxvYWRlZFwiLCAoZG9uZSkgPT4ge1xuICAgIEhvc3QucmVzb2x2ZURvc0JveChcIi93ZG9zYm94LmpzXCIsIG5ldyBDYWNoZU5vb3AoKSwge1xuICAgICAgICBvbmRvc2JveDogKGRvc2JveDogYW55LCBpbnN0YW50aWF0ZVdhc206IGFueSkgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0Lm9rKGRvc2JveCk7XG4gICAgICAgICAgICBhc3NlcnQub2soaW5zdGFudGlhdGVXYXNtKTtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25lcnJvcjogKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmZhaWwoKTtcbiAgICAgICAgfSxcbiAgICB9IGFzIERvc01vZHVsZSk7XG59KTtcblxuc3VpdGUoXCJqcy1kb3NcIik7XG5cbnRlc3QoXCJqcy1kb3MgY2FuJ3Qgc3RhcnQgd2l0aG91dCBjYW52YXMgKGxpc3RlbmVyIHN0eWxlKVwiLCAoZG9uZSkgPT4ge1xuICAgIERvcyhudWxsLCB7XG4gICAgICAgIHdkb3Nib3hVcmw6IFwiL3dkb3Nib3guanNcIixcbiAgICAgICAgb25lcnJvcjogKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKFwiY2FudmFzIGZpZWxkIGlzIHJlcXVpcmVkLCBidXQgbm90IHNldCFcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0sXG4gICAgfSBhcyBEb3NPcHRpb25zKTtcbn0pO1xuXG50ZXN0KFwianMtZG9zIGNhbid0IHN0YXJ0IHdpdGhvdXQgY2FudmFzIChwcm9taXNlIHN0eWxlKVwiLCAoZG9uZSkgPT4ge1xuICAgIGNvbnN0IGRvcyA9IERvcyhudWxsLCB7XG4gICAgICAgIHdkb3Nib3hVcmw6IFwiL3dkb3Nib3guanNcIixcbiAgICB9IGFzIERvc09wdGlvbnMpO1xuICAgIGRvQ2F0Y2goZG9zLCAobWVzc2FnZSkgPT4ge1xuICAgICAgICBhc3NlcnQuZXF1YWwoXCJjYW52YXMgZmllbGQgaXMgcmVxdWlyZWQsIGJ1dCBub3Qgc2V0IVwiLCBtZXNzYWdlKTtcbiAgICAgICAgZG9uZSgpO1xuICAgIH0pO1xuICAgIGRvVGhlbihkb3MsICgpID0+IHtcbiAgICAgICAgYXNzZXJ0LmZhaWwoKTtcbiAgICB9KTtcbn0pO1xuXG50ZXN0KFwianMtZG9zIGNhbid0IHN0YXJ0IHdpdGhvdXQgY2FudmFzIChyZWFkeSBzdHlsZSlcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MobnVsbCwge1xuICAgICAgICB3ZG9zYm94VXJsOiBcIi93ZG9zYm94LmpzXCIsXG4gICAgfSBhcyBEb3NPcHRpb25zKTtcbiAgICBjb25zdCBwcm9taXNlID0gZG9zLnJlYWR5KChmcywgbWFpbikgPT4ge1xuICAgICAgICBjb25zdCBmbiA9ICgpID0+IGFzc2VydC5mYWlsKCk7XG4gICAgICAgIHNldFRpbWVvdXQoZm4sIDEpO1xuICAgIH0pO1xuICAgIGRvQ2F0Y2gocHJvbWlzZSwgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKFwiY2FudmFzIGZpZWxkIGlzIHJlcXVpcmVkLCBidXQgbm90IHNldCFcIiwgbWVzc2FnZSk7XG4gICAgICAgIGRvbmUoKTtcbiAgICB9KTtcbn0pO1xuXG50ZXN0KFwianMtZG9zIHNob3VsZCBzdGFydCB3aXRoIGNhbnZhc1wiLCAoZG9uZSkgPT4ge1xuICAgIGNvbnN0IGRvcyA9IERvcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudCwge1xuICAgICAgICB3ZG9zYm94VXJsOiBcIi93ZG9zYm94LmpzXCIsXG4gICAgfSk7XG4gICAgZG9SZWFkeShkb3MsIChmcywgbWFpbikgPT4ge1xuICAgICAgICBkb05leHQobWFpbihbXSksIChjaSkgPT4ge1xuICAgICAgICAgICAgY2kuZXhpdCgpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuXG50ZXN0KFwianMtZG9zIGNhbiB0YWtlIHNjcmVlbnNob3Qgb2YgY2FudmFzXCIsIChkb25lKSA9PiB7XG4gICAgY29uc3QgZG9zID0gRG9zKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50LCB7XG4gICAgICAgIHdkb3Nib3hVcmw6IFwiL3dkb3Nib3guanNcIixcbiAgICB9KTtcbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGRvTmV4dChtYWluKFtdKSwgKGNpKSA9PiB7XG4gICAgICAgICAgICBjb21wYXJlQW5kRXhpdChcImluaXQucG5nXCIsIGNpLCBkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcblxuc3VpdGUoXCJqcy1kb3MtZnNcIik7XG5cbnRlc3QoXCJqcy1kb3MtZnMgY3JlYXRlRmlsZSBlcnJvciBoYW5kbGluZ1wiLCAoZG9uZSkgPT4ge1xuICAgIGNvbnN0IGRvcyA9IERvcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudCwge1xuICAgICAgICB3ZG9zYm94VXJsOiBcIi93ZG9zYm94LmpzXCIsXG4gICAgICAgIG9uZXJyb3I6IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwobWVzc2FnZSwgXCJDYW4ndCBjcmVhdGUgZmlsZSAnJywgYmVjYXVzZSBmaWxlIG5hbWUgaXMgZW1wdHlcIik7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGZzLmNyZWF0ZUZpbGUoXCJcIiwgXCJcIik7XG4gICAgfSk7XG59KTtcblxudGVzdChcImpzLWRvcy1mcyBjcmVhdGVGaWxlIGVycm9yIGhhbmRsaW5nIDJcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQsIHtcbiAgICAgICAgd2Rvc2JveFVybDogXCIvd2Rvc2JveC5qc1wiLFxuICAgICAgICBvbmVycm9yOiAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKG1lc3NhZ2UsIFwiQ2FuJ3QgY3JlYXRlIGZpbGUgJy9ob21lLycsIGJlY2F1c2UgZmlsZSBuYW1lIGlzIGVtcHR5XCIpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgZG9SZWFkeShkb3MsIChmcywgbWFpbikgPT4ge1xuICAgICAgICBmcy5jcmVhdGVGaWxlKFwiL2hvbWUvXCIsIFwiXCIpO1xuICAgIH0pO1xufSk7XG5cbnRlc3QoXCJqcy1kb3MtZnMgY2FuIGNyZWF0ZSBmaWxlXCIsIChkb25lKSA9PiB7XG4gICAgY29uc3QgZG9zID0gRG9zKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50LCB7XG4gICAgICAgIHdkb3Nib3hVcmw6IFwiL3dkb3Nib3guanNcIixcbiAgICAgICAgb25lcnJvcjogKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGZzLmNyZWF0ZUZpbGUoXCIvd2lraS9tdXNrXCIsIHdpa2lFbG9uTXVzayk7XG4gICAgICAgIGRvTmV4dChtYWluKCksIChjaSkgPT4ge1xuICAgICAgICAgICAgZG9OZXh0KGNpLnNoZWxsKFwidHlwZSB3aWtpXFxcXG11c2tcIiksICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb21wYXJlQW5kRXhpdChcImVsb25tdXNrLnBuZ1wiLCBjaSwgZG9uZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcblxudGVzdChcImpzLWRvcy1mcyBjYW4gY3JlYXRlIGZpbGUgKHdpbmRvd3MgcGF0aClcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQsIHtcbiAgICAgICAgd2Rvc2JveFVybDogXCIvd2Rvc2JveC5qc1wiLFxuICAgICAgICBvbmVycm9yOiAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmZhaWwoKTtcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIGRvUmVhZHkoZG9zLCAoZnMsIG1haW4pID0+IHtcbiAgICAgICAgZnMuY3JlYXRlRmlsZShcIkM6XFxcXHdpa2lcXFxcbXVza1wiLCB3aWtpRWxvbk11c2spO1xuICAgICAgICBkb05leHQobWFpbigpLCAoY2kpID0+IHtcbiAgICAgICAgICAgIGRvTmV4dChjaS5zaGVsbChcInR5cGUgd2lraVxcXFxtdXNrXCIpLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29tcGFyZUFuZEV4aXQoXCJlbG9ubXVzay5wbmdcIiwgY2ksIGRvbmUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbnRlc3QoXCJqcy1kb3MtZnMgY2xlYXJpbmcgSURCRlMgZGJcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKFwiL3Rlc3RcIik7XG5cbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihldmVudCk7XG4gICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgfTtcblxuICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGRvbmUoKTtcbiAgICB9O1xufSk7XG5cbnRlc3QoXCJqcy1kb3MtZnMgY2FuIG1vdW50IGFyY2hpdmUgb24gcGVyc2lzdGVudCBwb2ludCBbZW1wdHkgZGJdXCIsIChkb25lKSA9PiB7XG4gICAgbGV0IGlzT25Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIGNvbnN0IGRvcyA9IERvcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudCwge1xuICAgICAgICB3ZG9zYm94VXJsOiBcIi93ZG9zYm94LmpzXCIsXG4gICAgICAgIG9uZXJyb3I6IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBhc3NlcnQuZmFpbCgpO1xuICAgICAgICB9LFxuICAgICAgICBvbnByb2dyZXNzOiAoc3RhZ2U6IHN0cmluZywgdG90YWw6IG51bWJlciwgbG9hZGVkOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGlzT25Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGRvTmV4dChmcy5leHRyYWN0KFwiZGlnZ2VyLnppcFwiLCBcIi90ZXN0XCIpLCAoKSA9PiB7XG4gICAgICAgICAgICBkb05leHQobWFpbigpLCAoY2kpID0+IHtcbiAgICAgICAgICAgICAgICBkb05leHQoY2kuc2hlbGwoXCJkaXIgdGVzdFwiKSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQub2soaXNPblByb2dyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgY29tcGFyZUFuZEV4aXQoXCJwZXNpc3RlbnQtbW91bnQucG5nXCIsIGNpLCBkb25lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuXG50ZXN0KFwianMtZG9zLWZzIGNhbiBtb3VudCBhcmNoaXZlIG9uIHBlcnNpc3RlbnQgcG9pbnQgW2V4aXN0ZW50IGRiXVwiLCAoZG9uZSkgPT4ge1xuICAgIGNvbnN0IGRvcyA9IERvcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudCwge1xuICAgICAgICB3ZG9zYm94VXJsOiBcIi93ZG9zYm94LmpzXCIsXG4gICAgICAgIG9uZXJyb3I6IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBhc3NlcnQuZmFpbCgpO1xuICAgICAgICB9LFxuICAgICAgICBvbnByb2dyZXNzOiAoc3RhZ2U6IHN0cmluZywgdG90YWw6IG51bWJlciwgbG9hZGVkOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGRvTmV4dChmcy5leHRyYWN0KFwiZGlnZ2VyLnppcFwiLCBcIi90ZXN0XCIpLCAoKSA9PiB7XG4gICAgICAgICAgICBkb05leHQobWFpbigpLCAoY2kpID0+IHtcbiAgICAgICAgICAgICAgICBkb05leHQoY2kuc2hlbGwoXCJkaXIgdGVzdFwiKSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb21wYXJlQW5kRXhpdChcInBlc2lzdGVudC1tb3VudC5wbmdcIiwgY2ksIGRvbmUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbnN1aXRlKFwianMtZG9zXCIpO1xuXG50ZXN0KFwianMtZG9zIHNob3VsZCBwcm92aWRlIHVzZXIgbGV2ZWwgZG9zYm94LmNvbmZcIiwgKGRvbmUpID0+IHtcbiAgICBjb25zdCBkb3MgPSBEb3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQsIHtcbiAgICAgICAgd2Rvc2JveFVybDogXCIvd2Rvc2JveC5qc1wiLFxuICAgICAgICBvbmVycm9yOiAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmZhaWwoKTtcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIGRvUmVhZHkoZG9zLCAoZnMsIG1haW4pID0+IHtcbiAgICAgICAgZnMuY3JlYXRlRmlsZShcImRvc2JveC5jb25mXCIsIGBcbiAgICAgICAgW2F1dG9leGVjXVxuICAgICAgICBtb3VudCBjIC5cbiAgICAgICAgYzpcbiAgICAgICAgY2QgSE9NRVxuICAgICAgICBjZCBXRUJfVVNFUlxuICAgICAgICBjZCBET1NCT1h+MVxuICAgICAgICB0eXBlIGRvc2JveH4xLmNvblxuICAgICAgICBgKTtcblxuICAgICAgICBkb05leHQobWFpbihbXCItY29uZlwiLCBcImRvc2JveC5jb25mXCJdKSwgKGNpKSA9PiB7XG4gICAgICAgICAgICBjb21wYXJlQW5kRXhpdChcImpzZG9zLWNvbmYucG5nXCIsIGNpLCBkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcblxudGVzdChcImpzLWRvcyBjYW4gY3JlYXRlIGFuZCByZWFkIGRvc2JveC5jb25mXCIsIChkb25lKSA9PiB7XG4gICAgY29uc3QgZG9zID0gRG9zKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50LCB7XG4gICAgICAgIHdkb3Nib3hVcmw6IFwiL3dkb3Nib3guanNcIixcbiAgICAgICAgb25lcnJvcjogKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5mYWlsKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkb1JlYWR5KGRvcywgKGZzLCBtYWluKSA9PiB7XG4gICAgICAgIGZzLmNyZWF0ZUZpbGUoXCJkb3Nib3guY29uZlwiLCBgXG4gICAgICAgICAgICBbYXV0b2V4ZWNdXG4gICAgICAgICAgICBtb3VudCBjIC5cbiAgICAgICAgICAgIGM6XG4gICAgICAgICAgICB0eXBlIGRvc2JveH4xLmNvblxuICAgICAgICBgKTtcbiAgICAgICAgZG9OZXh0KG1haW4oW1wiLWNvbmZcIiwgXCJkb3Nib3guY29uZlwiXSksIChjaSkgPT4ge1xuICAgICAgICAgICAgY29tcGFyZUFuZEV4aXQoXCJkb3Nib3hjb25mLnBuZ1wiLCBjaSwgZG9uZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbnRlc3QoXCJqcy1kb3MgY2FuIHJ1biBkaWdnZXIuemlwXCIsIChkb25lKSA9PiB7XG4gICAgY29uc3QgZG9zID0gRG9zKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50LCB7XG4gICAgICAgIHdkb3Nib3hVcmw6IFwiL3dkb3Nib3guanNcIixcbiAgICB9KTtcblxuICAgIGRvUmVhZHkoZG9zLCAoZnMsIG1haW4pID0+IHtcbiAgICAgICAgZG9OZXh0KGZzLmV4dHJhY3QoXCJkaWdnZXIuemlwXCIpLCAoKSA9PiB7XG4gICAgICAgICAgICBkb05leHQobWFpbihbXCJESUdHRVIuQ09NXCJdKSwgKGNpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmVBbmRFeGl0KFwiZGlnZ2VyLnBuZ1wiLCBjaSwgZG9uZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNhdmVJbWFnZShjaSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZm4sIDUwMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbmNvbnN0IHNhdmVJbWFnZSA9IChjaTogRG9zQ29tbWFuZEludGVyZmFjZSkgPT4ge1xuICAgIGNpLnNjcmVlbnNob3QoKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IHcgPSB3aW5kb3cub3BlbihcImFib3V0OmJsYW5rXCIsIFwiaW1hZ2UgZnJvbSBjYW52YXNcIik7XG4gICAgICAgIHcuZG9jdW1lbnQud3JpdGUoXCI8aW1nIHNyYz0nXCIgKyBkYXRhICsgXCInIGFsdD0nZnJvbSBjYW52YXMnLz5cIik7XG4gICAgfSk7XG59O1xuXG5jb25zdCB3aWtpRWxvbk11c2sgPSBgXG5FbG9uIFJlZXZlIE11c2sgRlJTICgvy4hpy5BsyZJuLzsgYm9ybiBKdW5lIDI4LCAxOTcxKSBpcyBhXG50ZWNobm9sb2d5IGVudHJlcHJlbmV1ciBhbmQgZW5naW5lZXIuWzEwXVsxMV1bMTJdXG5IZSBob2xkcyBTb3V0aCBBZnJpY2FuLCBDYW5hZGlhbiwgYW5kIFUuUy4gY2l0aXplbnNoaXBcbmFuZCBpcyB0aGUgZm91bmRlciwgQ0VPLCBhbmQgbGVhZCBkZXNpZ25lciBvZiBTcGFjZVg7XG5bMTNdIGNvLWZvdW5kZXIsIENFTywgYW5kIHByb2R1Y3QgYXJjaGl0ZWN0IG9mIFRlc2xhLCBJbmMuO1xuWzE0XSBjby1mb3VuZGVyIGFuZCBDRU8gb2YgTmV1cmFsaW5rOyBhbmQgY28tZm91bmRlciBvZiBQYXlQYWwuXG5JbiBEZWNlbWJlciAyMDE2LCBoZSB3YXMgcmFua2VkIDIxc3Qgb24gdGhlIEZvcmJlcyBsaXN0IG9mXG5UaGUgV29ybGQncyBNb3N0IFBvd2VyZnVsIFBlb3BsZS5bMTVdIEFzIG9mIE9jdG9iZXIgMjAxOCxcbmhlIGhhcyBhIG5ldCB3b3J0aCBvZiAkMjIuOCBiaWxsaW9uIGFuZCBpcyBsaXN0ZWQgYnkgRm9yYmVzXG5hcyB0aGUgNTR0aC1yaWNoZXN0IHBlcnNvbiBpbiB0aGUgd29ybGQuWzE2XVxuQm9ybiBhbmQgcmFpc2VkIGluIFByZXRvcmlhLCBTb3V0aCBBZnJpY2EsIE11c2sgbW92ZWQgdG9cbkNhbmFkYSB3aGVuIGhlIHdhcyAxNyB0byBhdHRlbmQgUXVlZW4ncyBVbml2ZXJzaXR5LlxuSGUgdHJhbnNmZXJyZWQgdG8gdGhlIFVuaXZlcnNpdHkgb2YgUGVubnN5bHZhbmlhIHR3byB5ZWFyc1xubGF0ZXIsIHdoZXJlIGhlIHJlY2VpdmVkIGFuIGVjb25vbWljcyBkZWdyZWUgZnJvbVxudGhlIFdoYXJ0b24gU2Nob29sIGFuZCBhIGRlZ3JlZSBpbiBwaHlzaWNzIGZyb20gdGhlIENvbGxlZ2Vcbm9mIEFydHMgYW5kIFNjaWVuY2VzLiBIZSBiZWdhbiBhIFBoLkQuXG5pbiBhcHBsaWVkIHBoeXNpY3MgYW5kIG1hdGVyaWFsIHNjaWVuY2VzIGF0IFN0YW5mb3JkIFVuaXZlcnNpdHlcbmluIDE5OTUgYnV0IGRyb3BwZWQgb3V0IGFmdGVyIHR3byBkYXlzIHRvIHB1cnN1ZVxuYW4gZW50cmVwcmVuZXVyaWFsIGNhcmVlci4gSGUgc3Vic2VxdWVudGx5IGNvLWZvdW5kZWQgWmlwMiwgYVxud2ViIHNvZnR3YXJlIGNvbXBhbnksIHdoaWNoIHdhcyBhY3F1aXJlZCBieSBDb21wYXFcbmZvciAkMzQwIG1pbGxpb24gaW4gMTk5OS4gTXVzayB0aGVuIGZvdW5kZWQgWC5jb20sIGFuIG9ubGluZSBiYW5rLlxuSXQgbWVyZ2VkIHdpdGggQ29uZmluaXR5IGluIDIwMDAgYW5kIGxhdGVyIHRoYXRcbnllYXIgYmVjYW1lIFBheVBhbCwgd2hpY2ggd2FzIGJvdWdodCBieSBlQmF5IGZvciAkMS41IGJpbGxpb25cbmluIE9jdG9iZXIgMjAwMi5bMTddWzE4XVsxOV1bMjBdXG5gO1xuIl19"}